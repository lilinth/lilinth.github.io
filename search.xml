<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>é›†æˆWindows è¡¥ä¸åˆ°å®‰è£…æ–‡ä»¶</title>
      <link href="/2025/08/19/Integrate_windows_patch_to_install_file/"/>
      <url>/2025/08/19/Integrate_windows_patch_to_install_file/</url>
      
        <content type="html"><![CDATA[<h1 id="é›†æˆWindows-è¡¥ä¸åˆ°å®‰è£…æ–‡ä»¶"><a href="#é›†æˆWindows-è¡¥ä¸åˆ°å®‰è£…æ–‡ä»¶" class="headerlink" title="é›†æˆWindows è¡¥ä¸åˆ°å®‰è£…æ–‡ä»¶"></a>é›†æˆWindows è¡¥ä¸åˆ°å®‰è£…æ–‡ä»¶</h1><h2 id="1-é›†æˆæ¦‚è¿°"><a href="#1-é›†æˆæ¦‚è¿°" class="headerlink" title="1. é›†æˆæ¦‚è¿°"></a>1. é›†æˆæ¦‚è¿°</h2><h3 id="è¡¥ä¸è·å–"><a href="#è¡¥ä¸è·å–" class="headerlink" title="è¡¥ä¸è·å–"></a>è¡¥ä¸è·å–</h3><hr><ul><li>ä»ä¸‹è½½ä¸­å¿ƒè·å–æœ€æ–°çš„Windowsæ›´æ–°è¡¥ä¸ï¼Œåœ°å€ï¼š<a href="https://www.catalog.update.microsoft.com/Home.aspx">Windows æ›´æ–°ç›®å½•</a></li><li>ä¸‹è½½æ‰€éœ€çš„è¡¥ä¸æ–‡ä»¶ï¼Œé€šå¸¸ä¸º <code>.cab</code> æˆ– <code>.msu</code> æ ¼å¼ã€‚</li><li>ç¡®ä¿ä¸‹è½½çš„è¡¥ä¸ä¸ç›®æ ‡æ“ä½œç³»ç»Ÿç‰ˆæœ¬å’Œä½“ç³»ç»“æ„ï¼ˆ32ä½æˆ–64ä½ï¼‰åŒ¹é…ã€‚</li><li>æ ¹æ®KBç¼–å·æˆ–è¡¥ä¸åç§°è¿›è¡Œç­›é€‰å’Œä¸‹è½½ã€‚</li></ul><h3 id="æŒ‚è½½é•œåƒ"><a href="#æŒ‚è½½é•œåƒ" class="headerlink" title="æŒ‚è½½é•œåƒ"></a>æŒ‚è½½é•œåƒ</h3><hr><ul><li>ä½¿ç”¨ DISM å·¥å…·æŒ‚è½½ Windows å®‰è£…é•œåƒæ–‡ä»¶ï¼ˆWIM æ–‡ä»¶ï¼‰ï¼Œ  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /<span class="built_in">Mount-Wim</span> /WimFile:install.wim /index:<span class="number">4</span> /MountDir:c:\mount</span><br></pre></td></tr></table></figure><ul><li><p><strong>&#x2F;WimFile:install.wim</strong>: æŒ‡å®šè¦æŒ‚è½½çš„WIMæ–‡ä»¶è·¯å¾„ã€‚</p></li><li><p><strong>&#x2F;index:4</strong>: æŒ‡å®šè¦æŒ‚è½½çš„æ˜ åƒç´¢å¼•å·ï¼ˆ4è¡¨ç¤ºç¬¬å››ä¸ªæ˜ åƒï¼‰ï¼Œç´¢å¼•å·å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /<span class="built_in">Get-WimInfo</span> /WimFile:install.wim</span><br></pre></td></tr></table></figure></li><li><p><strong>&#x2F;MountDir:c:\mount</strong>: æŒ‡å®šæŒ‚è½½ç‚¹ç›®å½•ã€‚</p></li></ul></li></ul><h3 id="å¯¼å…¥-Servicing-Stack-Updateï¼ˆSSUï¼‰"><a href="#å¯¼å…¥-Servicing-Stack-Updateï¼ˆSSUï¼‰" class="headerlink" title="å¯¼å…¥ Servicing Stack Updateï¼ˆSSUï¼‰"></a>å¯¼å…¥ Servicing Stack Updateï¼ˆSSUï¼‰</h3><hr><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ Servicing Stack Update (SSU) è¡¥ä¸ï¼š  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /Image:c:\mount /<span class="built_in">Add-Package</span> /PackagePath:c:\SSU\SSUâ€‘xxxxx.cab</span><br></pre></td></tr></table></figure><ul><li><strong>&#x2F;PackagePath:c:\SSU\SSUâ€‘xxxxx.cab</strong>: æŒ‡å®šSSUè¡¥ä¸çš„è·¯å¾„ã€‚</li></ul></li></ul><h3 id="å¯¼å…¥ç´¯ç§¯æ›´æ–°-CAB"><a href="#å¯¼å…¥ç´¯ç§¯æ›´æ–°-CAB" class="headerlink" title="å¯¼å…¥ç´¯ç§¯æ›´æ–° CAB"></a>å¯¼å…¥ç´¯ç§¯æ›´æ–° CAB</h3><hr><ul><li><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ç´¯ç§¯æ›´æ–°è¡¥ä¸ï¼ˆCAB æ–‡ä»¶ï¼‰ï¼š</p>  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /Image:c:\mount /<span class="built_in">Add-Package</span> /PackagePath:c:\patch\xxx.cab</span><br></pre></td></tr></table></figure><ul><li><strong>&#x2F;PackagePath:c:\patch\xxx.cab</strong>: æŒ‡å®šç´¯ç§¯æ›´æ–°è¡¥ä¸çš„è·¯å¾„ã€‚</li></ul></li><li><p>å¦‚æœæ²¡æœ‰ CABï¼Œåªèƒ½ä½¿ç”¨ MSUï¼Œç¡®ä¿å•ç‹¬æ”¾ç½®ï¼Œé¿å…å¤š MSU åŒç›®å½•å†²çª</p>  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /Image:c:\mount /<span class="built_in">Add-Package</span> /PackagePath:c:\patch\.xxx.msu</span><br></pre></td></tr></table></figure><ul><li><strong>&#x2F;PackagePath:c:\patch.xxx.msu</strong>: æŒ‡å®šç´¯ç§¯æ›´æ–°è¡¥ä¸çš„è·¯å¾„ã€‚</li></ul></li></ul><h3 id="å¸è½½å¹¶æäº¤"><a href="#å¸è½½å¹¶æäº¤" class="headerlink" title="å¸è½½å¹¶æäº¤"></a>å¸è½½å¹¶æäº¤</h3><hr><ul><li>åœ¨å®Œæˆè¡¥ä¸å¯¼å…¥åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æŒ‚è½½çš„æ˜ åƒå¹¶æäº¤æ›´æ”¹ï¼š  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /Un<span class="built_in">mount-Wim</span> /MountDir:c:\mount /Commit</span><br></pre></td></tr></table></figure><ul><li><strong>&#x2F;Commit</strong>: æäº¤æ›´æ”¹å¹¶å¸è½½æ˜ åƒã€‚</li></ul></li></ul><h2 id="2-æ³¨æ„äº‹é¡¹"><a href="#2-æ³¨æ„äº‹é¡¹" class="headerlink" title="2. æ³¨æ„äº‹é¡¹"></a>2. æ³¨æ„äº‹é¡¹</h2><ul><li>å¯¼å…¥ .msu è¡¥ä¸å¿…é¡»åŒ¹é…ç›®æ ‡é•œåƒç‰ˆæœ¬ï¼ˆå¦‚ Windows 10 21H2ï¼‰ï¼Œå¦åˆ™å®‰è£…å¤±è´¥ã€‚</li><li>ç¦»çº¿å®‰è£…æ—¶éƒ¨åˆ†è¡¥ä¸å¯èƒ½è¢« Skipï¼Œéœ€è¦æ—¥å¿—å®šä½åˆ¤æ–­ã€‚</li><li>å¦‚æœè¡¥ä¸æ˜¯ <code>.msu</code> æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£å‹ç¼©ï¼š  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expand <span class="operator">-F</span>:* C:\path\to\your\patch.msu C:\path\to\output\directory</span><br></pre></td></tr></table></figure></li><li>è§£å‹åä¼šå¾—åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª <code>.cab</code> æ–‡ä»¶ï¼Œå¯ä»¥ç”¨äºåç»­çš„é›†æˆæ“ä½œã€‚</li><li>ç¡®ä¿è¡¥ä¸çš„é¡ºåºæ­£ç¡®ï¼Œé€šå¸¸å…ˆåº”ç”¨ Servicing Stack Update (SSU)ï¼Œç„¶åæ˜¯ç´¯ç§¯æ›´æ–°ã€‚</li><li>å¦‚æœéœ€è¦é›†æˆå¤šä¸ªè¡¥ä¸ï¼Œå»ºè®®å…ˆåº”ç”¨ SSUï¼Œç„¶åæ˜¯å…¶ä»–ç´¯ç§¯æ›´æ–°ã€‚</li></ul><h3 id="3-å¸¸è§é—®é¢˜"><a href="#3-å¸¸è§é—®é¢˜" class="headerlink" title="3. å¸¸è§é—®é¢˜"></a>3. å¸¸è§é—®é¢˜</h3><h4 id="å¦‚ä½•æŸ¥çœ‹å·²å®‰è£…çš„è¡¥ä¸ï¼Ÿ"><a href="#å¦‚ä½•æŸ¥çœ‹å·²å®‰è£…çš„è¡¥ä¸ï¼Ÿ" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹å·²å®‰è£…çš„è¡¥ä¸ï¼Ÿ"></a>å¦‚ä½•æŸ¥çœ‹å·²å®‰è£…çš„è¡¥ä¸ï¼Ÿ</h4><hr><ul><li>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…çš„è¡¥ä¸åˆ—è¡¨ï¼š  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism /Image:c:\mount /<span class="built_in">Get-Packages</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="å¦‚æœè¡¥ä¸å®‰è£…å¤±è´¥ï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ"><a href="#å¦‚æœè¡¥ä¸å®‰è£…å¤±è´¥ï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ" class="headerlink" title="å¦‚æœè¡¥ä¸å®‰è£…å¤±è´¥ï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ"></a>å¦‚æœè¡¥ä¸å®‰è£…å¤±è´¥ï¼Œå¦‚ä½•æ’æŸ¥ï¼Ÿ</h4><hr><ul><li>æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ <code>C:\Windows\Logs\DISM\dism.log</code>ï¼ŒæŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ã€‚</li></ul><h4 id="è¡¥ä¸ä¸æ“ä½œç³»ç»Ÿé•œåƒä¸å…¼å®¹ï¼ˆç‰ˆæœ¬æˆ–ä½æ•°ä¸åŒ¹é…ï¼‰"><a href="#è¡¥ä¸ä¸æ“ä½œç³»ç»Ÿé•œåƒä¸å…¼å®¹ï¼ˆç‰ˆæœ¬æˆ–ä½æ•°ä¸åŒ¹é…ï¼‰" class="headerlink" title="è¡¥ä¸ä¸æ“ä½œç³»ç»Ÿé•œåƒä¸å…¼å®¹ï¼ˆç‰ˆæœ¬æˆ–ä½æ•°ä¸åŒ¹é…ï¼‰"></a>è¡¥ä¸ä¸æ“ä½œç³»ç»Ÿé•œåƒä¸å…¼å®¹ï¼ˆç‰ˆæœ¬æˆ–ä½æ•°ä¸åŒ¹é…ï¼‰</h4><hr><ul><li><p>è¡¥ä¸ä¸ç›®æ ‡é•œåƒä¸åŒ¹é…ï¼ŒDISM ä¼šæŠ›å‡ºé”™è¯¯ 0x800f081eï¼šâ€œæŒ‡å®šçš„åŒ…ä¸é€‚ç”¨äºæ­¤æ˜ åƒâ€</p></li><li><p>è§£å†³å»ºè®®ï¼šç¡®ä¿è¡¥ä¸çš„ Windows ç‰ˆæœ¬ã€ä½“ç³»ç»“æ„ï¼ˆ32 ä½ vs 64 ä½ï¼‰å’ŒæœåŠ¡åŒ…çº§åˆ«ï¼ˆå¦‚ Windows 10 21H2 ç­‰ï¼‰ä¸ WIM æ–‡ä»¶ä¸€è‡´ã€‚</p></li></ul><h4 id="msu-æ–‡ä»¶å¯¼å…¥å¤±è´¥"><a href="#msu-æ–‡ä»¶å¯¼å…¥å¤±è´¥" class="headerlink" title=".msu æ–‡ä»¶å¯¼å…¥å¤±è´¥"></a>.msu æ–‡ä»¶å¯¼å…¥å¤±è´¥</h4><hr><ul><li>å¯¼å…¥çš„ä¸æ˜¯ .cab æ ¼å¼ï¼Œè€Œæ˜¯ .msu</li><li>å½“ä½ å°† .msu æ–‡ä»¶ç›´æ¥å¯¼å…¥æ—¶ï¼Œæœ‰æ—¶ä¼šå¤±è´¥ï¼Œä¹Ÿä¸ä¼šæ­£å¸¸æ˜¾ç¤ºï¼ˆâ€œPackagesâ€ä¸‹æ— æ³•çœ‹åˆ°æ¡ç›®ï¼‰å¯ä»¥è§£å‹ç¼©.msuæ–‡ä»¶ï¼Œæå–å‡º.cab æ ¼å¼æ–‡ä»¶è¿›è¡Œç¦»çº¿è¡¥ä¸å®‰è£…ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH æœåŠ¡æ— æ³•å¯åŠ¨ï¼šç§é’¥æƒé™è¿‡äºå¼€æ”¾</title>
      <link href="/2025/08/14/ssh_server_cannot_start_too_open/"/>
      <url>/2025/08/14/ssh_server_cannot_start_too_open/</url>
      
        <content type="html"><![CDATA[<h1 id="SSH-æœåŠ¡æ— æ³•å¯åŠ¨ï¼šç§é’¥æƒé™è¿‡äºå¼€æ”¾"><a href="#SSH-æœåŠ¡æ— æ³•å¯åŠ¨ï¼šç§é’¥æƒé™è¿‡äºå¼€æ”¾" class="headerlink" title="SSH æœåŠ¡æ— æ³•å¯åŠ¨ï¼šç§é’¥æƒé™è¿‡äºå¼€æ”¾"></a>SSH æœåŠ¡æ— æ³•å¯åŠ¨ï¼šç§é’¥æƒé™è¿‡äºå¼€æ”¾</h1><p><strong>SSH ä¸»æœºç§é’¥æƒé™è¿‡å®½</strong> å¯¼è‡´ <code>sshd</code> æ‹’ç»åŠ è½½å¯†é’¥ï¼Œä»è€Œæ— æ³•å¯åŠ¨æœåŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: sshd.service: Scheduled restart job, restart counter is at 57.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: Stopped target sshd-keygen.target.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: Stopping sshd-keygen.target...</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: Reached target sshd-keygen.target.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @         WARNING: UNPROTECTED PRIVATE KEY FILE!          @</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: Permissions 0777 <span class="keyword">for</span> <span class="string">&#x27;/etc/ssh/ssh_host_rsa_key&#x27;</span> are too open.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: It is required that your private key files are NOT accessible by others.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: This private key will be ignored.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @         WARNING: UNPROTECTED PRIVATE KEY FILE!          @</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: Permissions 0777 <span class="keyword">for</span> <span class="string">&#x27;/etc/ssh/ssh_host_ecdsa_key&#x27;</span> are too open.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: It is required that your private key files are NOT accessible by others.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: This private key will be ignored.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @         WARNING: UNPROTECTED PRIVATE KEY FILE!          @</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: Permissions 0777 <span class="keyword">for</span> <span class="string">&#x27;/etc/ssh/ssh_host_ed25519_key&#x27;</span> are too open.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: It is required that your private key files are NOT accessible by others.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: This private key will be ignored.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain sshd[46837]: sshd: no hostkeys available -- exiting.</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: sshd.service: Main process exited, code=exited, status=1/FAILURE</span><br><span class="line">Aug 14 22:32:00 localhost.localdomain systemd[1]: sshd.service: Failed with result <span class="string">&#x27;exit-code&#x27;</span>.</span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜åŸå› "><a href="#é—®é¢˜åŸå› " class="headerlink" title="é—®é¢˜åŸå› "></a>é—®é¢˜åŸå› </h3><ul><li><code>/etc/ssh/ssh_host_rsa_key</code>ã€<code>ssh_host_ecdsa_key</code>ã€<code>ssh_host_ed25519_key</code> çš„æƒé™æ˜¯ <strong>0777</strong>ï¼ˆæ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼‰ã€‚</li><li><code>sshd</code> è¦æ±‚ <strong>ä¸»æœºç§é’¥æ–‡ä»¶å¿…é¡»ä»… root å¯è¯»å†™</strong>ï¼ˆ<code>0600</code> æƒé™ï¼‰ã€‚</li></ul><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ol><li><p><strong>ä¿®æ­£æƒé™</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> 600 /etc/ssh/ssh_host_*_key</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¡®ä¿å±ä¸»æ˜¯ root</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> root:root /etc/ssh/ssh_host_*_key</span><br></pre></td></tr></table></figure></li><li><p><strong>é‡å¯ SSH æœåŠ¡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart sshd</span><br></pre></td></tr></table></figure></li><li><p><strong>éªŒè¯çŠ¶æ€</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status sshd</span><br></pre></td></tr></table></figure></li></ol><h3 id="é¢å¤–å»ºè®®"><a href="#é¢å¤–å»ºè®®" class="headerlink" title="é¢å¤–å»ºè®®"></a>é¢å¤–å»ºè®®</h3><ul><li><p>å¦‚æœå¯†é’¥æ–‡ä»¶è¢«é”™è¯¯æƒé™æš´éœ²è¿‡ï¼ˆæ¯”å¦‚åœ¨ç³»ç»Ÿè¿è¡Œæ—¶å¾ˆä¹…éƒ½æ˜¯ 0777ï¼‰ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå»ºè®®é‡æ–°ç”Ÿæˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> /etc/ssh/ssh_host_*_key*</span><br><span class="line">sudo ssh-keygen -A</span><br><span class="line">sudo systemctl restart sshd</span><br></pre></td></tr></table></figure></li><li><p>è¿™æ ·å¯ä»¥ç¡®ä¿ä¸ä¼šæœ‰æ³„éœ²é£é™©ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RTC æ™¶æŒ¯ä¸æ¸©åº¦çš„å…³ç³»</title>
      <link href="/2025/07/30/RTC_Crystal/"/>
      <url>/2025/07/30/RTC_Crystal/</url>
      
        <content type="html"><![CDATA[<h1 id="RTC-æ™¶æŒ¯ä¸æ¸©åº¦çš„å…³ç³»"><a href="#RTC-æ™¶æŒ¯ä¸æ¸©åº¦çš„å…³ç³»" class="headerlink" title="RTC æ™¶æŒ¯ä¸æ¸©åº¦çš„å…³ç³»"></a>RTC æ™¶æŒ¯ä¸æ¸©åº¦çš„å…³ç³»</h1><h2 id="âœ…-1-æ™¶æŒ¯åŸºæœ¬ç‰¹æ€§ï¼ˆä»¥-FC-135R-ä¸ºä¾‹ï¼‰"><a href="#âœ…-1-æ™¶æŒ¯åŸºæœ¬ç‰¹æ€§ï¼ˆä»¥-FC-135R-ä¸ºä¾‹ï¼‰" class="headerlink" title="âœ… 1. æ™¶æŒ¯åŸºæœ¬ç‰¹æ€§ï¼ˆä»¥ FC-135R ä¸ºä¾‹ï¼‰"></a>âœ… 1. æ™¶æŒ¯åŸºæœ¬ç‰¹æ€§ï¼ˆä»¥ FC-135R ä¸ºä¾‹ï¼‰</h2><table><thead><tr><th>å‚æ•°é¡¹</th><th>æ•°å€¼</th></tr></thead><tbody><tr><td>æ™¶ä½“é¢‘ç‡</td><td>32.768â€¯kHzï¼ˆRTCå¸¸ç”¨ï¼‰</td></tr><tr><td>æ ‡å‡†é¢‘å·®å®¹å·®</td><td>Â±20â€¯ppmï¼ˆåœ¨ 25â€¯Â°C Â±5â€¯Â°Cï¼‰</td></tr><tr><td>æ¸©åº¦ç‰¹æ€§æ›²çº¿</td><td>æŠ›ç‰©çº¿å‹åç§»</td></tr><tr><td>å‘¨è½¬æ¸©åº¦</td><td>25â€¯Â°Cï¼ˆé¢‘ç‡è¯¯å·®æœ€å°ç‚¹ï¼‰</td></tr><tr><td>æ¸©åº¦ç³»æ•° B</td><td>âˆ’0.04â€¯ppm&#x2F;Â°CÂ²ï¼ˆæ¯åç¦»1Â°Cå¹³æ–¹ï¼‰</td></tr></tbody></table><hr><h2 id="ğŸŒ¡ï¸-2-æ¸©åº¦å¯¹é¢‘ç‡çš„å½±å“ï¼ˆæŠ›ç‰©çº¿è§„å¾‹ï¼‰"><a href="#ğŸŒ¡ï¸-2-æ¸©åº¦å¯¹é¢‘ç‡çš„å½±å“ï¼ˆæŠ›ç‰©çº¿è§„å¾‹ï¼‰" class="headerlink" title="ğŸŒ¡ï¸ 2. æ¸©åº¦å¯¹é¢‘ç‡çš„å½±å“ï¼ˆæŠ›ç‰©çº¿è§„å¾‹ï¼‰"></a>ğŸŒ¡ï¸ 2. æ¸©åº¦å¯¹é¢‘ç‡çš„å½±å“ï¼ˆæŠ›ç‰©çº¿è§„å¾‹ï¼‰</h2><ul><li><p>æ™¶æŒ¯åå·®è®¡ç®—å…¬å¼ï¼š</p><p>$$<br>\Delta f &#x3D; B \times (T - T_0)^2<br>$$</p><ul><li>$T_0 &#x3D; 25Â°C$ï¼Œä¸ºå‘¨è½¬ç‚¹ï¼›</li><li>B &#x3D; âˆ’0.04 ppm&#x2F;Â°CÂ²ï¼›</li></ul></li><li><p>ä¸¾ä¾‹ï¼š</p><ul><li><p>è‹¥æ¸©åº¦ä¸º 50Â°Cï¼ŒÎ”T&#x3D;25Â°Cï¼š</p><p>$$<br>\Delta f &#x3D; -0.04 Ã— 25Â² &#x3D; -25â€¯ppm<br>$$</p><p>å¯¹åº”æ¯å¤©æ…¢çº¦ 2.16 ç§’ã€‚</p></li></ul></li></ul><hr><h2 id="â±-3-æ—¶é—´è¯¯å·®ä¸-ppm-å¯¹åº”å…³ç³»"><a href="#â±-3-æ—¶é—´è¯¯å·®ä¸-ppm-å¯¹åº”å…³ç³»" class="headerlink" title="â± 3. æ—¶é—´è¯¯å·®ä¸ ppm å¯¹åº”å…³ç³»"></a>â± 3. æ—¶é—´è¯¯å·®ä¸ ppm å¯¹åº”å…³ç³»</h2><table><thead><tr><th>é¢‘ç‡åç§» (ppm)</th><th>æ¯å¤©æ—¶é—´åå·®</th></tr></thead><tbody><tr><td>1â€¯ppm</td><td>0.0864 ç§’</td></tr><tr><td>10â€¯ppm</td><td>0.864 ç§’</td></tr><tr><td>20â€¯ppm</td><td>1.728 ç§’</td></tr><tr><td>50â€¯ppm</td><td>4.32 ç§’</td></tr></tbody></table><hr><h2 id="ğŸ“‰-4-åæ¨æ¸©åº¦"><a href="#ğŸ“‰-4-åæ¨æ¸©åº¦" class="headerlink" title="ğŸ“‰ 4. åæ¨æ¸©åº¦"></a>ğŸ“‰ 4. åæ¨æ¸©åº¦</h2><p>å‡è®¾ç³»ç»Ÿä¸€å¤© <strong>æ…¢äº† 5 ç§’</strong>ï¼š</p><ul><li><p>å¯¹åº”é¢‘ç‡åç§»ï¼š</p><p>$$<br>5 &#x2F; 86400 â‰ˆ 57.9â€¯ppm<br>$$</p></li><li><p>ä»£å…¥å…¬å¼åæ¨æ¸©å·®ï¼š</p><p>$$<br>\Delta T â‰ˆ \sqrt{57.9 &#x2F; 0.04} â‰ˆ 38Â°C<br>$$</p></li><li><p>å¾—åˆ°ç¯å¢ƒæ¸©åº¦ï¼šçº¦ä¸º <strong>63â€¯Â°C</strong>ï¼ˆè‹¥é«˜æ¸©å¯¼è‡´å˜æ…¢ï¼‰</p></li></ul><hr><h2 id="ğŸ¯-5-è‹¥è¦æ±‚è¯¯å·®-â‰¤-2-ç§’-å¤©ï¼ˆâ‰ˆ-23-1-ppmï¼‰"><a href="#ğŸ¯-5-è‹¥è¦æ±‚è¯¯å·®-â‰¤-2-ç§’-å¤©ï¼ˆâ‰ˆ-23-1-ppmï¼‰" class="headerlink" title="ğŸ¯ 5. è‹¥è¦æ±‚è¯¯å·® â‰¤ 2 ç§’&#x2F;å¤©ï¼ˆâ‰ˆ 23.1 ppmï¼‰"></a>ğŸ¯ 5. è‹¥è¦æ±‚è¯¯å·® â‰¤ 2 ç§’&#x2F;å¤©ï¼ˆâ‰ˆ 23.1 ppmï¼‰</h2><p>è§£ï¼š</p><p>$$<br>|T - 25| \le \sqrt{23.1 &#x2F; 0.04} â‰ˆ 24Â°C<br>$$</p><p>å³æ¸©åº¦éœ€ç»´æŒåœ¨ï¼š</p><ul><li><strong>1â€¯Â°C â‰¤ æ¸©åº¦ â‰¤ 49â€¯Â°C</strong><br>å¦åˆ™é¢‘ç‡åå·®ä¼šè¶…è¿‡ Â±2 ç§’&#x2F;å¤©ã€‚</li></ul><hr><h2 id="âš ï¸-6-é™„åŠ è¯¯å·®æ¥æº"><a href="#âš ï¸-6-é™„åŠ è¯¯å·®æ¥æº" class="headerlink" title="âš ï¸ 6. é™„åŠ è¯¯å·®æ¥æº"></a>âš ï¸ 6. é™„åŠ è¯¯å·®æ¥æº</h2><table><thead><tr><th>æ¥æº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆå§‹é¢‘å·®</td><td>Â±20 ppm å‡ºå‚è¯¯å·®ï¼ˆæœ€å¤§Â±1.7ç§’ï¼‰</td></tr><tr><td>è€åŒ–</td><td>çº¦ Â±3 ppm&#x2F;å¹´ï¼ˆçº¦ Â±0.26 ç§’&#x2F;å¤©ï¼‰</td></tr><tr><td>è´Ÿè½½ç”µå®¹å½±å“</td><td>æ¿è½½è®¾è®¡å·®å¼‚å¯èƒ½é€ æˆé¢å¤– ppm åç§»</td></tr><tr><td>æ¸©åº¦çªå˜</td><td>å¿«é€ŸåŠ çƒ­&#x2F;å†·å´å¼•èµ·ç¬æ—¶åç§»</td></tr></tbody></table><hr><h2 id="âœ…-7-å®é™…æƒ…å†µ"><a href="#âœ…-7-å®é™…æƒ…å†µ" class="headerlink" title="âœ… 7. å®é™…æƒ…å†µ"></a>âœ… 7. å®é™…æƒ…å†µ</h2><ul><li><p><strong>å¦‚åªé æ™¶æŒ¯è¿è¡Œ</strong>ï¼Œç»´æŒæ¸©åº¦åœ¨ <strong>1â€“49â€¯Â°C</strong> å¯æ§åˆ¶åœ¨ Â±2ç§’&#x2F;å¤©ï¼›</p></li><li><p><strong>è‹¥åº”ç”¨å¯¹æ—¶é—´ç²¾åº¦è¦æ±‚æ›´é«˜</strong>ï¼Œå¯ä»¥ï¼š</p><ul><li>ä½¿ç”¨ <strong>æ¸©è¡¥æ™¶æŒ¯ï¼ˆTCXOï¼‰</strong> æˆ–æ›´é«˜ç²¾åº¦ RTCï¼›</li><li>å¯ç”¨ <strong>NTP &#x2F; PTP &#x2F; GPS æ—¶é—´åŒæ­¥æœºåˆ¶</strong>ï¼›</li><li>æ·»åŠ  <strong>æ¸©åº¦ç›‘æµ‹ä¸è¡¥å¿æ ¡å‡†</strong>ã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RTC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HAProxy è½¬å‘ Windows RDP</title>
      <link href="/2025/07/30/haproxy_rdp_configuration/"/>
      <url>/2025/07/30/haproxy_rdp_configuration/</url>
      
        <content type="html"><![CDATA[<h1 id="HAProxy-è½¬å‘-Windows-RDP"><a href="#HAProxy-è½¬å‘-Windows-RDP" class="headerlink" title="HAProxy è½¬å‘ Windows RDP"></a>HAProxy è½¬å‘ Windows RDP</h1><p>éƒ¨ç½² HAProxy å®ç° Windows RDP çš„ TCP è½¬å‘ã€ä¼šè¯ç²˜æ€§åŠå¥åº·æ£€æŸ¥ã€‚</p><hr><h2 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2><ul><li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šLinuxï¼ˆDebian &#x2F; Ubuntu &#x2F; CentOS ç­‰ï¼‰  </li><li><strong>å®‰è£… HAProxy</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># Debian / Ubuntu</span></span><br><span class="line">  sudo apt update</span><br><span class="line">  sudo apt install haproxy</span><br><span class="line"></span><br><span class="line">  <span class="comment"># CentOS</span></span><br><span class="line">  sudo yum install haproxy</span><br><span class="line">  ````</span><br><span class="line"></span><br><span class="line">* **åç«¯ Windows ç³»ç»Ÿ**ï¼š</span><br><span class="line"></span><br><span class="line">  * å¯ç”¨ RDPï¼ˆTCP ç«¯å£ 3389ï¼‰ï¼Œå¹¶ç¡®ä¿é˜²ç«å¢™å·²å¼€æ”¾ã€‚</span><br><span class="line">* **ç½‘ç»œè¿é€šæ€§æµ‹è¯•**ï¼š</span><br><span class="line">  HAProxy ä¸»æœºèƒ½è®¿é—®åç«¯æ‰€æœ‰ RDP æœåŠ¡å™¨çš„ 3389 ç«¯å£ã€‚</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">## äºŒã€å·¥ä½œåŸç†æ¦‚è¿°</span></span><br><span class="line"></span><br><span class="line">* RDP åŸºäº TCP åè®®ï¼Œä¸å±äº HTTPï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ `mode tcp` æ¨¡å¼ï¼Œå¦åˆ™è¿æ¥å¤±è´¥ ã€‚</span><br><span class="line">* Microsoft å®¢æˆ·ç«¯ç™»å½•åä¼šé™„å¸¦ RDP cookieï¼ˆmstshashï¼‰ï¼ŒHAProxy å¯é€šè¿‡è¯¥ cookie å®ç°ä¼šè¯ç²˜æ»æ€§åˆ†å‘ã€‚</span><br><span class="line">* ä½¿ç”¨ `tcp-request inspect-delay` ç­‰å¾…åˆå§‹æ•°æ®åŒ…ï¼Œæå– RDP cookie è¿›è¡Œç²˜æ»åˆ¤æ–­ã€‚</span><br><span class="line">* åˆ©ç”¨ `stick-table` å­˜å‚¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ˜ å°„å…³ç³»ï¼Œç»“åˆ `persist rdp-cookie` ä¸ `balance leastconn` å®ç°è´Ÿè½½å‡è¡¡åŠç²˜æ»æ€§ã€‚</span><br><span class="line">* é€šè¿‡ `tcp-check connect port 3389` å¯¹åç«¯è¿›è¡Œå¥åº·æ£€æŸ¥ã€‚</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸‰ã€HAProxy é…ç½®ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line">```cfg</span><br><span class="line">global</span><br><span class="line"><span class="built_in">log</span> /dev/loglocal0</span><br><span class="line"><span class="built_in">log</span> /dev/loglocal1 notice</span><br><span class="line"><span class="built_in">chroot</span> /var/lib/haproxy</span><br><span class="line">stats socket /run/haproxy/admin.sock mode 660 level admin</span><br><span class="line">stats <span class="built_in">timeout</span> 30s</span><br><span class="line">user haproxy</span><br><span class="line">group haproxy</span><br><span class="line">daemon</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default SSL material locations</span></span><br><span class="line">ca-base /etc/ssl/certs</span><br><span class="line">crt-base /etc/ssl/private</span><br><span class="line"></span><br><span class="line"><span class="comment"># See: https://ssl-config.mozilla.org/#  server=haproxy&amp;  server-version=2.0.3&amp;config=intermediate</span></span><br><span class="line">        ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384</span><br><span class="line">        ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256</span><br><span class="line">        ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets</span><br><span class="line"></span><br><span class="line">tune.ssl.default-dh-param 2048</span><br><span class="line">tune.bufsize 16384</span><br><span class="line">tune.maxaccept 2000</span><br><span class="line">tune.maxpollevents 200</span><br><span class="line">tune.pipesize 524288</span><br><span class="line">tune.ssl.cachesize 1000000</span><br><span class="line">tune.ssl.maxrecord 32768</span><br><span class="line">tune.ssl.default-dh-param 2048</span><br><span class="line">tune.ssl.cachesize 1000000</span><br><span class="line">tune.ssl.maxrecord 32768</span><br><span class="line">tune.maxaccept 2000</span><br><span class="line">tune.maxpollevents 200</span><br><span class="line">tune.pipesize 524288</span><br><span class="line">tune.ssl.cachesize 1000000</span><br><span class="line"></span><br><span class="line">defaults</span><br><span class="line"><span class="built_in">log</span>global</span><br><span class="line">modehttp</span><br><span class="line">optionhttplog</span><br><span class="line">optiondontlognull</span><br><span class="line">        <span class="built_in">timeout</span> connect 5000</span><br><span class="line">        <span class="built_in">timeout</span> client  50000</span><br><span class="line">        <span class="built_in">timeout</span>   server  50000</span><br><span class="line">errorfile 400 /etc/haproxy/errors/400.http</span><br><span class="line">errorfile 403 /etc/haproxy/errors/403.http</span><br><span class="line">errorfile 408 /etc/haproxy/errors/408.http</span><br><span class="line">errorfile 500 /etc/haproxy/errors/500.http</span><br><span class="line">errorfile 502 /etc/haproxy/errors/502.http</span><br><span class="line">errorfile 503 /etc/haproxy/errors/503.http</span><br><span class="line">errorfile 504 /etc/haproxy/errors/504.http</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">frontend rdp_frontend</span><br><span class="line"></span><br><span class="line">  mode tcp</span><br><span class="line">  <span class="built_in">timeout</span> client 1h</span><br><span class="line">  <span class="built_in">log</span> global</span><br><span class="line">  option tcplog</span><br><span class="line">  tcp-request inspect-delay 5s</span><br><span class="line">  tcp-request content accept <span class="keyword">if</span> &#123; req_ssl_hello_type 0 &#125;</span><br><span class="line">  tcp-request content accept <span class="keyword">if</span> &#123; req_rdp_cookie_cnt gt 0 &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">bind</span> *:59001-59002</span><br><span class="line">  option tcplog</span><br><span class="line"></span><br><span class="line">  use_backend rdp_1 <span class="keyword">if</span> &#123; dst_port 59001 &#125;</span><br><span class="line">  use_backend rdp_2 <span class="keyword">if</span> &#123; dst_port 59002 &#125;</span><br><span class="line">  </span><br><span class="line">backend rdp_1</span><br><span class="line">  mode tcp</span><br><span class="line">  balance leastconn</span><br><span class="line">  persist rdp-cookie</span><br><span class="line">  <span class="built_in">timeout</span> connect 4s</span><br><span class="line">  <span class="built_in">timeout</span> server 1h</span><br><span class="line">  <span class="built_in">log</span> global</span><br><span class="line">  option tcplog</span><br><span class="line">  option tcp-check</span><br><span class="line">  option tcpka</span><br><span class="line">  tcp-check connect port 3389</span><br><span class="line">  stick-table <span class="built_in">type</span> string size 10k expire 12h</span><br><span class="line">  stick on rdp_cookie(mstshash) upper</span><br><span class="line">  server rdp1 10.0.0.1:3389 check verify none</span><br><span class="line">backend rdp_2</span><br><span class="line">  mode tcp</span><br><span class="line">  balance leastconn</span><br><span class="line">  persist rdp-cookie</span><br><span class="line">  <span class="built_in">timeout</span> connect 4s</span><br><span class="line">  <span class="built_in">timeout</span> server 1h</span><br><span class="line">  <span class="built_in">log</span> global</span><br><span class="line">  option tcplog</span><br><span class="line">  option tcp-check</span><br><span class="line">  option tcpka</span><br><span class="line">  tcp-check connect port 3389</span><br><span class="line">  stick-table <span class="built_in">type</span> string size 10k expire 12h</span><br><span class="line">  stick on rdp_cookie(mstshash) upper</span><br><span class="line">  server rdp2 10.0.0.2:3389 check verify none</span><br></pre></td></tr></table></figure></li></ul><h3 id="ğŸ”‘-å…³é”®è§£é‡Š"><a href="#ğŸ”‘-å…³é”®è§£é‡Š" class="headerlink" title="ğŸ”‘ å…³é”®è§£é‡Š"></a>ğŸ”‘ å…³é”®è§£é‡Š</h3><ul><li>ä½¿ç”¨ <code>mode tcp</code> è½¬å‘åŸå§‹ RDP æµé‡ï¼Œé¿å… HTTP å±‚å¹²æ‰°ã€‚</li><li><code>timeout client/server = 1h</code> é€‚åº”é•¿æ—¶é—´ç©ºé—² RDP ä¼šè¯ã€‚</li><li><code>tcp-request inspect-delay 5s</code> ç¡®ä¿å®¢æˆ·ç«¯å‘é€ RDP cookie åè¿›è¡Œç²˜æ»å†³ç­–ã€‚</li><li><code>stick-table</code> + <code>persist rdp-cookie</code> + <code>balance leastconn</code> å®ç°æ—¢è´Ÿè½½å‡è¡¡åˆç²˜æ€§ç²˜æ»æ•ˆæœã€‚å¦‚ç”¨æˆ·åé‡å¤ï¼ˆä»…æœ‰é™å­—ç¬¦è¯†åˆ«ï¼‰ï¼Œå¯èƒ½ç²˜é™„ä¸åŒç”¨æˆ·ï¼Œå»ºè®®ä½¿ç”¨ <code>user@domain</code> æ ¼å¼ç™»å½•ä¿è¯å”¯ä¸€æ€§ã€‚</li><li>å¯ç”¨ <code>tcp-check connect port 3389</code> è¿›è¡Œåç«¯å¥åº·æ¢æµ‹ï¼Œç»“åˆ <code>inter/rise/fall</code> å‚æ•°å¯å¿«é€Ÿå“åº”æœåŠ¡çŠ¶æ€å˜åŒ–ã€‚</li></ul><hr><h2 id="å››ã€éƒ¨ç½²ä¸æ ¡éªŒæ­¥éª¤"><a href="#å››ã€éƒ¨ç½²ä¸æ ¡éªŒæ­¥éª¤" class="headerlink" title="å››ã€éƒ¨ç½²ä¸æ ¡éªŒæ­¥éª¤"></a>å››ã€éƒ¨ç½²ä¸æ ¡éªŒæ­¥éª¤</h2><ol><li><p><strong>éªŒè¯é…ç½®è¯­æ³•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">haproxy -c -f /etc/haproxy/haproxy.cfg</span><br></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨æˆ–é‡è½½æœåŠ¡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> haproxy</span><br><span class="line">systemctl restart haproxy</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="äº”ã€å¸¸è§é—®é¢˜"><a href="#äº”ã€å¸¸è§é—®é¢˜" class="headerlink" title="äº”ã€å¸¸è§é—®é¢˜"></a>äº”ã€å¸¸è§é—®é¢˜</h2><table><thead><tr><th>é—®é¢˜ &#x2F; åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆä¸å»ºè®®</th></tr></thead><tbody><tr><td>å®¢æˆ·ç«¯æ—  cookie</td><td>è¿æ¥å°†éšæœºåˆ†é…ï¼Œå¯èƒ½å¤šæ¬¡è¿æ¥åŒä¸€åç«¯ï¼Œå»ºè®®ä¸ºæ— ç”¨æˆ·åœºæ™¯é…ç½®é»˜è®¤åç«¯ã€‚</td></tr><tr><td>ç”¨æˆ·åé‡å¤</td><td>cookie åŸºäºç”¨æˆ·åå‰ 9 å­—ç¬¦ç”Ÿæˆï¼Œé¿å…ä¸åŒç”¨æˆ·é‡å¤å½±å“ç²˜æ€§ï¼›æ¨èä½¿ç”¨å®Œæ•´é‚®ç®±æ ¼å¼ã€‚</td></tr><tr><td>å¤š HAProxy èŠ‚ç‚¹</td><td>å¯ä½¿ç”¨ <code>peers</code> åŒæ­¥ stick-tableï¼Œå®ç°å¤šèŠ‚ç‚¹é—´ç²˜æ»è¡¨å…±äº«ã€‚</td></tr><tr><td>é‡è½½ä¸ä¸­æ–­ä¼šè¯</td><td>ä½¿ç”¨ reload è€Œé restartï¼Œè€è¿›ç¨‹æ¥ç®¡ç°æœ‰é“¾æ¥ï¼ŒåŒ¹é… stick-table æ•°æ®è¿ç§»ã€‚</td></tr></tbody></table><hr><h2 id="å…­ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ"><a href="#å…­ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ" class="headerlink" title="å…­ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ"></a>å…­ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. ç³»ç»Ÿå®‰è£… HAProxy</span><br><span class="line">2. ç¼–è¾‘ haproxy.cfgï¼Œé…ç½® global / defaults / frontend / backend</span><br><span class="line">3. é…ç½®ç²˜æ»ã€å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡ç­–ç•¥</span><br><span class="line">4. æ ¡éªŒé…ç½®å¹¶é‡è½½æœåŠ¡</span><br><span class="line">5. æµ‹è¯•è¿æ¥ã€ç²˜æ€§ã€æ•…éšœåˆ‡æ¢è¡Œä¸º</span><br><span class="line">6. æŸ¥çœ‹æ˜ å°„è¡¨ï¼Œè°ƒè¯•ç”¨æˆ·å¯¹åº”å…³ç³»</span><br><span class="line">7. æ ¹æ®éƒ¨ç½²éœ€æ±‚è°ƒæ•´ï¼ˆç”¨æˆ·åç­–ç•¥ã€å¤šèŠ‚ç‚¹ peering ç­‰ï¼‰</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>InfiniBandï¼ˆIBï¼‰ç½‘å¡æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜</title>
      <link href="/2025/07/30/infiniband_card_test/"/>
      <url>/2025/07/30/infiniband_card_test/</url>
      
        <content type="html"><![CDATA[<h1 id="InfiniBandï¼ˆIBï¼‰ç½‘å¡æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"><a href="#InfiniBandï¼ˆIBï¼‰ç½‘å¡æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜" class="headerlink" title="InfiniBandï¼ˆIBï¼‰ç½‘å¡æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜"></a>InfiniBandï¼ˆIBï¼‰ç½‘å¡æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜</h1><h2 id="ğŸ”-ä¸€ã€è®¾å¤‡æ£€æµ‹ä¸åˆå§‹è¿é€š"><a href="#ğŸ”-ä¸€ã€è®¾å¤‡æ£€æµ‹ä¸åˆå§‹è¿é€š" class="headerlink" title="ğŸ” ä¸€ã€è®¾å¤‡æ£€æµ‹ä¸åˆå§‹è¿é€š"></a>ğŸ” ä¸€ã€è®¾å¤‡æ£€æµ‹ä¸åˆå§‹è¿é€š</h2><h3 id="1-æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"><a href="#1-æŸ¥çœ‹è®¾å¤‡çŠ¶æ€" class="headerlink" title="1. æŸ¥çœ‹è®¾å¤‡çŠ¶æ€"></a>1. æŸ¥çœ‹è®¾å¤‡çŠ¶æ€</h3><ul><li>ä½¿ç”¨ <code>ibstat</code> æ£€æŸ¥ç«¯å£æ˜¯å¦ä¸º LinkUpã€é“¾è·¯é€Ÿç‡ã€LIDã€çŠ¶æ€ç­‰</li><li>ä½¿ç”¨ <code>ibv_devinfo</code> æŸ¥çœ‹ HCA çš„ MTUã€GUIDã€è®¾å¤‡èƒ½åŠ›ç­‰è¯¦ç»†ä¿¡æ¯</li></ul><h3 id="2-å¯åŠ¨å­ç½‘ç®¡ç†å™¨ï¼ˆå¿…è¦æ—¶ï¼‰"><a href="#2-å¯åŠ¨å­ç½‘ç®¡ç†å™¨ï¼ˆå¿…è¦æ—¶ï¼‰" class="headerlink" title="2. å¯åŠ¨å­ç½‘ç®¡ç†å™¨ï¼ˆå¿…è¦æ—¶ï¼‰"></a>2. å¯åŠ¨å­ç½‘ç®¡ç†å™¨ï¼ˆå¿…è¦æ—¶ï¼‰</h3><ul><li>å¯åŠ¨å‘½ä»¤ï¼š<code>sudo systemctl start opensm</code> æˆ– <code>sudo /etc/init.d/opensmd start</code></li><li>è‹¥æœåŠ¡æœªè¿è¡Œï¼Œå¯èƒ½å¯¼è‡´èŠ‚ç‚¹äº’é€šå¤±è´¥æˆ–æ€§èƒ½å¼‚å¸¸</li></ul><h3 id="3-é…ç½®-IPoIB-æ¥å£ï¼ˆç”¨äº-IP-æµ‹è¯•æ¨¡å¼ï¼‰"><a href="#3-é…ç½®-IPoIB-æ¥å£ï¼ˆç”¨äº-IP-æµ‹è¯•æ¨¡å¼ï¼‰" class="headerlink" title="3. é…ç½® IPoIB æ¥å£ï¼ˆç”¨äº IP æµ‹è¯•æ¨¡å¼ï¼‰"></a>3. é…ç½® IPoIB æ¥å£ï¼ˆç”¨äº IP æµ‹è¯•æ¨¡å¼ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe ib_ipoib</span><br><span class="line"><span class="built_in">echo</span> connected | sudo <span class="built_in">tee</span> /sys/class/net/ib0/mode</span><br><span class="line">sudo ip <span class="built_in">link</span> <span class="built_in">set</span> ib0 mtu 65520 up</span><br><span class="line">sudo ip addr add 10.0.0.1/24 dev ib0</span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨ <code>ping</code> æµ‹è¯•è¿é€šæ€§ï¼Œæˆ–ç”¨ <code>ibdev2netdev</code> ç¡®è®¤ ib0 å·²æ˜ å°„åˆ°ç‰©ç†è®¾å¤‡</p><hr><h2 id="ğŸ§ª-äºŒã€è¿é€šæ€§æµ‹è¯•ï¼šRDMA-Ping"><a href="#ğŸ§ª-äºŒã€è¿é€šæ€§æµ‹è¯•ï¼šRDMA-Ping" class="headerlink" title="ğŸ§ª äºŒã€è¿é€šæ€§æµ‹è¯•ï¼šRDMA Ping"></a>ğŸ§ª äºŒã€è¿é€šæ€§æµ‹è¯•ï¼šRDMA Ping</h2><ul><li><p>å®‰è£… <code>infiniband-diags</code> åŒ…</p></li><li><p>å¯åŠ¨æœåŠ¡ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ibv_devinfo</span><br><span class="line">ibstat</span><br><span class="line">ibping -S</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ibping -C -P &lt;port&gt; &lt;server-LID&gt;</span><br></pre></td></tr></table></figure></li></ul><p>ç”¨äºéªŒè¯ RDMA é€šé“æ˜¯å¦å¯è¾¾ï¼Œä»¥åŠæ¯è·³æœ€åŸºç¡€çš„å¾€è¿”å»¶è¿Ÿ</p><hr><h2 id="ğŸ“ˆ-ä¸‰ã€å¸¦å®½ä¸å»¶è¿Ÿæ€§èƒ½æµ‹è¯•"><a href="#ğŸ“ˆ-ä¸‰ã€å¸¦å®½ä¸å»¶è¿Ÿæ€§èƒ½æµ‹è¯•" class="headerlink" title="ğŸ“ˆ ä¸‰ã€å¸¦å®½ä¸å»¶è¿Ÿæ€§èƒ½æµ‹è¯•"></a>ğŸ“ˆ ä¸‰ã€å¸¦å®½ä¸å»¶è¿Ÿæ€§èƒ½æµ‹è¯•</h2><h3 id="A-ä½¿ç”¨-Perftest-å¥—ä»¶ï¼ˆæ¨èæ­¤æ–¹æ³•å…¨é¢æµ‹è¯•-RDMA-æ€§èƒ½ï¼‰"><a href="#A-ä½¿ç”¨-Perftest-å¥—ä»¶ï¼ˆæ¨èæ­¤æ–¹æ³•å…¨é¢æµ‹è¯•-RDMA-æ€§èƒ½ï¼‰" class="headerlink" title="A. ä½¿ç”¨ Perftest å¥—ä»¶ï¼ˆæ¨èæ­¤æ–¹æ³•å…¨é¢æµ‹è¯• RDMA æ€§èƒ½ï¼‰"></a>A. ä½¿ç”¨ <strong>Perftest å¥—ä»¶</strong>ï¼ˆæ¨èæ­¤æ–¹æ³•å…¨é¢æµ‹è¯• RDMA æ€§èƒ½ï¼‰</h3><p>Perftest åŒ…æ‹¬å¤šä¸ªå·¥å…·ï¼š</p><ul><li><code>ib_send_bw</code>, <code>ib_send_lat</code>ï¼ˆSend&#x2F;Recvï¼‰</li><li><code>ib_read_bw</code>, <code>ib_read_lat</code>ï¼ˆRDMA Readï¼‰</li><li><code>ib_write_bw</code>, <code>ib_write_lat</code>ï¼ˆRDMA Writeï¼‰</li><li><code>ib_atomic_bw</code>, <code>ib_atomic_lat</code>ï¼ˆAtomic æ“ä½œï¼‰</li><li><code>raw_ethernet_bw/lat</code>ï¼ˆä»¥å¤ªç½‘æµ‹è¯•ï¼Œé€šè¿‡ OFED æ”¯æŒï¼‰</li></ul><h4 id="ç¤ºä¾‹å‘½ä»¤ï¼š"><a href="#ç¤ºä¾‹å‘½ä»¤ï¼š" class="headerlink" title="ç¤ºä¾‹å‘½ä»¤ï¼š"></a>ç¤ºä¾‹å‘½ä»¤ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯</span></span><br><span class="line">ib_write_bw -a -d mlx5_0</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯</span></span><br><span class="line">ib_write_bw -a -d mlx5_0 10.0.0.2</span><br></pre></td></tr></table></figure><p>ç»“æœåŒ…å«å¸¦å®½ (MB&#x2F;s æˆ– Gbps)ã€æ¶ˆæ¯ç‡ã€å»¶è¿Ÿç»Ÿè®¡ç­‰ï¼Œå¤šä¸ªæ¶ˆæ¯å¤§å°ä¸æµ‹è¯•æ—¶é—´å¯è°ƒæ•´å‚æ•°å¦‚ <code>-m</code>, <code>-t</code> </p><h3 id="B-IPoIB-æ¨¡å¼ä¸‹çš„å¸¦å®½-å»¶è¿Ÿæµ‹è¯•"><a href="#B-IPoIB-æ¨¡å¼ä¸‹çš„å¸¦å®½-å»¶è¿Ÿæµ‹è¯•" class="headerlink" title="B. IPoIB æ¨¡å¼ä¸‹çš„å¸¦å®½&#x2F;å»¶è¿Ÿæµ‹è¯•"></a>B. IPoIB æ¨¡å¼ä¸‹çš„å¸¦å®½&#x2F;å»¶è¿Ÿæµ‹è¯•</h3><p>å¯ä½¿ç”¨ <code>iperf3</code> æˆ– <code>qperf</code> æµ‹è¯• IP over InfiniBand æ¥å£æ€§èƒ½ã€‚</p><ul><li>qperf èƒ½æŠ¥å‘Šå¸¦å®½ã€å»¶è¿Ÿã€CPU ä½¿ç”¨ç‡ç­‰</li><li>ç¤ºä¾‹ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨æœåŠ¡å™¨ç«¯</span></span><br><span class="line">qperf</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å®¢æˆ·ç«¯</span></span><br><span class="line">qperf -v -i mlx4_0:1 192.0.2.1 conf</span><br><span class="line">qperf 192.0.2.1 tcp_bw udp_bw tcp_lat</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸš€-å››ã€GPUDirect-RDMA-ä¸-MPI-æµ‹è¯•"><a href="#ğŸš€-å››ã€GPUDirect-RDMA-ä¸-MPI-æµ‹è¯•" class="headerlink" title="ğŸš€ å››ã€GPUDirect RDMA ä¸ MPI æµ‹è¯•"></a>ğŸš€ å››ã€GPUDirect RDMA ä¸ MPI æµ‹è¯•</h2><p>è‹¥ä½ ä½¿ç”¨ NVIDIA GPU å¹¶å¯ç”¨ GPUDirect RDMAï¼Œå¯ç»„åˆ Perftest ä¸ MPI benchmarkï¼ˆå¦‚ OSU Microbenchmarksï¼‰è¿›è¡Œæµ‹è¯•ã€‚</p><ul><li>å®‰è£… MVAPICH2â€‘GDRï¼Œå¯è¿è¡Œ OSU çš„ MPIâ€‘CUDA å¸¦å®½æµ‹è¯•ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mpirun -np 2 host1 host2 \</span><br><span class="line">  -genv MV2_USE_GPUDIRECT=1 \</span><br><span class="line">  /opt/mvapich2/gdr/.../osu_bw -d cuda D D</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ç»‘å®š GPU æ‰€åœ¨ NUMA socket çš„ CPU æ ¸å¿ƒå’Œç½‘å¡è·¯å¾„ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½</li></ul><hr><h2 id="ğŸ› ï¸-äº”ã€ç³»ç»Ÿè°ƒä¼˜å»ºè®®"><a href="#ğŸ› ï¸-äº”ã€ç³»ç»Ÿè°ƒä¼˜å»ºè®®" class="headerlink" title="ğŸ› ï¸ äº”ã€ç³»ç»Ÿè°ƒä¼˜å»ºè®®"></a>ğŸ› ï¸ äº”ã€ç³»ç»Ÿè°ƒä¼˜å»ºè®®</h2><h3 id="1-IRQ-ä¸-CPU-äº²å’Œç»‘å®š"><a href="#1-IRQ-ä¸-CPU-äº²å’Œç»‘å®š" class="headerlink" title="1. IRQ ä¸ CPU äº²å’Œç»‘å®š"></a>1. IRQ ä¸ CPU äº²å’Œç»‘å®š</h3><ul><li>ç¦ç”¨ <code>irqbalance</code> æœåŠ¡ï¼Œé¿å…ä¸­æ–­åˆ†é…åˆ°å¤šä¸ª CPU æ ¸å¿ƒ</li><li>æŠŠ IB ç½‘å¡ä¸­æ–­ç»‘å®šåˆ°æŒ‡å®š CPU ä¸Šï¼Œç¡®ä¿å‹åŠ›ä¸ä¼šé›†ä¸­æŸä¸ªæ ¸ä»¥é¿å…æ€§èƒ½ç“¶é¢ˆ</li><li>Iperf æˆ– qperf ä¹Ÿå¯ç»‘å®šåˆ°ç‰¹å®š CPU&#x2F;core æ¥åŒæ­¥æ•´ä½“èµ„æºåˆ†é…</li></ul><h3 id="2-NUMA-äº²å’Œæ€§é…ç½®"><a href="#2-NUMA-äº²å’Œæ€§é…ç½®" class="headerlink" title="2. NUMA äº²å’Œæ€§é…ç½®"></a>2. NUMA äº²å’Œæ€§é…ç½®</h3><ul><li>å°†è¿›ç¨‹&#x2F;ä¸­æ–­ä¸ç½‘å¡æ‰€åœ¨ NUMA èŠ‚ç‚¹ç»‘å®šï¼Œæé«˜ LL&#x2F;DRAM è®¿é—®æ•ˆç‡åŠååæ€§èƒ½</li></ul><h3 id="3-IPoIB-æ¨¡å¼åˆ‡æ¢"><a href="#3-IPoIB-æ¨¡å¼åˆ‡æ¢" class="headerlink" title="3. IPoIB æ¨¡å¼åˆ‡æ¢"></a>3. IPoIB æ¨¡å¼åˆ‡æ¢</h3><p>ä½¿ç”¨ â€œconnectedâ€ æ¨¡å¼é€šå¸¸å¸¦æ¥æ›´é«˜ååå’Œæ›´ä½å»¶è¿Ÿï¼Œè€Œé»˜è®¤çš„ datagram æ¨¡å¼æ€§èƒ½è¾ƒå·® </p><h3 id="4-è½¯ä»¶æ ˆä¸é©±åŠ¨"><a href="#4-è½¯ä»¶æ ˆä¸é©±åŠ¨" class="headerlink" title="4. è½¯ä»¶æ ˆä¸é©±åŠ¨"></a>4. è½¯ä»¶æ ˆä¸é©±åŠ¨</h3><ul><li>å®‰è£…æœ€æ–° OFED&#x2F;Mellanox é©±åŠ¨ä»¥è·å¾—æ€§èƒ½ä¼˜åŒ–ä¸æ–°ç‰¹æ€§æ”¯æŒ</li><li>ä½¿ç”¨ <code>mlnx_tune</code> æˆ– Mellanox æä¾›çš„ç³»ç»Ÿè°ƒä¼˜è„šæœ¬é…ç½®æœ€ä½³è®¾ç½®ï¼ˆMTUã€ç¼“å†²åŒºã€å„ç§ç³»ç»Ÿå‚æ•°ç­‰ï¼‰</li></ul><hr><h2 id="âš ï¸-å…­ã€æ’æŸ¥å¸¸è§é—®é¢˜"><a href="#âš ï¸-å…­ã€æ’æŸ¥å¸¸è§é—®é¢˜" class="headerlink" title="âš ï¸ å…­ã€æ’æŸ¥å¸¸è§é—®é¢˜"></a>âš ï¸ å…­ã€æ’æŸ¥å¸¸è§é—®é¢˜</h2><ul><li><p>è‹¥æ€§èƒ½è¿œä½äºç¡¬ä»¶è§„æ ¼ï¼ˆä¾‹å¦‚ 40&#x2F;56&#x2F;100â€¯Gbpsï¼‰ï¼Œè¯·æ£€æŸ¥ï¼š</p><ul><li>é“¾è·¯çŠ¶æ€æ˜¯å¦ä¸ºå®Œæ•´å¸¦é€Ÿï¼ˆLinkUp + æ­£ç¡®é€Ÿç‡ï¼‰</li><li>MTU æ˜¯å¦è®¾ç½®ä¸ºæœ€é«˜ï¼ˆå¦‚ 65520ï¼‰</li><li>æ˜¯å¦ä½¿ç”¨ connected æ¨¡å¼ IPoIB</li><li>CPU ä½¿ç”¨ç‡æ˜¯å¦å¤ªé«˜ï¼ˆç»“åˆ <code>top</code>, <code>mpstat</code> æ£€æŸ¥ï¼‰</li><li>ä¸­æ–­å’Œè¿›ç¨‹æ˜¯å¦æ­£ç¡®ç»‘å®šè‡³ NUMA node</li><li>æ˜¯å¦ç¦ç”¨ irqbalance</li></ul></li><li><p>æ³¨æ„ RDMA scenario å¹¶å‘å†²çªé—®é¢˜ï¼šå½“å¤šä¸ªåº”ç”¨å…±ç”¨ RDMA é€šé“ï¼ˆå¦‚ MPI + æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå¯èƒ½é€ æˆæ€§èƒ½ä¸ç¨³å®šã€‚å¯å‚è€ƒ Justitia ç­‰éš”ç¦»æ–¹æ³•æ”¹å–„æ€§èƒ½éš”ç¦»ï¼Œä½†ä¸€èˆ¬ç”¨äºå¤§è§„æ¨¡å¤šä»»åŠ¡æƒ…å†µ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> InfiniBand </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PsExec è®¿é—®è¢«æ‹’ç»é—®é¢˜æ’æŸ¥å’Œè§£å†³</title>
      <link href="/2025/07/30/psexec_access_is_denied/"/>
      <url>/2025/07/30/psexec_access_is_denied/</url>
      
        <content type="html"><![CDATA[<h1 id="PsExec-è®¿é—®è¢«æ‹’ç»é—®é¢˜æ’æŸ¥å’Œè§£å†³"><a href="#PsExec-è®¿é—®è¢«æ‹’ç»é—®é¢˜æ’æŸ¥å’Œè§£å†³" class="headerlink" title="PsExec è®¿é—®è¢«æ‹’ç»é—®é¢˜æ’æŸ¥å’Œè§£å†³"></a>PsExec è®¿é—®è¢«æ‹’ç»é—®é¢˜æ’æŸ¥å’Œè§£å†³</h1><h2 id="ä½¿ç”¨-PsExecï¼ˆæ¥è‡ª-Sysinternals-å¥—ä»¶ï¼‰æ‰§è¡Œè¿œç¨‹å‘½ä»¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¤±è´¥ï¼Œå°¤å…¶æ˜¯å½“ç›®æ ‡å‘½ä»¤éœ€è¦æå‡æƒé™ï¼ˆå¦‚å†™æ³¨å†Œè¡¨ã€æ“ä½œç³»ç»ŸæœåŠ¡ã€è®¿é—®ç³»ç»Ÿç›®å½•ç­‰ï¼‰æ—¶ã€‚"><a href="#ä½¿ç”¨-PsExecï¼ˆæ¥è‡ª-Sysinternals-å¥—ä»¶ï¼‰æ‰§è¡Œè¿œç¨‹å‘½ä»¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¤±è´¥ï¼Œå°¤å…¶æ˜¯å½“ç›®æ ‡å‘½ä»¤éœ€è¦æå‡æƒé™ï¼ˆå¦‚å†™æ³¨å†Œè¡¨ã€æ“ä½œç³»ç»ŸæœåŠ¡ã€è®¿é—®ç³»ç»Ÿç›®å½•ç­‰ï¼‰æ—¶ã€‚" class="headerlink" title="ä½¿ç”¨ PsExecï¼ˆæ¥è‡ª Sysinternals å¥—ä»¶ï¼‰æ‰§è¡Œè¿œç¨‹å‘½ä»¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¤±è´¥ï¼Œå°¤å…¶æ˜¯å½“ç›®æ ‡å‘½ä»¤éœ€è¦æå‡æƒé™ï¼ˆå¦‚å†™æ³¨å†Œè¡¨ã€æ“ä½œç³»ç»ŸæœåŠ¡ã€è®¿é—®ç³»ç»Ÿç›®å½•ç­‰ï¼‰æ—¶ã€‚"></a>ä½¿ç”¨ <code>PsExec</code>ï¼ˆæ¥è‡ª Sysinternals å¥—ä»¶ï¼‰æ‰§è¡Œè¿œç¨‹å‘½ä»¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¤±è´¥ï¼Œå°¤å…¶æ˜¯å½“ç›®æ ‡å‘½ä»¤éœ€è¦æå‡æƒé™ï¼ˆå¦‚å†™æ³¨å†Œè¡¨ã€æ“ä½œç³»ç»ŸæœåŠ¡ã€è®¿é—®ç³»ç»Ÿç›®å½•ç­‰ï¼‰æ—¶ã€‚</h2><h2 id="âœ…-1-PsExec-çš„æƒé™éœ€æ±‚"><a href="#âœ…-1-PsExec-çš„æƒé™éœ€æ±‚" class="headerlink" title="âœ… 1. PsExec çš„æƒé™éœ€æ±‚"></a>âœ… 1. PsExec çš„æƒé™éœ€æ±‚</h2><p><code>PsExec</code> é»˜è®¤éœ€è¦ï¼š</p><ul><li><strong>ç›®æ ‡æœºå™¨çš„ç®¡ç†å‘˜è´¦å·æˆ–ç®¡ç†å‘˜ç»„æˆå‘˜</strong></li><li><strong>è¿œç¨‹ç³»ç»Ÿçš„â€œæ–‡ä»¶å’Œæ‰“å°æœºå…±äº«â€å¼€å¯</strong></li><li><strong>è¿œç¨‹æ³¨å†Œè¡¨æœåŠ¡å¼€å¯</strong></li><li><strong>å…è®¸è¿œç¨‹æ‰§è¡ŒæœåŠ¡ï¼ˆPsExec ä¼šåœ¨ç›®æ ‡æœºå™¨ä¸Šä¸´æ—¶å®‰è£…å¹¶è¿è¡Œ <code>PSEXESVC.exe</code>ï¼‰</strong></li></ul><p>å¦‚æœä½ ä½¿ç”¨éç®¡ç†å‘˜è´¦å·ï¼Œæ¯”å¦‚æ™®é€šç”¨æˆ·ï¼Œåˆ™ä¼šé‡åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access is denied.</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error establishing communication with PsExec service on [ç›®æ ‡ä¸»æœº]</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸš«-éç®¡ç†å‘˜è´¦å·æ— æ³•åšçš„äº‹æƒ…"><a href="#ğŸš«-éç®¡ç†å‘˜è´¦å·æ— æ³•åšçš„äº‹æƒ…" class="headerlink" title="ğŸš« éç®¡ç†å‘˜è´¦å·æ— æ³•åšçš„äº‹æƒ…"></a>ğŸš« éç®¡ç†å‘˜è´¦å·æ— æ³•åšçš„äº‹æƒ…</h2><p>å¦‚æœä½ ä¸æ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼š</p><ul><li>æ— æ³•å®‰è£… PsExec çš„æœåŠ¡åˆ°è¿œç¨‹ä¸»æœº</li><li>æ— æ³•é€šè¿‡ SMB å»ºç«‹ IPC é€šé“</li><li>æ— æ³•å¯åŠ¨ç›®æ ‡æœåŠ¡è¿›ç¨‹</li></ul><p>æ‰€ä»¥ PsExec <strong>ä¸æ”¯æŒç”¨éç®¡ç†å‘˜æƒé™åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤</strong>ã€‚</p><hr><h2 id="âœ…-2-æ’æŸ¥é—®é¢˜"><a href="#âœ…-2-æ’æŸ¥é—®é¢˜" class="headerlink" title="âœ… 2. æ’æŸ¥é—®é¢˜"></a>âœ… 2. æ’æŸ¥é—®é¢˜</h2><p>ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ï¼Œä½†ä»ç„¶æ— æ³•é€šè¿‡ <code>PsExec</code> æˆåŠŸæ‰§è¡Œè¿œç¨‹å‘½ä»¤</p><h3 id="1-è®¿é—®-ADMIN-å…±äº«-è¢«æ‹’ç»"><a href="#1-è®¿é—®-ADMIN-å…±äº«-è¢«æ‹’ç»" class="headerlink" title="1. è®¿é—® ADMIN$ å…±äº« è¢«æ‹’ç»"></a>1. è®¿é—® <strong>ADMIN$ å…±äº«</strong> è¢«æ‹’ç»</h3><ul><li><p><code>PsExec</code> ä¼šå…ˆé€šè¿‡ SMB è¿æ¥ <code>\\ç›®æ ‡ä¸»æœº\ADMIN$</code>ï¼ˆå¯¹åº”è¿œç¨‹ Windows çš„ <code>C:\Windows</code>ï¼‰ã€‚</p></li><li><p>è‹¥è¯¥å…±äº«è¢«ç¦ç”¨ã€ç½‘ç»œé˜²ç«å¢™æ‹¦æˆªï¼Œæˆ– UAC è¿œç¨‹å®‰å…¨ç­–ç•¥å¹²æ‰°ï¼Œå°±ä¼šæ‹’ç»è®¿é—®ã€‚</p></li><li><p><strong>æ’æŸ¥æ­¥éª¤</strong>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net use \\ç›®æ ‡ä¸»æœº\ipc<span class="variable">$</span> /user:ç›®æ ‡ä¸»æœº\AdminUser å¯†ç </span><br><span class="line"><span class="built_in">dir</span> \\ç›®æ ‡ä¸»æœº\ADMIN<span class="variable">$</span></span><br></pre></td></tr></table></figure><p>è‹¥ä»ç„¶ <code>Access is denied</code>ï¼Œè¯´æ˜è¿æ¥æˆ–å‡­æ®æœ‰é—®é¢˜ã€‚</p></li></ul><hr><h3 id="2-UAC-è¿œç¨‹å‡­æ®è¿‡æ»¤ï¼ˆå¯¼è‡´ç®¡ç†å‘˜æƒé™é™çº§ï¼‰"><a href="#2-UAC-è¿œç¨‹å‡­æ®è¿‡æ»¤ï¼ˆå¯¼è‡´ç®¡ç†å‘˜æƒé™é™çº§ï¼‰" class="headerlink" title="2. UAC è¿œç¨‹å‡­æ®è¿‡æ»¤ï¼ˆå¯¼è‡´ç®¡ç†å‘˜æƒé™é™çº§ï¼‰"></a>2. UAC è¿œç¨‹å‡­æ®è¿‡æ»¤ï¼ˆå¯¼è‡´ç®¡ç†å‘˜æƒé™é™çº§ï¼‰</h3><ul><li><p>Windows é»˜è®¤ä¼šå¯¹è¿œç¨‹ç™»å½•çš„æœ¬åœ° Admin è´¦å·è¿›è¡Œæƒé™å‰¥ç¦»ã€‚</p></li><li><p>å¯åœ¨ <strong>ç›®æ ‡æœºæ³¨å†Œè¡¨</strong>ä¸­è®¾ç½®ï¼š</p></li><li><p>cmdå‘½ä»¤:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v LocalAccountTokenFilterPolicy /t REG_DWORD /d <span class="number">1</span> /f</span><br><span class="line"></span><br><span class="line">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d <span class="number">0</span> /f</span><br><span class="line"></span><br><span class="line">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v ConsentPromptBehaviorAdmin /t REG_DWORD /d <span class="number">0</span> /f</span><br><span class="line"></span><br><span class="line">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v PromptOnSecureDesktop /t REG_DWORD /d <span class="number">0</span> /f</span><br></pre></td></tr></table></figure><p>è®¾ç½®åé‡å¯ç›®æ ‡ Windowsï¼Œæ¢å¤å®Œæ•´ç®¡ç†å‘˜è®¿é—®ã€‚</p></li></ul><hr><h3 id="3-é˜²ç«å¢™æˆ–å…±äº«æœåŠ¡æœªå¯ç”¨"><a href="#3-é˜²ç«å¢™æˆ–å…±äº«æœåŠ¡æœªå¯ç”¨" class="headerlink" title="3. é˜²ç«å¢™æˆ–å…±äº«æœåŠ¡æœªå¯ç”¨"></a>3. é˜²ç«å¢™æˆ–å…±äº«æœåŠ¡æœªå¯ç”¨</h3><ul><li>ç¡®ä¿ <strong>ç›®æ ‡ä¸»æœºå¯ç”¨äº†â€œæ–‡ä»¶å’Œæ‰“å°æœºå…±äº«â€</strong>ï¼Œç«¯å£ 445 å¯ç”¨ã€‚</li><li>Windows é˜²ç«å¢™å¯èƒ½é˜»æ­¢ <code>psexecsvc.exe</code> çš„æ‰§è¡Œï¼Œæ£€æŸ¥æ—¥å¿—æˆ–ä¸´æ—¶å…³é—­é˜²ç«å¢™è¯•è¯•ã€‚</li></ul><hr><h3 id="4-æå‡æƒé™-æ˜¾ç¤ºäº¤äº’ç•Œé¢"><a href="#4-æå‡æƒé™-æ˜¾ç¤ºäº¤äº’ç•Œé¢" class="headerlink" title="4. æå‡æƒé™ &amp; æ˜¾ç¤ºäº¤äº’ç•Œé¢"></a>4. æå‡æƒé™ &amp; æ˜¾ç¤ºäº¤äº’ç•Œé¢</h3><ul><li><p>åœ¨ UAC ç¯å¢ƒä¸­ï¼ˆVista åŠä»¥ä¸Šç³»ç»Ÿï¼‰ï¼Œå³ä¾¿ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ä¹Ÿéœ€æ‰‹åŠ¨æå‡ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psexec <span class="literal">-h</span> \\ç›®æ ‡ä¸»æœº cmd.exe</span><br></pre></td></tr></table></figure><p>å‚æ•° <code>-h</code> ä¼šè¿è¡Œæå‡åçš„ä»¤ç‰Œã€‚</p></li><li><p>è‹¥éœ€åœ¨ä¼šè¯æ¡Œé¢äº¤äº’ï¼Œå¯åŠ  <code>-i</code>ï¼ˆå¸¦ä¸Š <code>-h</code>):</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psexec <span class="literal">-h</span> <span class="literal">-i</span> \\ç›®æ ‡ ä¸»æœº cmd.exe</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="âœ…-ç»¼åˆå®æ–½æ­¥éª¤"><a href="#âœ…-ç»¼åˆå®æ–½æ­¥éª¤" class="headerlink" title="âœ… ç»¼åˆå®æ–½æ­¥éª¤"></a>âœ… ç»¼åˆå®æ–½æ­¥éª¤</h3><p>æ¨èæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š</p><ol><li><p><strong>ç¡®è®¤ Admin$ å…±äº«æ­£å¸¸è®¿é—®</strong>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net use \\è¿œç¨‹æœº\ipc<span class="variable">$</span> /user:è¿œç¨‹æœº\Admin å¯†ç </span><br><span class="line"><span class="built_in">dir</span> \\è¿œç¨‹æœº\ADMIN<span class="variable">$</span></span><br></pre></td></tr></table></figure></li><li><p>è‹¥å¤±è´¥ï¼Œæ£€æŸ¥ UAC è¿‡æ»¤æ˜¯å¦ç”Ÿæ•ˆï¼Œè®¾ç½®ä¸Šè¿°æ³¨å†Œè¡¨ã€‚</p></li><li><p>ç¡®ä¿é˜²ç«å¢™ã€æ–‡ä»¶å…±äº«è®¾ç½®æ­£ç¡®ã€‚</p></li><li><p>ä½¿ç”¨æå‡å‚æ•° <code>-h</code> å’Œ&#x2F;æˆ– <code>-i</code>ã€‚</p></li><li><p>å®Œæ•´æ‰§è¡Œç¤ºä¾‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psexec <span class="literal">-h</span> <span class="literal">-i</span> \\è¿œç¨‹æœº <span class="literal">-u</span> åŸŸ\ç”¨æˆ·å <span class="literal">-p</span> å¯†ç  cmd.exe</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows WQL æŸ¥è¯¢</title>
      <link href="/2025/07/30/windows_wql_query/"/>
      <url>/2025/07/30/windows_wql_query/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows-WQL-æŸ¥è¯¢"><a href="#Windows-WQL-æŸ¥è¯¢" class="headerlink" title="Windows WQL æŸ¥è¯¢"></a>Windows WQL æŸ¥è¯¢</h1><p>WQLï¼ˆ<strong>WMI Query Language</strong>ï¼‰æ˜¯ Windows Management Instrumentationï¼ˆWMIï¼‰ä½¿ç”¨çš„ä¸€ç§ SQL ç±»è¯­è¨€ï¼Œç”¨äºæŸ¥è¯¢ç³»ç»Ÿä¿¡æ¯ã€‚</p><hr><h3 id="ğŸ§¾-åŸºæœ¬è¯­æ³•"><a href="#ğŸ§¾-åŸºæœ¬è¯­æ³•" class="headerlink" title="ğŸ§¾ åŸºæœ¬è¯­æ³•"></a>ğŸ§¾ åŸºæœ¬è¯­æ³•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>å±æ€§<span class="operator">&gt;</span> <span class="keyword">FROM</span> <span class="operator">&lt;</span>WMIç±»<span class="operator">&gt;</span> [<span class="keyword">WHERE</span> <span class="operator">&lt;</span>æ¡ä»¶<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure><hr><h3 id="ğŸ”-ç¤ºä¾‹æŸ¥è¯¢"><a href="#ğŸ”-ç¤ºä¾‹æŸ¥è¯¢" class="headerlink" title="ğŸ” ç¤ºä¾‹æŸ¥è¯¢"></a>ğŸ” ç¤ºä¾‹æŸ¥è¯¢</h3><h4 id="1-è·å–ç³»ç»Ÿä¿¡æ¯"><a href="#1-è·å–ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="1. è·å–ç³»ç»Ÿä¿¡æ¯"></a>1. è·å–ç³»ç»Ÿä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_OperatingSystem</span><br></pre></td></tr></table></figure><h4 id="2-è·å–-CPU-ä¿¡æ¯"><a href="#2-è·å–-CPU-ä¿¡æ¯" class="headerlink" title="2. è·å– CPU ä¿¡æ¯"></a>2. è·å– CPU ä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_Processor</span><br></pre></td></tr></table></figure><h4 id="3-è·å–å†…å­˜æ¡ä¿¡æ¯"><a href="#3-è·å–å†…å­˜æ¡ä¿¡æ¯" class="headerlink" title="3. è·å–å†…å­˜æ¡ä¿¡æ¯"></a>3. è·å–å†…å­˜æ¡ä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_PhysicalMemory</span><br></pre></td></tr></table></figure><h4 id="4-è·å–ç¡¬ç›˜ä¿¡æ¯"><a href="#4-è·å–ç¡¬ç›˜ä¿¡æ¯" class="headerlink" title="4. è·å–ç¡¬ç›˜ä¿¡æ¯"></a>4. è·å–ç¡¬ç›˜ä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_DiskDrive</span><br></pre></td></tr></table></figure><h4 id="5-æ ¹æ®æ¡ä»¶è¿‡æ»¤ï¼ˆå¦‚æŸ¥æ‰¾-C-ç›˜ä¿¡æ¯ï¼‰"><a href="#5-æ ¹æ®æ¡ä»¶è¿‡æ»¤ï¼ˆå¦‚æŸ¥æ‰¾-C-ç›˜ä¿¡æ¯ï¼‰" class="headerlink" title="5. æ ¹æ®æ¡ä»¶è¿‡æ»¤ï¼ˆå¦‚æŸ¥æ‰¾ C ç›˜ä¿¡æ¯ï¼‰"></a>5. æ ¹æ®æ¡ä»¶è¿‡æ»¤ï¼ˆå¦‚æŸ¥æ‰¾ C ç›˜ä¿¡æ¯ï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_LogicalDisk <span class="keyword">WHERE</span> DeviceID <span class="operator">=</span> <span class="string">&#x27;C:&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="6-æŸ¥è¯¢ç‰¹å®šç½‘ç»œé€‚é…å™¨ï¼ˆå¯ç”¨çŠ¶æ€ï¼‰"><a href="#6-æŸ¥è¯¢ç‰¹å®šç½‘ç»œé€‚é…å™¨ï¼ˆå¯ç”¨çŠ¶æ€ï¼‰" class="headerlink" title="6. æŸ¥è¯¢ç‰¹å®šç½‘ç»œé€‚é…å™¨ï¼ˆå¯ç”¨çŠ¶æ€ï¼‰"></a>6. æŸ¥è¯¢ç‰¹å®šç½‘ç»œé€‚é…å™¨ï¼ˆå¯ç”¨çŠ¶æ€ï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_NetworkAdapter <span class="keyword">WHERE</span> NetEnabled <span class="operator">=</span> <span class="literal">TRUE</span></span><br></pre></td></tr></table></figure><h4 id="7-è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯"><a href="#7-è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="7. è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯"></a>7. è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_ComputerSystem</span><br></pre></td></tr></table></figure><hr><h3 id="ğŸ’»-åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼ˆwmicï¼‰"><a href="#ğŸ’»-åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼ˆwmicï¼‰" class="headerlink" title="ğŸ’» åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼ˆwmicï¼‰"></a>ğŸ’» åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼ˆ<code>wmic</code>ï¼‰</h3><p>è™½ç„¶ <code>wmic</code> æ­£é€æ¸è¢«åºŸå¼ƒï¼Œä½†åœ¨æ—§ç³»ç»Ÿä¸­å¯ä»¥è¿™æ ·ç”¨ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wmic <span class="built_in">path</span> Win32_Processor get Name</span><br><span class="line">wmic <span class="built_in">path</span> Win32_LogicalDisk where &quot;DeviceID=&#x27;C:&#x27;&quot; get Size,FreeSpace</span><br></pre></td></tr></table></figure><hr><h3 id="âœ…-PowerShell-ä¸­ä½¿ç”¨-WQL-æŸ¥è¯¢"><a href="#âœ…-PowerShell-ä¸­ä½¿ç”¨-WQL-æŸ¥è¯¢" class="headerlink" title="âœ… PowerShell ä¸­ä½¿ç”¨ WQL æŸ¥è¯¢"></a>âœ… PowerShell ä¸­ä½¿ç”¨ WQL æŸ¥è¯¢</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-WmiObject</span> <span class="literal">-Query</span> <span class="string">&quot;SELECT * FROM Win32_BIOS&quot;</span></span><br></pre></td></tr></table></figure><p>æˆ–ï¼ˆæ–°ç‰ˆ PowerShell æ¨èï¼‰ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-CimInstance</span> <span class="literal">-Query</span> <span class="string">&quot;SELECT * FROM Win32_Processor&quot;</span></span><br></pre></td></tr></table></figure><hr><h3 id="ğŸ”§-é«˜çº§ç”¨æ³•ï¼šå¤šæ¡ä»¶æŸ¥è¯¢"><a href="#ğŸ”§-é«˜çº§ç”¨æ³•ï¼šå¤šæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="ğŸ”§ é«˜çº§ç”¨æ³•ï¼šå¤šæ¡ä»¶æŸ¥è¯¢"></a>ğŸ”§ é«˜çº§ç”¨æ³•ï¼šå¤šæ¡ä»¶æŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Win32_LogicalDisk <span class="keyword">WHERE</span> DriveType <span class="operator">=</span> <span class="number">3</span> <span class="keyword">AND</span> FreeSpace <span class="operator">&lt;</span> <span class="number">1000000000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows PXE è‡ªåŠ¨åŒ–éƒ¨ç½²ç¯å¢ƒæ­å»ºæŒ‡å—</title>
      <link href="/2025/06/03/Windows_PXE_environment/"/>
      <url>/2025/06/03/Windows_PXE_environment/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸŒ-Windows-PXE-è‡ªåŠ¨åŒ–éƒ¨ç½²ç¯å¢ƒæ­å»ºæŒ‡å—"><a href="#ğŸŒ-Windows-PXE-è‡ªåŠ¨åŒ–éƒ¨ç½²ç¯å¢ƒæ­å»ºæŒ‡å—" class="headerlink" title="ğŸŒ Windows PXE è‡ªåŠ¨åŒ–éƒ¨ç½²ç¯å¢ƒæ­å»ºæŒ‡å—"></a>ğŸŒ Windows PXE è‡ªåŠ¨åŒ–éƒ¨ç½²ç¯å¢ƒæ­å»ºæŒ‡å—</h1><hr><h2 id="âœ…-ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸ç½‘ç»œé…ç½®"><a href="#âœ…-ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸ç½‘ç»œé…ç½®" class="headerlink" title="âœ… ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸ç½‘ç»œé…ç½®"></a>âœ… ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸ç½‘ç»œé…ç½®</h2><hr><h3 id="ğŸ§¾-æ­¥éª¤-1ï¼šé…ç½®æœåŠ¡å™¨é™æ€-IPï¼ˆIPv4-å’Œ-IPv6ï¼‰"><a href="#ğŸ§¾-æ­¥éª¤-1ï¼šé…ç½®æœåŠ¡å™¨é™æ€-IPï¼ˆIPv4-å’Œ-IPv6ï¼‰" class="headerlink" title="ğŸ§¾ æ­¥éª¤ 1ï¼šé…ç½®æœåŠ¡å™¨é™æ€ IPï¼ˆIPv4 å’Œ IPv6ï¼‰"></a>ğŸ§¾ æ­¥éª¤ 1ï¼šé…ç½®æœåŠ¡å™¨é™æ€ IPï¼ˆIPv4 å’Œ IPv6ï¼‰</h3><ol><li><p>æ§åˆ¶é¢æ¿ â†’ ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒ â†’ æ›´æ”¹é€‚é…å™¨è®¾ç½®</p></li><li><p>å³é”®ç½‘ç»œ â†’ å±æ€§ â†’ é€‰æ‹© <code>IPv4</code> å’Œ <code>IPv6</code> â†’ å±æ€§</p></li><li><p>ç¤ºä¾‹é…ç½®ï¼š</p><ul><li><p>IPv4ï¼š</p><ul><li>IP åœ°å€ï¼š<code>192.168.10.1</code></li><li>å­ç½‘æ©ç ï¼š<code>255.255.255.0</code></li><li>é»˜è®¤ç½‘å…³ï¼š<code>192.168.10.1</code></li></ul></li><li><p>IPv6ï¼š</p><ul><li>åœ°å€ï¼š<code>fd00:10::1</code></li><li>å‰ç¼€é•¿åº¦ï¼š<code>64</code></li><li>ç½‘å…³ï¼š<code>fd00:10::1</code></li></ul></li></ul></li><li><p>ç‚¹å‡»â€ç¡®å®šâ€ä¿å­˜</p></li></ol><hr><h3 id="ğŸ§¾-æ­¥éª¤-2ï¼šå®‰è£…-DHCP-å’Œ-DNS-æœåŠ¡"><a href="#ğŸ§¾-æ­¥éª¤-2ï¼šå®‰è£…-DHCP-å’Œ-DNS-æœåŠ¡" class="headerlink" title="ğŸ§¾ æ­¥éª¤ 2ï¼šå®‰è£… DHCP å’Œ DNS æœåŠ¡"></a>ğŸ§¾ æ­¥éª¤ 2ï¼šå®‰è£… DHCP å’Œ DNS æœåŠ¡</h3><ol><li><p>æ‰“å¼€ <strong>æœåŠ¡å™¨ç®¡ç†å™¨</strong></p></li><li><p>ç‚¹å‡»â€æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€</p></li><li><p>é€‰æ‹©ï¼š</p><ul><li>âœ… DHCP Serverï¼ˆDHCP æœåŠ¡å™¨ï¼‰</li><li>âœ… DNS Serverï¼ˆDNS æœåŠ¡å™¨ï¼‰</li></ul></li><li><p>ä¸€è·¯â€ä¸‹ä¸€æ­¥â€ç›´åˆ°å®‰è£…å®Œæˆ</p></li><li><p>å®‰è£…å®Œæˆåæ ¹æ®æç¤ºå¯åŠ¨ DHCP é…ç½®å‘å¯¼å¹¶å®Œæˆè®¾ç½®</p></li></ol><hr><h2 id="âœ…-äºŒã€é…ç½®-DHCPv4-å’Œ-DHCPv6-æœåŠ¡"><a href="#âœ…-äºŒã€é…ç½®-DHCPv4-å’Œ-DHCPv6-æœåŠ¡" class="headerlink" title="âœ… äºŒã€é…ç½® DHCPv4 å’Œ DHCPv6 æœåŠ¡"></a>âœ… äºŒã€é…ç½® DHCPv4 å’Œ DHCPv6 æœåŠ¡</h2><hr><h3 id="ğŸ“Œ-æ­¥éª¤-3ï¼šé…ç½®-DHCPv4-æœåŠ¡"><a href="#ğŸ“Œ-æ­¥éª¤-3ï¼šé…ç½®-DHCPv4-æœåŠ¡" class="headerlink" title="ğŸ“Œ æ­¥éª¤ 3ï¼šé…ç½® DHCPv4 æœåŠ¡"></a>ğŸ“Œ æ­¥éª¤ 3ï¼šé…ç½® DHCPv4 æœåŠ¡</h3><ol><li><p>æ‰“å¼€ <strong>DHCP ç®¡ç†å™¨</strong></p></li><li><p>å³é”® <code>IPv4</code> â†’ æ–°å»ºä½œç”¨åŸŸ</p></li><li><p>è®¾ç½®ä½œç”¨åŸŸä¿¡æ¯ï¼š</p><ul><li>åç§°ï¼š<code>Internal-Network</code></li><li>èŒƒå›´ï¼š192.168.10.100 - 192.168.10.199</li><li>æ’é™¤ï¼š192.168.10.120 - 192.168.10.129</li><li>å­ç½‘æ©ç ï¼š255.255.255.0</li><li>ç½‘å…³ï¼š192.168.10.1</li><li>DNSï¼š192.168.10.1</li></ul></li><li><p>æ¿€æ´»ä½œç”¨åŸŸ</p></li></ol><hr><h3 id="ğŸ“Œ-æ­¥éª¤-4ï¼šé…ç½®-DHCPv6-æœåŠ¡"><a href="#ğŸ“Œ-æ­¥éª¤-4ï¼šé…ç½®-DHCPv6-æœåŠ¡" class="headerlink" title="ğŸ“Œ æ­¥éª¤ 4ï¼šé…ç½® DHCPv6 æœåŠ¡"></a>ğŸ“Œ æ­¥éª¤ 4ï¼šé…ç½® DHCPv6 æœåŠ¡</h3><ol><li><p>DHCP ç®¡ç†å™¨ä¸­ â†’ <code>IPv6</code> â†’ æ–°å»ºä½œç”¨åŸŸ</p></li><li><p>é…ç½®å¦‚ä¸‹ï¼š</p><ul><li>åç§°ï¼š<code>Internal-IPv6</code></li><li>å‰ç¼€ï¼š<code>fd00:10::</code></li><li>å‰ç¼€é•¿åº¦ï¼š64</li><li>èŒƒå›´ç¼–å·ï¼š1 - 9999</li></ul></li><li><p>å®Œæˆå¹¶æ¿€æ´»ä½œç”¨åŸŸ</p></li></ol><hr><h3 id="ğŸ“Œ-æ­¥éª¤-5ï¼šå¯ç”¨-IPv6-Router-Advertisementï¼ˆRAï¼‰"><a href="#ğŸ“Œ-æ­¥éª¤-5ï¼šå¯ç”¨-IPv6-Router-Advertisementï¼ˆRAï¼‰" class="headerlink" title="ğŸ“Œ æ­¥éª¤ 5ï¼šå¯ç”¨ IPv6 Router Advertisementï¼ˆRAï¼‰"></a>ğŸ“Œ æ­¥éª¤ 5ï¼šå¯ç”¨ IPv6 Router Advertisementï¼ˆRAï¼‰</h3><h4 id="å‘½ä»¤è¡Œæ–¹å¼ï¼š"><a href="#å‘½ä»¤è¡Œæ–¹å¼ï¼š" class="headerlink" title="å‘½ä»¤è¡Œæ–¹å¼ï¼š"></a>å‘½ä»¤è¡Œæ–¹å¼ï¼š</h4><ol><li><p>æŸ¥è¯¢interface id</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ipv6 show interface</span><br><span class="line"></span><br><span class="line">Idx     Met         MTU          State                Name</span><br><span class="line">---  ----------  ----------  ------------  ---------------------------</span><br><span class="line">&lt;interface id&gt;          <span class="number">15</span>        <span class="number">1500</span>  connected     Ethernet</span><br></pre></td></tr></table></figure></li><li><p>å¯ç”¨ IPv6 è½¬å‘å’Œ RA å¹¿æ’­</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ipv6 <span class="built_in">set</span> interface &lt;interface id&gt; forwarding=enabled</span><br><span class="line">netsh interface ipv6 <span class="built_in">set</span> interface &lt;interface id&gt; advertised=enabled</span><br><span class="line">netsh interface ipv6 <span class="built_in">set</span> interface &lt;interface id&gt; managedaddress=enabled</span><br><span class="line">netsh interface ipv6 <span class="built_in">set</span> interface &lt;interface id&gt; otherstateful=enabled</span><br><span class="line">netsh interface ipv6 add route fd00:<span class="number">10</span>::/<span class="number">64</span> &lt;interface id&gt; publish=enabled</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥çŠ¶æ€</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ipv6 show interface &lt;interface id&gt;</span><br><span class="line">Forwarding                         : enabled</span><br><span class="line">Advertising                        : enabled</span><br><span class="line">Managed Address Configuration      : enabled</span><br><span class="line">Other Stateful Configuration       : enabled</span><br><span class="line"></span><br><span class="line">netsh interface ipv6 show addresses &lt;interface id&gt;</span><br><span class="line">Public     Preferred  <span class="number">29</span>d23h56m28s <span class="number">6</span>d23h56m28s fd00:<span class="number">10</span>::<span class="number">100</span></span><br><span class="line">Dhcp       Preferred      <span class="number">6</span>d23h5m    <span class="number">2</span>d23h5m fd00:<span class="number">10</span>::<span class="number">101</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="å›¾å½¢ç•Œé¢-å¤‡ç”¨"><a href="#å›¾å½¢ç•Œé¢-å¤‡ç”¨" class="headerlink" title="å›¾å½¢ç•Œé¢(å¤‡ç”¨)"></a>å›¾å½¢ç•Œé¢(å¤‡ç”¨)</h4><blockquote><p>Windows DHCPv6 é»˜è®¤ä¸å¹¿æ’­å‰ç¼€ï¼Œéœ€é€šè¿‡ RRAS å¯ç”¨ RA</p></blockquote><ol><li><p>æ‰“å¼€ <code>è·¯ç”±å’Œè¿œç¨‹è®¿é—®ï¼ˆRRASï¼‰</code></p></li><li><p>é…ç½®ä¸ºâ€æœ¬åœ°è·¯ç”±æ¨¡å¼ï¼ˆLAN Routingï¼‰â€</p></li><li><p>ç½‘å¡ â†’ å³é”® â†’ å±æ€§ â†’ IPv6 æ ‡ç­¾é¡µï¼Œå‹¾é€‰ï¼š</p><ul><li>âœ… å¯ç”¨ Router Advertisement</li><li>âœ… Managed Address Configurationï¼ˆM ä½ï¼‰</li><li>âœ… Other Stateful Configurationï¼ˆO ä½ï¼‰</li><li>âŒ å¹¿æ’­å‰ç¼€ï¼ˆæ ¹æ®éœ€æ±‚é€‰æ‹©ï¼‰</li></ul></li><li><p>é‡å¯ RRAS æœåŠ¡</p></li></ol><h2 id="âœ…-ä¸‰ã€é…ç½®-DNS-æœåŠ¡"><a href="#âœ…-ä¸‰ã€é…ç½®-DNS-æœåŠ¡" class="headerlink" title="âœ… ä¸‰ã€é…ç½® DNS æœåŠ¡"></a>âœ… ä¸‰ã€é…ç½® DNS æœåŠ¡</h2><hr><h3 id="ğŸ“Œ-æ­¥éª¤-6ï¼šæ·»åŠ æ­£å‘æŸ¥æ‰¾åŒºåŸŸ"><a href="#ğŸ“Œ-æ­¥éª¤-6ï¼šæ·»åŠ æ­£å‘æŸ¥æ‰¾åŒºåŸŸ" class="headerlink" title="ğŸ“Œ æ­¥éª¤ 6ï¼šæ·»åŠ æ­£å‘æŸ¥æ‰¾åŒºåŸŸ"></a>ğŸ“Œ æ­¥éª¤ 6ï¼šæ·»åŠ æ­£å‘æŸ¥æ‰¾åŒºåŸŸ</h3><ol><li>æ‰“å¼€ <code>DNS ç®¡ç†å™¨</code></li><li>å³é”®â€æ­£å‘æŸ¥æ‰¾åŒºåŸŸâ€ â†’ æ–°å»ºåŒºåŸŸ</li><li>åŒºåŸŸåï¼šå¦‚ <code>internal.local</code></li><li>ç±»å‹ï¼šä¸»åŒºåŸŸï¼Œå­˜å‚¨åœ¨æœ¬åœ°æœåŠ¡å™¨</li><li>åŠ¨æ€æ›´æ–°ï¼šé€‰æ‹©â€ä»…å®‰å…¨çš„â€æˆ–â€æ— â€</li></ol><hr><h3 id="ğŸ“Œ-æ­¥éª¤-7ï¼šæ·»åŠ åå‘æŸ¥æ‰¾åŒºåŸŸï¼ˆIPv4ï¼‰"><a href="#ğŸ“Œ-æ­¥éª¤-7ï¼šæ·»åŠ åå‘æŸ¥æ‰¾åŒºåŸŸï¼ˆIPv4ï¼‰" class="headerlink" title="ğŸ“Œ æ­¥éª¤ 7ï¼šæ·»åŠ åå‘æŸ¥æ‰¾åŒºåŸŸï¼ˆIPv4ï¼‰"></a>ğŸ“Œ æ­¥éª¤ 7ï¼šæ·»åŠ åå‘æŸ¥æ‰¾åŒºåŸŸï¼ˆIPv4ï¼‰</h3><ol><li>DNS ç®¡ç†å™¨ â†’ å³é”®â€åå‘æŸ¥æ‰¾åŒºåŸŸâ€ â†’ æ–°å»ºåŒºåŸŸ</li><li>ç½‘ç»œ IDï¼šå¦‚ <code>10.168.192</code></li><li>å®Œæˆå‘½åï¼š<code>10.168.192.in-addr.arpa</code></li></ol><hr><h2 id="âœ…-å››ã€å®‰è£…-PXE-æ‰€éœ€ç»„ä»¶"><a href="#âœ…-å››ã€å®‰è£…-PXE-æ‰€éœ€ç»„ä»¶" class="headerlink" title="âœ… å››ã€å®‰è£… PXE æ‰€éœ€ç»„ä»¶"></a>âœ… å››ã€å®‰è£… PXE æ‰€éœ€ç»„ä»¶</h2><hr><h3 id="ğŸ“¦-æ­¥éª¤-8ï¼šå®‰è£…è½¯ä»¶ç»„ä»¶"><a href="#ğŸ“¦-æ­¥éª¤-8ï¼šå®‰è£…è½¯ä»¶ç»„ä»¶" class="headerlink" title="ğŸ“¦ æ­¥éª¤ 8ï¼šå®‰è£…è½¯ä»¶ç»„ä»¶"></a>ğŸ“¦ æ­¥éª¤ 8ï¼šå®‰è£…è½¯ä»¶ç»„ä»¶</h3><ol><li><p><strong>å®‰è£… Windows éƒ¨ç½²æœåŠ¡ï¼ˆWDSï¼‰</strong></p><ul><li><p>æ‰“å¼€â€æœåŠ¡å™¨ç®¡ç†å™¨â€ â†’ æ·»åŠ è§’è‰²</p></li><li><p>å‹¾é€‰ï¼š</p><ul><li>éƒ¨ç½²æœåŠ¡å™¨</li><li>ä¼ è¾“æœåŠ¡å™¨</li></ul></li></ul></li><li><p><strong>å®‰è£… Windows ADK + WinPE Add-ons</strong></p><ul><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://learn.microsoft.com/en-us/windows-hardware/get-started/adk-install">Windows ADK ä¸‹è½½</a></p></li><li><p>é€‰æ‹©ç»„ä»¶ï¼š</p><ul><li>Deployment Tools</li><li>Windows Preinstallation Environmentï¼ˆéœ€ WinPE Add-onsï¼‰</li></ul></li></ul></li><li><p><strong>å®‰è£… Microsoft Deployment Toolkit (MDT)</strong></p><ul><li>ä¸‹è½½åœ°å€ï¼š<a href="https://www.microsoft.com/en-us/download/details.aspx?id=54259">MDT ä¸‹è½½</a></li><li>å®‰è£…å®Œæˆåæ‰“å¼€ï¼š<strong>Deployment Workbench</strong></li></ul></li></ol><hr><h2 id="âœ…-äº”ã€é…ç½®-MDT-éƒ¨ç½²æœåŠ¡"><a href="#âœ…-äº”ã€é…ç½®-MDT-éƒ¨ç½²æœåŠ¡" class="headerlink" title="âœ… äº”ã€é…ç½® MDT éƒ¨ç½²æœåŠ¡"></a>âœ… äº”ã€é…ç½® MDT éƒ¨ç½²æœåŠ¡</h2><hr><h3 id="âš™ï¸-æ­¥éª¤-9ï¼šåˆ›å»ºéƒ¨ç½²å…±äº«ç›®å½•"><a href="#âš™ï¸-æ­¥éª¤-9ï¼šåˆ›å»ºéƒ¨ç½²å…±äº«ç›®å½•" class="headerlink" title="âš™ï¸ æ­¥éª¤ 9ï¼šåˆ›å»ºéƒ¨ç½²å…±äº«ç›®å½•"></a>âš™ï¸ æ­¥éª¤ 9ï¼šåˆ›å»ºéƒ¨ç½²å…±äº«ç›®å½•</h3><ol><li>ä¾‹å¦‚ï¼š<code>C:\DeploymentShare</code></li><li>Deployment Workbench â†’ Deployment Shares â†’ New Deployment Share</li><li>è®¾ç½®è·¯å¾„ã€å…±äº«åã€æè¿°</li></ol><hr><h3 id="âš™ï¸-æ­¥éª¤-10ï¼šå¯¼å…¥æ“ä½œç³»ç»Ÿé•œåƒ"><a href="#âš™ï¸-æ­¥éª¤-10ï¼šå¯¼å…¥æ“ä½œç³»ç»Ÿé•œåƒ" class="headerlink" title="âš™ï¸ æ­¥éª¤ 10ï¼šå¯¼å…¥æ“ä½œç³»ç»Ÿé•œåƒ"></a>âš™ï¸ æ­¥éª¤ 10ï¼šå¯¼å…¥æ“ä½œç³»ç»Ÿé•œåƒ</h3><ol><li>å°† ISO æŒ‚è½½æˆ–è§£å‹ï¼Œå¯¼å…¥å…¶ä¸­çš„ <code>install.wim</code></li><li>Deployment Share â†’ Operating Systems â†’ Import Operating System</li></ol><hr><h3 id="âš™ï¸-æ­¥éª¤-11ï¼šåˆ›å»º-Task-Sequence"><a href="#âš™ï¸-æ­¥éª¤-11ï¼šåˆ›å»º-Task-Sequence" class="headerlink" title="âš™ï¸ æ­¥éª¤ 11ï¼šåˆ›å»º Task Sequence"></a>âš™ï¸ æ­¥éª¤ 11ï¼šåˆ›å»º Task Sequence</h3><ol><li><p>Deployment Share â†’ Task Sequences â†’ New Task Sequence</p></li><li><p>é…ç½®ï¼š</p><ul><li>Task IDï¼šå¦‚ <code>WS2025</code></li><li>æ¨¡æ¿ï¼šStandard Client Task Sequence</li><li>æ“ä½œç³»ç»Ÿï¼šé€‰æ‹©ä¸Šä¸€æ­¥å¯¼å…¥çš„é•œåƒ</li></ul></li></ol><hr><h3 id="âš™ï¸-æ­¥éª¤-12ï¼šé…ç½®æ— äººå€¼å®ˆéƒ¨ç½²ï¼ˆCustomSettings-ini-Bootstrap-ini-Task-Squences-Unattend-xmlï¼‰"><a href="#âš™ï¸-æ­¥éª¤-12ï¼šé…ç½®æ— äººå€¼å®ˆéƒ¨ç½²ï¼ˆCustomSettings-ini-Bootstrap-ini-Task-Squences-Unattend-xmlï¼‰" class="headerlink" title="âš™ï¸ æ­¥éª¤ 12ï¼šé…ç½®æ— äººå€¼å®ˆéƒ¨ç½²ï¼ˆCustomSettings.ini&#x2F;Bootstrap.ini&#x2F;Task Squences&#x2F;Unattend.xmlï¼‰"></a>âš™ï¸ æ­¥éª¤ 12ï¼šé…ç½®æ— äººå€¼å®ˆéƒ¨ç½²ï¼ˆCustomSettings.ini&#x2F;Bootstrap.ini&#x2F;Task Squences&#x2F;Unattend.xmlï¼‰</h3><p><strong>CustomSettings.ini ç¤ºä¾‹ï¼š</strong></p><p>è·¯å¾„ï¼š<code>C:\DeploymentShare\Control\CustomSettings.ini</code></p><p>æŒ‰ç…§Model, Defaultçš„ä¼˜å…ˆçº§é¡ºåºï¼Œå¦‚æœclientçš„Modelå‹å·åŒ¹é…ï¼Œåˆ™ä½¿ç”¨å¯¹åº”çš„è®¾ç½®ï¼Œä¾‹å¦‚â€Standard PC (Q35 + ICH9, 2009)â€.</p><p>æ›´å¤šå‚æ•°å¯ä»¥å‚è€ƒ<a href="https://learn.microsoft.com/en-us/intune/configmgr/mdt/properties">MDT æ–‡æ¡£</a>.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Settings]</span></span><br><span class="line"><span class="attr">Priority</span>=Model, Default</span><br><span class="line"><span class="attr">Properties</span>=MyCustomProperty</span><br><span class="line"></span><br><span class="line"><span class="section">[Default]</span></span><br><span class="line"><span class="attr">OSInstall</span>=Y</span><br><span class="line"><span class="attr">SkipDeploymentComplete</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipBDDWelcome</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipTaskSequence</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">TaskSequenceID</span>=WS2025</span><br><span class="line"><span class="attr">SkipCapture</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipComputerName</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipUserData</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipSummary</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipFinalSummary</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipAdminPassword</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">AdminPassword</span>=Passw0rd</span><br><span class="line"><span class="attr">SkipProductKey</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipComputerBackup</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipBitLocker</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipDeploymentType</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">DeploymentType</span>=NEWCOMPUTER</span><br><span class="line"><span class="attr">KeyboardLocale</span>=<span class="number">0409</span>:<span class="number">00000409</span></span><br><span class="line"><span class="attr">UserLocale</span>=en-US</span><br><span class="line"><span class="attr">UILanguage</span>=en-US</span><br><span class="line"><span class="attr">TimeZone</span>=Eastern Standard Time</span><br><span class="line"><span class="attr">SkipLocaleSelection</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">JoinWorkgroup</span>=WORKGROUP</span><br><span class="line"><span class="attr">SkipDomainMembership</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipTimeZone</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">SkipApplications</span>=<span class="literal">YES</span></span><br><span class="line"><span class="attr">Applications001</span>=&#123;<span class="number">2</span>ef0539b-<span class="number">5</span>ba0-<span class="number">4</span>dbc-b8d8-daa573151b3d&#125;</span><br><span class="line"><span class="attr">Applications002</span>=&#123;b174dc6e-c0da-<span class="number">409</span>a-b367-ca42fa541a18&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">[Standard PC (Q35 + ICH9, 2009)]</span></span><br><span class="line"><span class="attr">TaskSequenceID</span>=WS2019</span><br><span class="line"><span class="attr">OSDComputerName</span>=Q35-<span class="comment">#Right(Replace(&quot;%MACAddress001%&quot;,&quot;:&quot;,&quot;&quot;),4)#</span></span><br></pre></td></tr></table></figure><p><strong>Bootstrap.ini ç¤ºä¾‹ï¼š</strong></p><p>è·¯å¾„ï¼š<code>C:\DeploymentShare\Control\Bootstrap.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Settings]</span></span><br><span class="line"><span class="attr">Priority</span>=Default</span><br><span class="line"></span><br><span class="line"><span class="section">[Default]</span></span><br><span class="line"><span class="attr">DeployRoot</span>=\\&lt;wds ä¸»æœºå&gt;\DeploymentShare$</span><br><span class="line"><span class="attr">UserID</span>=administrator</span><br><span class="line"><span class="attr">UserDomain</span>=domain.com</span><br><span class="line"><span class="attr">UserPassword</span>=Password</span><br><span class="line"><span class="attr">SkipBDDWelcome</span>=<span class="literal">YES</span></span><br></pre></td></tr></table></figure><p><strong>Task Squences ç¤ºä¾‹ï¼š</strong></p><p>è·¯å¾„: <code>C:\DeploymentShare\Control\&lt;task squence id&gt;\ts.xml</code></p><p>å¯ç”¨OSçš„EMSï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°<code>group name=&quot;Install&quot;</code>ä¸­çš„<code>name=&quot;Install Operating System&quot;</code> ä¹‹å.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Enable EMS&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>bcdedit /set &#123;default&#125; ems yes<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Set EMS settings&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>bcdedit /emssettings EMSPORT:1 EMSBAUDRATE:115200<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…³é—­OSé˜²ç«å¢™ï¼Œæ”¾åˆ°<code>group name=&quot;State Restore&quot;</code>ä¸­çš„<code>step type=&quot;BDD_Gather</code>ä¹‹å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Disable firewall&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>netsh advfirewall set allprofiles state off<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ç”¨RDPè¿œç¨‹æ¡Œé¢ï¼Œæ”¾åˆ°<code>group name=&quot;State Restore&quot;</code>ä¸­çš„<code>step type=&quot;BDD_Gather</code>ä¹‹å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Enable RDP&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>reg add &quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections /t REG_DWORD /d 0 /f<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Unattend.xml ç¤ºä¾‹</strong></p><p>è·¯å¾„: <code>C:\DeploymentShare\Control\&lt;task squence id&gt;\unattend.xml</code></p><p>è®¾ç½®ProductKey, keyå¯ä»¥å‚è€ƒ<a href="https://learn.microsoft.com/en-us/windows-server/get-started/kms-client-activation-keys">https://learn.microsoft.com/en-us/windows-server/get-started/kms-client-activation-keys</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">&quot;Microsoft-Windows-Shell-Setup&quot;</span> <span class="attr">processorArchitecture</span>=<span class="string">&quot;amd64&quot;</span> <span class="attr">publicKeyToken</span>=<span class="string">&quot;31bf3856ad364e35&quot;</span> <span class="attr">language</span>=<span class="string">&quot;neutral&quot;</span> <span class="attr">versionScope</span>=<span class="string">&quot;nonSxS&quot;</span> <span class="attr">xmlns:wcm</span>=<span class="string">&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ProductKey</span>&gt;</span>xxxxx-xxxxx-xxxxx-xxxxx-xxxxx<span class="tag">&lt;/<span class="name">ProductKey</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="âš™ï¸-æ­¥éª¤-13ï¼šé›†æˆUltraVNCåˆ°WinPE"><a href="#âš™ï¸-æ­¥éª¤-13ï¼šé›†æˆUltraVNCåˆ°WinPE" class="headerlink" title="âš™ï¸ æ­¥éª¤ 13ï¼šé›†æˆUltraVNCåˆ°WinPE"></a>âš™ï¸ æ­¥éª¤ 13ï¼šé›†æˆUltraVNCåˆ°WinPE</h3><ol><li>ä¸‹è½½<a href="https://uvnc.com/downloads/ultravnc/163-ultravnc-1-6-1-00.html">UltraVNC</a> <code>UltraVNC x.x.x.x.zip</code></li><li>è§£å‹ç¼©æ–‡ä»¶ï¼Œå¹¶ä¸”å°†x64æ”¹åä¸ºVNC, æ”¾åˆ°<code>C:\DeploymentShare\ExtraFiles</code>ä¸‹é¢</li><li>ç¼–è¾‘æˆ–åˆ›å»º<code>VNC\UltraVNC.ini</code>, æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä¸º<code>111111</code> base64ç¼–ç åçš„å€¼<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[UltraVNC]</span></span><br><span class="line"><span class="attr">passwd</span>=<span class="number">9065</span>AD0D054101281E</span><br></pre></td></tr></table></figure></li><li>Deployment Share â†’ å³é”® â†’ Properties â†’ Windows PE â†’ Platform â†’ x64 â†’ Exatra directory to add: â†’ <code>C:\DeploymentShare\ExtraFiles</code> ç„¶åä¿å­˜</li><li>ç¼–è¾‘<code>C:\DeploymentShare\Control\&lt;task squence id&gt;\ts.xml</code>, æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°<code>group name=&quot;Initialization&quot;</code>, å…³é—­WinPE é˜²ç«å¢™å¹¶ä¸”è¿è¡ŒUltraVNC<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Disable firewall&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>Wpeutil DisableFirewall<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">step</span> <span class="attr">type</span>=<span class="string">&quot;SMS_TaskSequence_RunCommandLineAction&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Start VNC&quot;</span> <span class="attr">description</span>=<span class="string">&quot;&quot;</span> <span class="attr">disable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">continueOnError</span>=<span class="string">&quot;false&quot;</span> <span class="attr">startIn</span>=<span class="string">&quot;&quot;</span> <span class="attr">successCodeList</span>=<span class="string">&quot;0 3010&quot;</span> <span class="attr">runIn</span>=<span class="string">&quot;WinPEandFullOS&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;PackageID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;PackageID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;RunAsUser&quot;</span> <span class="attr">property</span>=<span class="string">&quot;RunAsUser&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span> <span class="attr">property</span>=<span class="string">&quot;SMSTSRunCommandLineUserPassword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">&quot;LoadProfile&quot;</span> <span class="attr">property</span>=<span class="string">&quot;LoadProfile&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">variable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defaultVarList</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span>&gt;</span>cmd.exe /c start &quot;&quot; X:\VNC\winvnc.exe -run<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">step</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>åœ¨å¯åŠ¨WinPEä¹‹åï¼Œå¯ä»¥ä½¿ç”¨UltraVNCè¿æ¥PXEåˆ†é…çš„IPæ‰“å¼€VNCçª—å£ï¼Œå¯†ç ä¸ºè®¾ç½®çš„<code>111111</code></li></ol><hr><hr><h3 id="âš™ï¸-æ­¥éª¤-14ï¼šç”Ÿæˆ-LiteTouchPE-å¼•å¯¼é•œåƒ"><a href="#âš™ï¸-æ­¥éª¤-14ï¼šç”Ÿæˆ-LiteTouchPE-å¼•å¯¼é•œåƒ" class="headerlink" title="âš™ï¸ æ­¥éª¤ 14ï¼šç”Ÿæˆ LiteTouchPE å¼•å¯¼é•œåƒ"></a>âš™ï¸ æ­¥éª¤ 14ï¼šç”Ÿæˆ LiteTouchPE å¼•å¯¼é•œåƒ</h3><ol><li>Deployment Share â†’ å³é”® â†’ Update Deployment Share</li><li>è‡ªåŠ¨ç”Ÿæˆ <code>LiteTouchPE_x64.wim</code>ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š<br><code>C:\DeploymentShare\Boot\LiteTouchPE_x64.wim</code></li></ol><hr><h2 id="âœ…-å…­ã€é…ç½®-WDSï¼ˆPXE-å¯åŠ¨æœåŠ¡ï¼‰"><a href="#âœ…-å…­ã€é…ç½®-WDSï¼ˆPXE-å¯åŠ¨æœåŠ¡ï¼‰" class="headerlink" title="âœ… å…­ã€é…ç½® WDSï¼ˆPXE å¯åŠ¨æœåŠ¡ï¼‰"></a>âœ… å…­ã€é…ç½® WDSï¼ˆPXE å¯åŠ¨æœåŠ¡ï¼‰</h2><hr><h3 id="ğŸ§©-æ­¥éª¤-15ï¼šé…ç½®-WDS-åŸºç¡€è®¾ç½®"><a href="#ğŸ§©-æ­¥éª¤-15ï¼šé…ç½®-WDS-åŸºç¡€è®¾ç½®" class="headerlink" title="ğŸ§© æ­¥éª¤ 15ï¼šé…ç½® WDS åŸºç¡€è®¾ç½®"></a>ğŸ§© æ­¥éª¤ 15ï¼šé…ç½® WDS åŸºç¡€è®¾ç½®</h3><ol><li>æ‰“å¼€â€Windows éƒ¨ç½²æœåŠ¡â€ç®¡ç†å™¨</li><li>è®¾ç½® RemoteInstall è·¯å¾„ï¼ˆå¦‚ï¼š<code>C:\RemoteInstall</code>ï¼‰</li><li>è®¾ç½®å“åº”æ‰€æœ‰å®¢æˆ·ç«¯ï¼ˆåŒ…æ‹¬æœªçŸ¥å®¢æˆ·ç«¯ï¼‰</li></ol><hr><h3 id="ğŸ§©-æ­¥éª¤-16ï¼šæ·»åŠ å¼•å¯¼é•œåƒ"><a href="#ğŸ§©-æ­¥éª¤-16ï¼šæ·»åŠ å¼•å¯¼é•œåƒ" class="headerlink" title="ğŸ§© æ­¥éª¤ 16ï¼šæ·»åŠ å¼•å¯¼é•œåƒ"></a>ğŸ§© æ­¥éª¤ 16ï¼šæ·»åŠ å¼•å¯¼é•œåƒ</h3><ol><li>WDS â†’ Boot Images â†’ Add Boot Image</li><li>é€‰æ‹©å‰é¢ç”Ÿæˆçš„ <code>LiteTouchPE_x64.wim</code></li></ol><hr><h3 id="ğŸ§©-æ­¥éª¤-17ï¼šå¯é€‰å®‰è£…é•œåƒå¯¼å…¥"><a href="#ğŸ§©-æ­¥éª¤-17ï¼šå¯é€‰å®‰è£…é•œåƒå¯¼å…¥" class="headerlink" title="ğŸ§© æ­¥éª¤ 17ï¼šå¯é€‰å®‰è£…é•œåƒå¯¼å…¥"></a>ğŸ§© æ­¥éª¤ 17ï¼šå¯é€‰å®‰è£…é•œåƒå¯¼å…¥</h3><ol><li>ä» ISO ä¸­æå– <code>install.wim</code></li><li>WDS â†’ Install Images â†’ Add Image Group â†’ å¯¼å…¥ <code>install.wim</code></li></ol><hr><h2 id="âœ…-ä¸ƒã€ä¸²å£æ§åˆ¶å°ï¼ˆEMSï¼‰å¯é€‰é…ç½®"><a href="#âœ…-ä¸ƒã€ä¸²å£æ§åˆ¶å°ï¼ˆEMSï¼‰å¯é€‰é…ç½®" class="headerlink" title="âœ… ä¸ƒã€ä¸²å£æ§åˆ¶å°ï¼ˆEMSï¼‰å¯é€‰é…ç½®"></a>âœ… ä¸ƒã€ä¸²å£æ§åˆ¶å°ï¼ˆEMSï¼‰å¯é€‰é…ç½®</h2><hr><h3 id="ğŸ§µ-æ­¥éª¤-18ï¼šå¯ç”¨-EMSï¼ˆä¸²å£æ§åˆ¶ï¼‰"><a href="#ğŸ§µ-æ­¥éª¤-18ï¼šå¯ç”¨-EMSï¼ˆä¸²å£æ§åˆ¶ï¼‰" class="headerlink" title="ğŸ§µ æ­¥éª¤ 18ï¼šå¯ç”¨ EMSï¼ˆä¸²å£æ§åˆ¶ï¼‰"></a>ğŸ§µ æ­¥éª¤ 18ï¼šå¯ç”¨ EMSï¼ˆä¸²å£æ§åˆ¶ï¼‰</h3><ol><li><p>æŸ¥è¯¢BCDä¸­bootload çš„identifier</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /store &quot;C:\RemoteInstall\Boot\x64\Images\LiteTouchPE_x64.wim.bcd&quot; /enum</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®æŒ‡å®šidentifierçš„EMS ON</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /store &quot;C:\RemoteInstall\Boot\x64\Images\LiteTouchPE_x64.wim.bcd&quot; /ems &#123;&lt;identifier&gt;&#125; ON</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡æ£€æŸ¥BCDæ˜¯å¦åŒ…å« <code>ems Yes</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /store &quot;C:\RemoteInstall\Boot\x64\Images\LiteTouchPE_x64.wim.bcd&quot; /enum</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>âš ï¸ æ³¨æ„ï¼šåŠ¡å¿…ä½¿ç”¨ <code>/store</code> æŒ‡å®š <code>.bcd</code> æ–‡ä»¶è·¯å¾„ï¼Œå¦åˆ™å¯èƒ½æ›´æ”¹å½“å‰ç³»ç»Ÿå¼•å¯¼é…ç½®ã€‚</p></blockquote><hr><h2 id="âœ…-å…«ã€å®¢æˆ·ç«¯éƒ¨ç½²æµ‹è¯•ä¸éªŒè¯"><a href="#âœ…-å…«ã€å®¢æˆ·ç«¯éƒ¨ç½²æµ‹è¯•ä¸éªŒè¯" class="headerlink" title="âœ… å…«ã€å®¢æˆ·ç«¯éƒ¨ç½²æµ‹è¯•ä¸éªŒè¯"></a>âœ… å…«ã€å®¢æˆ·ç«¯éƒ¨ç½²æµ‹è¯•ä¸éªŒè¯</h2><hr><h3 id="ğŸ§ª-æ­¥éª¤-19ï¼šå®¢æˆ·ç«¯å¯åŠ¨é…ç½®"><a href="#ğŸ§ª-æ­¥éª¤-19ï¼šå®¢æˆ·ç«¯å¯åŠ¨é…ç½®" class="headerlink" title="ğŸ§ª æ­¥éª¤ 19ï¼šå®¢æˆ·ç«¯å¯åŠ¨é…ç½®"></a>ğŸ§ª æ­¥éª¤ 19ï¼šå®¢æˆ·ç«¯å¯åŠ¨é…ç½®</h3><ol><li>BIOS&#x2F;UEFI ä¸­è®¾ç½® PXE å¯åŠ¨ä¼˜å…ˆ</li><li>å¯åŠ¨ååº”è¿›å…¥ MDT LiteTouch PE ç¯å¢ƒ</li><li>è‡ªåŠ¨æ‰§è¡Œæ— äººå€¼å®ˆéƒ¨ç½²ä»»åŠ¡åºåˆ—</li></ol><hr><h3 id="ğŸ§ª-æ­¥éª¤-20ï¼šéªŒè¯-DHCP-å’Œ-DNS-æ­£å¸¸å·¥ä½œ"><a href="#ğŸ§ª-æ­¥éª¤-20ï¼šéªŒè¯-DHCP-å’Œ-DNS-æ­£å¸¸å·¥ä½œ" class="headerlink" title="ğŸ§ª æ­¥éª¤ 20ï¼šéªŒè¯ DHCP å’Œ DNS æ­£å¸¸å·¥ä½œ"></a>ğŸ§ª æ­¥éª¤ 20ï¼šéªŒè¯ DHCP å’Œ DNS æ­£å¸¸å·¥ä½œ</h3><p>å®¢æˆ·ç«¯è®¾ç½®ä¸ºè‡ªåŠ¨è·å– IP<br>æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ipconfig</span> /release</span><br><span class="line"><span class="built_in">ipconfig</span> /renew</span><br><span class="line"><span class="built_in">ipconfig</span> /all</span><br><span class="line">nslookup internal.local</span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-ä¹ã€é™æ€åœ°å€åˆ†é…ï¼ˆä¿ç•™åœ°å€ï¼‰"><a href="#âœ…-ä¹ã€é™æ€åœ°å€åˆ†é…ï¼ˆä¿ç•™åœ°å€ï¼‰" class="headerlink" title="âœ… ä¹ã€é™æ€åœ°å€åˆ†é…ï¼ˆä¿ç•™åœ°å€ï¼‰"></a>âœ… ä¹ã€é™æ€åœ°å€åˆ†é…ï¼ˆä¿ç•™åœ°å€ï¼‰</h2><hr><h3 id="ğŸ“Œ-DHCPv4-ä¿ç•™åœ°å€"><a href="#ğŸ“Œ-DHCPv4-ä¿ç•™åœ°å€" class="headerlink" title="ğŸ“Œ DHCPv4 ä¿ç•™åœ°å€"></a>ğŸ“Œ DHCPv4 ä¿ç•™åœ°å€</h3><ol><li>DHCP ç®¡ç†å™¨ â†’ IPv4 â†’ Reservations</li><li>æ–°å»º â†’ è¾“å…¥ MAC åœ°å€ä¸ IP è¿›è¡Œä¿ç•™</li></ol><hr><h3 id="ğŸ“Œ-DHCPv6-ä¿ç•™åœ°å€"><a href="#ğŸ“Œ-DHCPv6-ä¿ç•™åœ°å€" class="headerlink" title="ğŸ“Œ DHCPv6 ä¿ç•™åœ°å€"></a>ğŸ“Œ DHCPv6 ä¿ç•™åœ°å€</h3><ol><li>å®¢æˆ·ç«¯æ‰§è¡Œ <code>ipconfig /all</code> è·å– <strong>DUID</strong></li><li>DHCP ç®¡ç†å™¨ â†’ IPv6 â†’ Reservations â†’ æ–°å»ºä¿ç•™åœ°å€å¹¶è¾“å…¥ DUID</li></ol><hr><h2 id="âœ…-åã€æ•…éšœæ’æŸ¥ä¸æ—¥å¿—å®šä½"><a href="#âœ…-åã€æ•…éšœæ’æŸ¥ä¸æ—¥å¿—å®šä½" class="headerlink" title="âœ… åã€æ•…éšœæ’æŸ¥ä¸æ—¥å¿—å®šä½"></a>âœ… åã€æ•…éšœæ’æŸ¥ä¸æ—¥å¿—å®šä½</h2><hr><h3 id="ğŸ”§-å¸¸è§æ—¥å¿—è·¯å¾„"><a href="#ğŸ”§-å¸¸è§æ—¥å¿—è·¯å¾„" class="headerlink" title="ğŸ”§ å¸¸è§æ—¥å¿—è·¯å¾„"></a>ğŸ”§ å¸¸è§æ—¥å¿—è·¯å¾„</h3><table><thead><tr><th>é˜¶æ®µ</th><th>æ—¥å¿—è·¯å¾„</th></tr></thead><tbody><tr><td>WinPE é˜¶æ®µ</td><td><code>X:\MININT\SMSOSD\OSDLOGS\</code></td></tr><tr><td>å®‰è£…ä¸­</td><td><code>C:\MININT\SMSOSD\OSDLOGS\</code></td></tr><tr><td>å®‰è£…å</td><td><code>C:\Windows\Temp\DeploymentLogs\</code></td></tr></tbody></table><hr><h3 id="ğŸ§¹-æ¸…é™¤å¤±è´¥éƒ¨ç½²ç¼“å­˜ï¼ˆé¿å…â€in-progressâ€é”™è¯¯ï¼‰"><a href="#ğŸ§¹-æ¸…é™¤å¤±è´¥éƒ¨ç½²ç¼“å­˜ï¼ˆé¿å…â€in-progressâ€é”™è¯¯ï¼‰" class="headerlink" title="ğŸ§¹ æ¸…é™¤å¤±è´¥éƒ¨ç½²ç¼“å­˜ï¼ˆé¿å…â€in-progressâ€é”™è¯¯ï¼‰"></a>ğŸ§¹ æ¸…é™¤å¤±è´¥éƒ¨ç½²ç¼“å­˜ï¼ˆé¿å…â€in-progressâ€é”™è¯¯ï¼‰</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rd</span> /s /q C:\MININT</span><br><span class="line"><span class="built_in">rd</span> /s /q C:\_SMSTaskSequence</span><br><span class="line"><span class="built_in">del</span> /f /q C:\*.xml</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> PXE </tag>
            
            <tag> DHCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Intelå’ŒAMDæœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾</title>
      <link href="/2025/06/03/amd_intel_processor_roadmap/"/>
      <url>/2025/06/03/amd_intel_processor_roadmap/</url>
      
        <content type="html"><![CDATA[<h1 id="Intelå’ŒAMDæœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾"><a href="#Intelå’ŒAMDæœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾" class="headerlink" title="Intelå’ŒAMDæœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾"></a>Intelå’ŒAMDæœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾</h1><p>è‹±ç‰¹å°”ï¼ˆIntelï¼‰å’Œè¶…å¨ï¼ˆAMDï¼‰æœåŠ¡å™¨å¤„ç†å™¨è·¯çº¿å›¾ï¼Œæ¶µç›–2010å¹´è‡³2025å¹´é—´çš„å…³é”®äº§å“ã€æŠ€æœ¯æ¼”è¿›ä»¥åŠå¯¹æ¯”åˆ†æã€‚</p><hr><h2 id="ğŸ§©-è‹±ç‰¹å°”-Xeon-å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰"><a href="#ğŸ§©-è‹±ç‰¹å°”-Xeon-å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰" class="headerlink" title="ğŸ§© è‹±ç‰¹å°” Xeon å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰"></a>ğŸ§© è‹±ç‰¹å°” Xeon å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰</h2><table><thead><tr><th>å¹´ä»½</th><th>æ¶æ„ä»£å·</th><th>åˆ¶ç¨‹å·¥è‰º</th><th>æ ¸å¿ƒæ•°</th><th>æ’æ§½&#x2F;å¹³å°</th><th>ä¸»è¦ç‰¹æ€§</th><th></th></tr></thead><tbody><tr><td>2010</td><td>Westmere-EP</td><td>32nm</td><td>6</td><td>LGA 1366</td><td>åŸºäº Nehalem æ¶æ„ï¼Œæ”¯æŒè¶…çº¿ç¨‹å’Œ Turbo Boost æŠ€æœ¯ã€‚</td><td></td></tr><tr><td>2011</td><td>Sandy Bridge-EP</td><td>32nm</td><td>8</td><td>LGA 2011</td><td>å¼•å…¥ AVX æŒ‡ä»¤é›†ï¼Œæå‡æµ®ç‚¹æ€§èƒ½ã€‚</td><td></td></tr><tr><td>2012</td><td>Ivy Bridge-EP</td><td>22nm</td><td>12</td><td>LGA 2011</td><td>é¦–æ¬¡é‡‡ç”¨ 3D æ™¶ä½“ç®¡æŠ€æœ¯ï¼Œæå‡èƒ½æ•ˆæ¯”ã€‚</td><td></td></tr><tr><td>2014</td><td>Haswell-EP</td><td>22nm</td><td>18</td><td>LGA 2011-v3</td><td>å¼•å…¥ AVX2 æŒ‡ä»¤é›†ï¼Œæå‡æ•´æ•°å’Œæµ®ç‚¹æ€§èƒ½ã€‚</td><td></td></tr><tr><td>2015</td><td>Broadwell-EP</td><td>14nm</td><td>22</td><td>LGA 2011-v3</td><td>åˆ¶ç¨‹å‡çº§è‡³ 14nmï¼Œæå‡èƒ½æ•ˆå’Œæ€§èƒ½ã€‚</td><td></td></tr><tr><td>2017</td><td>Skylake-SP</td><td>14nm</td><td>28</td><td>LGA 3647</td><td>å¼•å…¥ Xeon Scalable å‘½åï¼Œæ”¯æŒ AVX-512 æŒ‡ä»¤é›†ã€‚</td><td></td></tr><tr><td>2019</td><td>Cascade Lake-SP</td><td>14nm</td><td>28</td><td>LGA 3647</td><td>æ”¯æŒ Optane DC æŒä¹…å†…å­˜ï¼Œæå‡å†…å­˜å®¹é‡å’Œå¸¦å®½ã€‚</td><td></td></tr><tr><td>2020</td><td>Cooper Lake</td><td>14nm</td><td>28</td><td>LGA 4189</td><td>é¦–æ¬¡æ”¯æŒ bfloat16 æŒ‡ä»¤ï¼Œä¼˜åŒ– AI æ€§èƒ½ã€‚</td><td></td></tr><tr><td>2021</td><td>Ice Lake-SP</td><td>10nm</td><td>40</td><td>LGA 4189</td><td>é¦–æ¬¡é‡‡ç”¨ 10nm åˆ¶ç¨‹ï¼Œæ”¯æŒ PCIe 4.0 å’Œ DDR4ã€‚</td><td></td></tr><tr><td>2022</td><td>Sapphire Rapids</td><td>Intel 7</td><td>60</td><td>LGA 4677</td><td>å¼•å…¥æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒ DDR5 å’Œ PCIe 5.0ã€‚</td><td></td></tr><tr><td>2023</td><td>Emerald Rapids</td><td>Intel 7</td><td>64</td><td>LGA 4677</td><td>å¢åŠ  L3 ç¼“å­˜ï¼Œæå‡èƒ½æ•ˆæ¯”ï¼Œå…¼å®¹ LGA 4677 æ’æ§½ã€‚</td><td></td></tr><tr><td>2024</td><td>Sierra Forest (E-Core)</td><td>Intel 3</td><td>144â€“288</td><td>LGA 7529</td><td>é¦–æ¬¾çº¯ E-Core è®¾è®¡ï¼Œé¢å‘äº‘è®¡ç®—ï¼Œæ”¯æŒ DDR5 å’Œ PCIe 5.0ã€‚</td><td></td></tr><tr><td>2024</td><td>Granite Rapids (P-Core)</td><td>Intel 3</td><td>128</td><td>LGA 7529</td><td>åŸºäº P-Core è®¾è®¡ï¼Œé¢å‘é«˜æ€§èƒ½è®¡ç®—ï¼Œæ”¯æŒ DDR5-8800ã€‚</td><td></td></tr><tr><td>2025</td><td>Clearwater Forest (E-Core)</td><td>Intel 18A</td><td>å¾…å®š</td><td>LGA 7529</td><td>é‡‡ç”¨ RibbonFET æ™¶ä½“ç®¡æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥æå‡èƒ½æ•ˆå’Œæ ¸å¿ƒå¯†åº¦ã€‚</td><td></td></tr><tr><td>2025</td><td>Diamond Rapids (P-Core)</td><td>Intel 18A</td><td>å¾…å®š</td><td>LGA 9324</td><td>é¢„è®¡é‡‡ç”¨ Panther Cove-X æ¶æ„ï¼Œæ”¯æŒ APX æŒ‡ä»¤é›†ï¼Œæå‡ IPC æ€§èƒ½ã€‚</td><td></td></tr></tbody></table><hr><h2 id="ğŸ§©-AMD-EPYC-å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰"><a href="#ğŸ§©-AMD-EPYC-å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰" class="headerlink" title="ğŸ§© AMD EPYC å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰"></a>ğŸ§© AMD EPYC å¤„ç†å™¨è·¯çº¿å›¾ï¼ˆ2010â€“2025ï¼‰</h2><h3 id="2010-2016"><a href="#2010-2016" class="headerlink" title="2010-2016"></a>2010-2016</h3><hr><table><thead><tr><th>å¹´ä»½</th><th>æ¶æ„ä»£å·</th><th>åˆ¶ç¨‹</th><th>æ ¸å¿ƒæ•°</th><th>ä¸»è¦ç‰¹æ€§</th></tr></thead><tbody><tr><td>2010</td><td>Magny-Cours</td><td>45nm</td><td>8â€“12</td><td>åŸºäº K10 æ¶æ„ï¼Œæ”¯æŒ DDR3 å†…å­˜ï¼Œé‡‡ç”¨ Socket G34 æ’æ§½ã€‚</td></tr><tr><td>2011</td><td>Interlagos</td><td>32nm</td><td>8â€“16</td><td>é¦–æ¬¡å¼•å…¥ Bulldozer æ¶æ„ï¼Œæ”¯æŒ AVX æŒ‡ä»¤é›†ï¼Œæå‡æµ®ç‚¹æ€§èƒ½ã€‚</td></tr><tr><td>2012</td><td>Abu Dhabi</td><td>32nm</td><td>8â€“16</td><td>åŸºäº Piledriver æ¶æ„ï¼Œä¼˜åŒ–èƒ½æ•ˆæ¯”ï¼Œæå‡æ—¶é’Ÿé¢‘ç‡ã€‚</td></tr><tr><td>2014</td><td>Warsaw</td><td>32nm</td><td>8â€“16</td><td>é’ˆå¯¹ 2P&#x2F;4P æœåŠ¡å™¨ä¼˜åŒ–ï¼Œæå‡æ€§èƒ½å’Œèƒ½æ•ˆã€‚</td></tr><tr><td>2016</td><td>Opteron A1100</td><td>28nm</td><td>4â€“8</td><td>åŸºäº ARM Cortex-A57 æ¶æ„ï¼Œé¦–æ¬¾ ARM æ¶æ„çš„ Opteron å¤„ç†å™¨ã€‚</td></tr></tbody></table><h3 id="2017-2025"><a href="#2017-2025" class="headerlink" title="2017-2025"></a>2017-2025</h3><hr><table><thead><tr><th>å¹´ä»½</th><th>æ¶æ„ä»£å·</th><th>åˆ¶ç¨‹å·¥è‰º</th><th>æ ¸å¿ƒæ•°</th><th>æ’æ§½&#x2F;å¹³å°</th><th>ä¸»è¦ç‰¹æ€§</th><th></th></tr></thead><tbody><tr><td>2017</td><td>Naples</td><td>14nm</td><td>32</td><td>SP3</td><td>é¦–æ¬¾ EPYC å¤„ç†å™¨ï¼ŒåŸºäº Zen æ¶æ„ï¼Œæ”¯æŒ 8 é€šé“ DDR4 å†…å­˜å’Œ 128 æ¡ PCIe 3.0 é€šé“ã€‚</td><td></td></tr><tr><td>2019</td><td>Rome</td><td>7nm</td><td>64</td><td>SP3</td><td>åŸºäº Zen 2 æ¶æ„ï¼Œé‡‡ç”¨ Chiplet è®¾è®¡ï¼Œæ”¯æŒ PCIe 4.0ï¼Œæå‡å†…å­˜å¸¦å®½å’Œ I&#x2F;O æ€§èƒ½ã€‚</td><td></td></tr><tr><td>2021</td><td>Milan</td><td>7nm</td><td>64</td><td>SP3</td><td>åŸºäº Zen 3 æ¶æ„ï¼Œæå‡æ¯æ ¸å¿ƒæ€§èƒ½ï¼Œä¼˜åŒ–ç¼“å­˜æ¶æ„ã€‚</td><td></td></tr><tr><td>2022</td><td>Milan-X</td><td>7nm</td><td>64</td><td>SP3</td><td>åœ¨ Milan åŸºç¡€ä¸Šå¼•å…¥ 3D V-Cache æŠ€æœ¯ï¼ŒL3 ç¼“å­˜é«˜è¾¾ 768MBï¼Œæå‡ç‰¹å®šå·¥ä½œè´Ÿè½½æ€§èƒ½ã€‚</td><td></td></tr><tr><td>2022</td><td>Genoa</td><td>5nm</td><td>96</td><td>SP5</td><td>åŸºäº Zen 4 æ¶æ„ï¼Œæ”¯æŒ DDR5 å†…å­˜å’Œ PCIe 5.0ï¼Œé‡‡ç”¨ SP5 æ’æ§½ã€‚</td><td></td></tr><tr><td>2023</td><td>Bergamo (Zen 4c)</td><td>5nm</td><td>128</td><td>SP5</td><td>åŸºäº Zen 4c æ¶æ„ï¼Œé’ˆå¯¹äº‘è®¡ç®—ä¼˜åŒ–ï¼Œæå‡æ ¸å¿ƒå¯†åº¦å’Œèƒ½æ•ˆæ¯”ã€‚</td><td></td></tr><tr><td>2023</td><td>Siena</td><td>5nm</td><td>16â€“64</td><td>SP6</td><td>é¢å‘è¾¹ç¼˜è®¡ç®—å’Œç”µä¿¡å¸‚åœºï¼Œä¼˜åŒ–åŠŸè€—å’Œæˆæœ¬ï¼Œé‡‡ç”¨ SP6 æ’æ§½ã€‚</td><td></td></tr><tr><td>2024</td><td>Turin</td><td>4nm&#x2F;3nm</td><td>192</td><td>SP5</td><td>åŸºäº Zen 5 æ¶æ„ï¼Œæ”¯æŒ DDR5 å’Œ PCIe 5.0ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½å’Œèƒ½æ•ˆã€‚</td><td></td></tr><tr><td>2025</td><td>Venice (Zen 6&#x2F;6c)</td><td>3nm&#x2F;2nm</td><td>96â€“256</td><td>SP7&#x2F;SP8</td><td>åŸºäº Zen 6 æ¶æ„ï¼Œé‡‡ç”¨å…ˆè¿›å°è£…æŠ€æœ¯ï¼Œæ”¯æŒæ›´é«˜æ ¸å¿ƒæ•°å’Œç¼“å­˜å®¹é‡ï¼Œé¢„è®¡åœ¨ 2026 å¹´å‘å¸ƒã€‚</td><td></td></tr></tbody></table><hr><h2 id="âš”ï¸-æŠ€æœ¯å¯¹æ¯”åˆ†æï¼ˆIntel-vs-AMDï¼‰"><a href="#âš”ï¸-æŠ€æœ¯å¯¹æ¯”åˆ†æï¼ˆIntel-vs-AMDï¼‰" class="headerlink" title="âš”ï¸ æŠ€æœ¯å¯¹æ¯”åˆ†æï¼ˆIntel vs AMDï¼‰"></a>âš”ï¸ æŠ€æœ¯å¯¹æ¯”åˆ†æï¼ˆIntel vs AMDï¼‰</h2><h3 id="æ ¸å¿ƒæ•°ä¸æ¶æ„"><a href="#æ ¸å¿ƒæ•°ä¸æ¶æ„" class="headerlink" title="æ ¸å¿ƒæ•°ä¸æ¶æ„"></a>æ ¸å¿ƒæ•°ä¸æ¶æ„</h3><ul><li><p><strong>Intel</strong>ï¼šé€šè¿‡å¼•å…¥ E-Coreï¼ˆå¦‚ Sierra Forestï¼‰å’Œ P-Coreï¼ˆå¦‚ Granite Rapidsï¼‰æ¶æ„ï¼Œå®ç°äº†æ ¸å¿ƒæ•°çš„æ˜¾è‘—æå‡ï¼ŒSierra Forest é«˜è¾¾ 288 æ ¸å¿ƒï¼ŒGranite Rapids è¾¾åˆ° 128 æ ¸å¿ƒã€‚</p></li><li><p><strong>AMD</strong>ï¼šé‡‡ç”¨ Chiplet è®¾è®¡å’Œ Zen æ¶æ„çš„æŒç»­ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ•°ä» Naples çš„ 32 æ ¸å¿ƒæå‡è‡³ Venice çš„æœ€é«˜ 256 æ ¸å¿ƒï¼Œç‰¹åˆ«æ˜¯åœ¨ Bergamo å’Œ Turin ä¸­å±•ç°å‡ºé«˜æ ¸å¿ƒå¯†åº¦çš„ä¼˜åŠ¿ã€‚</p></li></ul><h3 id="åˆ¶ç¨‹å·¥è‰º"><a href="#åˆ¶ç¨‹å·¥è‰º" class="headerlink" title="åˆ¶ç¨‹å·¥è‰º"></a>åˆ¶ç¨‹å·¥è‰º</h3><ul><li><p><strong>Intel</strong>ï¼šä» 32nm é€æ­¥è¿‡æ¸¡åˆ° Intel 18A åˆ¶ç¨‹ï¼Œè®¡åˆ’åœ¨ 2025 å¹´çš„ Clearwater Forest å’Œ Diamond Rapids ä¸­é‡‡ç”¨ã€‚</p></li><li><p><strong>AMD</strong>ï¼šä¾èµ–å°ç§¯ç”µï¼ˆTSMCï¼‰çš„å…ˆè¿›åˆ¶ç¨‹ï¼Œä» 14nm è¿‡æ¸¡åˆ° 2nmï¼Œé¢„è®¡åœ¨ Venice ä¸­é‡‡ç”¨ï¼Œæå‡æ™¶ä½“ç®¡å¯†åº¦å’Œèƒ½æ•ˆæ¯”ã€‚</p></li></ul><h3 id="å¹³å°ä¸å†…å­˜æ”¯æŒ"><a href="#å¹³å°ä¸å†…å­˜æ”¯æŒ" class="headerlink" title="å¹³å°ä¸å†…å­˜æ”¯æŒ"></a>å¹³å°ä¸å†…å­˜æ”¯æŒ</h3><ul><li><p><strong>Intel</strong>ï¼šä» LGA 1366 è¿‡æ¸¡åˆ° LGA 9324ï¼Œæ”¯æŒ DDR5 å†…å­˜å’Œ PCIe 5.0&#x2F;5.0+ï¼Œæå‡å†…å­˜å¸¦å®½å’Œ I&#x2F;O æ€§èƒ½ã€‚</p></li><li><p><strong>AMD</strong>ï¼šä» SP3 è¿‡æ¸¡åˆ° SP7&#x2F;SP8ï¼Œæ”¯æŒ DDR5 å†…å­˜å’Œ PCIe 5.0ï¼Œè¿›ä¸€æ­¥æå‡å†…å­˜å¸¦å®½å’Œ I&#x2F;O æ€§èƒ½ã€‚</p></li></ul><h3 id="èƒ½æ•ˆä¸æ€§èƒ½ä¼˜åŒ–"><a href="#èƒ½æ•ˆä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="èƒ½æ•ˆä¸æ€§èƒ½ä¼˜åŒ–"></a>èƒ½æ•ˆä¸æ€§èƒ½ä¼˜åŒ–</h3><ul><li><p><strong>Intel</strong>ï¼šé€šè¿‡å¼•å…¥ E-Core æ¶æ„ï¼ˆå¦‚ Sierra Forestï¼‰å’Œå…ˆè¿›åˆ¶ç¨‹ï¼Œæå‡æ€§èƒ½æ¯ç“¦æ¯”ï¼Œç‰¹åˆ«é€‚ç”¨äºäº‘è®¡ç®—å’Œé«˜å¯†åº¦éƒ¨ç½²ã€‚</p></li><li><p><strong>AMD</strong>ï¼šé€šè¿‡ Zen æ¶æ„çš„æŒç»­ä¼˜åŒ–å’Œ 3D V-Cache æŠ€æœ¯ï¼Œæå‡æ¯æ ¸å¿ƒæ€§èƒ½å’Œç¼“å­˜å®¹é‡ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½è®¡ç®—å’Œæ•°æ®å¯†é›†å‹å·¥ä½œè´Ÿè½½ã€‚</p></li></ul><hr><h2 id="ğŸ“Š-æ€»ç»“å¯¹æ¯”è¡¨"><a href="#ğŸ“Š-æ€»ç»“å¯¹æ¯”è¡¨" class="headerlink" title="ğŸ“Š æ€»ç»“å¯¹æ¯”è¡¨"></a>ğŸ“Š æ€»ç»“å¯¹æ¯”è¡¨</h2><table><thead><tr><th>é¡¹ç›®</th><th>Intel Xeon ç³»åˆ—</th><th>AMD EPYC ç³»åˆ—</th><th></th></tr></thead><tbody><tr><td>æ¶æ„</td><td>P-Core &#x2F; E-Core åˆ†ç¦»è®¾è®¡</td><td>Zen ç³»åˆ—æ¶æ„ï¼ˆZen è‡³ Zen 6ï¼‰</td><td></td></tr><tr><td>æ ¸å¿ƒæ•°èŒƒå›´</td><td>6 â€“ 288</td><td>8 â€“ 256</td><td></td></tr><tr><td>åˆ¶ç¨‹å·¥è‰º</td><td>32nm â†’ Intel 18A</td><td>14nm â†’ TSMC 2nm</td><td></td></tr><tr><td>æ’æ§½å¹³å°</td><td>LGA 1366 â†’ LGA 9324</td><td>SP3 â†’ SP7&#x2F;SP8</td><td></td></tr><tr><td>å†…å­˜æ”¯æŒ</td><td>DDR3 â†’ DDR5</td><td>DDR4 â†’ DDR5</td><td></td></tr><tr><td>PCIe æ”¯æŒ</td><td>PCIe 3.0 â†’ PCIe 5.0</td><td>PCIe 3.0 â†’ PCIe 5.0</td><td></td></tr><tr><td>èƒ½æ•ˆä¼˜åŒ–</td><td>å¼•å…¥ E-Core æ¶æ„ï¼Œæå‡æ€§èƒ½æ¯ç“¦æ¯”</td><td>Zen æ¶æ„ä¼˜åŒ–ï¼Œé‡‡ç”¨ 3D V-Cache æŠ€æœ¯</td><td></td></tr><tr><td>ä»£è¡¨äº§å“</td><td>Sierra Forest, Granite Rapids</td><td>Bergamo, Turin, Venice</td><td></td></tr></tbody></table><hr>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CPU </tag>
            
            <tag> Intel </tag>
            
            <tag> AMD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TigerVNC Server æ­å»ºæŒ‡å—ï¼ˆé€‚ç”¨äº RHEL 9ï¼Œä½¿ç”¨ root ç”¨æˆ·ï¼‰</title>
      <link href="/2025/06/03/rhel9_tigervnc_server/"/>
      <url>/2025/06/03/rhel9_tigervnc_server/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ¯-TigerVNC-Server-æ­å»ºæŒ‡å—ï¼ˆé€‚ç”¨äº-RHEL-9ï¼Œä½¿ç”¨-root-ç”¨æˆ·ï¼‰"><a href="#ğŸ¯-TigerVNC-Server-æ­å»ºæŒ‡å—ï¼ˆé€‚ç”¨äº-RHEL-9ï¼Œä½¿ç”¨-root-ç”¨æˆ·ï¼‰" class="headerlink" title="ğŸ¯ TigerVNC Server æ­å»ºæŒ‡å—ï¼ˆé€‚ç”¨äº RHEL 9ï¼Œä½¿ç”¨ root ç”¨æˆ·ï¼‰"></a>ğŸ¯ TigerVNC Server æ­å»ºæŒ‡å—ï¼ˆé€‚ç”¨äº RHEL 9ï¼Œä½¿ç”¨ root ç”¨æˆ·ï¼‰</h1><hr><h2 id="ğŸ“¦-ç¬¬ä¸€æ­¥ï¼šå®‰è£…-TigerVNC-Server"><a href="#ğŸ“¦-ç¬¬ä¸€æ­¥ï¼šå®‰è£…-TigerVNC-Server" class="headerlink" title="ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šå®‰è£… TigerVNC Server"></a>ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šå®‰è£… TigerVNC Server</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install tigervnc-server -y</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ‘¤-ç¬¬äºŒæ­¥ï¼šè®¾ç½®-root-çš„-VNC-ç™»å½•å¯†ç "><a href="#ğŸ‘¤-ç¬¬äºŒæ­¥ï¼šè®¾ç½®-root-çš„-VNC-ç™»å½•å¯†ç " class="headerlink" title="ğŸ‘¤ ç¬¬äºŒæ­¥ï¼šè®¾ç½® root çš„ VNC ç™»å½•å¯†ç "></a>ğŸ‘¤ ç¬¬äºŒæ­¥ï¼šè®¾ç½® root çš„ VNC ç™»å½•å¯†ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncpasswd</span><br></pre></td></tr></table></figure><p>è®¾ç½®å®Œæˆåä¼šç”Ÿæˆ <code>/root/.vnc/passwd</code> æ–‡ä»¶ã€‚</p><hr><h2 id="ğŸ§¾-ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç”¨æˆ·å’Œæ˜¾ç¤ºå·æ˜ å°„"><a href="#ğŸ§¾-ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç”¨æˆ·å’Œæ˜¾ç¤ºå·æ˜ å°„" class="headerlink" title="ğŸ§¾ ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç”¨æˆ·å’Œæ˜¾ç¤ºå·æ˜ å°„"></a>ğŸ§¾ ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç”¨æˆ·å’Œæ˜¾ç¤ºå·æ˜ å°„</h2><p>ç¼–è¾‘ <code>/etc/tigervnc/vncserver.users</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/tigervnc/vncserver.users</span><br></pre></td></tr></table></figure><p>æ·»åŠ å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:1=root</span><br></pre></td></tr></table></figure><blockquote><p>è¿™è¡¨ç¤º <code>root</code> ç”¨æˆ·ç»‘å®šåˆ° VNC æ˜¾ç¤ºå· <code>:1</code>ï¼Œå¯¹åº”ç«¯å£ 5901ã€‚</p></blockquote><hr><h2 id="ğŸ§ -ç¬¬å››æ­¥ï¼šé…ç½®æ¡Œé¢ç¯å¢ƒï¼ˆé»˜è®¤-GNOMEï¼‰"><a href="#ğŸ§ -ç¬¬å››æ­¥ï¼šé…ç½®æ¡Œé¢ç¯å¢ƒï¼ˆé»˜è®¤-GNOMEï¼‰" class="headerlink" title="ğŸ§  ç¬¬å››æ­¥ï¼šé…ç½®æ¡Œé¢ç¯å¢ƒï¼ˆé»˜è®¤ GNOMEï¼‰"></a>ğŸ§  ç¬¬å››æ­¥ï¼šé…ç½®æ¡Œé¢ç¯å¢ƒï¼ˆé»˜è®¤ GNOMEï¼‰</h2><p>ç¡®è®¤ root ç›®å½•ä¸­å­˜åœ¨ VNC é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /root/.vnc</span><br><span class="line">vi /root/.vnc/config</span><br></pre></td></tr></table></figure><p>å†…å®¹å¦‚ä¸‹ï¼ˆé»˜è®¤ GNOME æ¡Œé¢ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session=gnome</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä½¿ç”¨ KDE æˆ– XFCEï¼Œå¯ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session=plasma</span><br><span class="line">session=xfce</span><br></pre></td></tr></table></figure><hr><h2 id="âš™ï¸-ç¬¬äº”æ­¥ï¼šåˆ›å»º-Systemd-æœåŠ¡æ–‡ä»¶"><a href="#âš™ï¸-ç¬¬äº”æ­¥ï¼šåˆ›å»º-Systemd-æœåŠ¡æ–‡ä»¶" class="headerlink" title="âš™ï¸ ç¬¬äº”æ­¥ï¼šåˆ›å»º Systemd æœåŠ¡æ–‡ä»¶"></a>âš™ï¸ ç¬¬äº”æ­¥ï¼šåˆ›å»º Systemd æœåŠ¡æ–‡ä»¶</h2><p>å¤åˆ¶æ¨¡æ¿å¹¶å‘½åä¸º <code>vncserver@.service</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@.service</span><br></pre></td></tr></table></figure><p>å¯é€‰æ£€æŸ¥æˆ–ä¿®æ”¹æœåŠ¡æ–‡ä»¶ï¼ˆä¸€èˆ¬æ— éœ€æ”¹ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/system/vncserver@.service</span><br></pre></td></tr></table></figure><p>ç¡®è®¤å¦‚ä¸‹å­—æ®µå­˜åœ¨ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="attr">ExecStartPre</span>=/usr/libexec/vncsession-restore %i</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/libexec/vncsession-start %i</span><br><span class="line"><span class="attr">PIDFile</span>=/run/vncsession-%i.pid</span><br><span class="line"><span class="attr">SELinuxContext</span>=system_u:system_r:vnc_session_t:s0</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸš€-ç¬¬å…­æ­¥ï¼šå¯åŠ¨-VNC-æœåŠ¡"><a href="#ğŸš€-ç¬¬å…­æ­¥ï¼šå¯åŠ¨-VNC-æœåŠ¡" class="headerlink" title="ğŸš€ ç¬¬å…­æ­¥ï¼šå¯åŠ¨ VNC æœåŠ¡"></a>ğŸš€ ç¬¬å…­æ­¥ï¼šå¯åŠ¨ VNC æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> --now vncserver@root.service</span><br></pre></td></tr></table></figure><p>å¦‚æœæŠ¥é”™<code>No user configured for display root</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> --now vncserver@:1.service</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”-ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡çŠ¶æ€"><a href="#ğŸ”-ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡çŠ¶æ€" class="headerlink" title="ğŸ” ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡çŠ¶æ€"></a>ğŸ” ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡çŠ¶æ€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status vncserver@root.service</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status vncserver@:1.service</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Active: active (running)</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”¥-ç¬¬å…«æ­¥ï¼šå¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆå¦‚å¯ç”¨äº†-firewalldï¼‰"><a href="#ğŸ”¥-ç¬¬å…«æ­¥ï¼šå¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆå¦‚å¯ç”¨äº†-firewalldï¼‰" class="headerlink" title="ğŸ”¥ ç¬¬å…«æ­¥ï¼šå¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆå¦‚å¯ç”¨äº† firewalldï¼‰"></a>ğŸ”¥ ç¬¬å…«æ­¥ï¼šå¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆå¦‚å¯ç”¨äº† firewalldï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=5901/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ’»-ç¬¬ä¹æ­¥ï¼šå®¢æˆ·ç«¯è¿æ¥"><a href="#ğŸ’»-ç¬¬ä¹æ­¥ï¼šå®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="ğŸ’» ç¬¬ä¹æ­¥ï¼šå®¢æˆ·ç«¯è¿æ¥"></a>ğŸ’» ç¬¬ä¹æ­¥ï¼šå®¢æˆ·ç«¯è¿æ¥</h2><p>ä½¿ç”¨ VNC å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ RealVNCã€TigerVNC Viewerï¼‰è¿æ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;æœåŠ¡å™¨IP&gt;:1</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;æœåŠ¡å™¨IP&gt;:5901</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä½ è®¾ç½®çš„ VNC å¯†ç ï¼Œå³å¯è¿æ¥ã€‚</p><hr><h2 id="ğŸ“Œ-è¡¥å……è¯´æ˜"><a href="#ğŸ“Œ-è¡¥å……è¯´æ˜" class="headerlink" title="ğŸ“Œ è¡¥å……è¯´æ˜"></a>ğŸ“Œ è¡¥å……è¯´æ˜</h2><table><thead><tr><th>å†…å®¹</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>é»˜è®¤æ¡Œé¢ç¯å¢ƒ</td><td>GNOME</td></tr><tr><td>é»˜è®¤ç«¯å£</td><td>5900 + æ˜¾ç¤ºå·ï¼ˆ:1 â†’ 5901ï¼‰</td></tr><tr><td>æ˜¾ç¤ºæ—¥å¿—</td><td><code>/root/.vnc/*.log</code></td></tr><tr><td>å¯†ç æ–‡ä»¶</td><td><code>/root/.vnc/passwd</code></td></tr></tbody></table><hr>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RHEL9 </tag>
            
            <tag> VNC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nmap ä½¿ç”¨ä»‹ç»</title>
      <link href="/2025/02/11/namp_scan/"/>
      <url>/2025/02/11/namp_scan/</url>
      
        <content type="html"><![CDATA[<h1 id="Nmap-ä½¿ç”¨ä»‹ç»"><a href="#Nmap-ä½¿ç”¨ä»‹ç»" class="headerlink" title="Nmap ä½¿ç”¨ä»‹ç»"></a>Nmap ä½¿ç”¨ä»‹ç»</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>Nmapï¼ˆNetwork Mapperï¼‰æ˜¯ä¸€æ¬¾å¼€æºçš„ç½‘ç»œæ‰«æå’Œå®‰å…¨å®¡è®¡å·¥å…·ã€‚å®ƒä¸»è¦ç”¨äºå‘ç°ç½‘ç»œä¸»æœºã€æ£€æµ‹å¼€æ”¾ç«¯å£ã€è¯†åˆ«æ“ä½œç³»ç»ŸåŠæœåŠ¡ç­‰ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† Nmap çš„ä½¿ç”¨æ–¹æ³•ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿæœ‰æ•ˆã€å®‰å…¨åœ°è¿›è¡Œç½‘ç»œæ‰«æã€‚</p><hr><h2 id="2-å…ˆå†³æ¡ä»¶"><a href="#2-å…ˆå†³æ¡ä»¶" class="headerlink" title="2. å…ˆå†³æ¡ä»¶"></a>2. å…ˆå†³æ¡ä»¶</h2><ul><li>å·²å®‰è£… Nmapï¼ˆé€‚ç”¨äº Linuxã€Windows å’Œ macOSï¼‰ã€‚</li><li>å…·å¤‡åŸºæœ¬çš„ç½‘ç»œå’Œå®‰å…¨çŸ¥è¯†ã€‚</li><li>å…·å¤‡é€‚å½“çš„æƒé™ï¼ˆæŸäº›æ‰«ææ¨¡å¼éœ€è¦ root æˆ–ç®¡ç†å‘˜æƒé™ï¼‰ã€‚</li></ul><h3 id="2-1-å®‰è£…-Nmap"><a href="#2-1-å®‰è£…-Nmap" class="headerlink" title="2.1 å®‰è£… Nmap"></a>2.1 å®‰è£… Nmap</h3><h4 id="Linuxï¼ˆDebian-Ubuntuï¼‰"><a href="#Linuxï¼ˆDebian-Ubuntuï¼‰" class="headerlink" title="Linuxï¼ˆDebian&#x2F;Ubuntuï¼‰"></a>Linuxï¼ˆDebian&#x2F;Ubuntuï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install nmap -y</span><br></pre></td></tr></table></figure><h4 id="Linuxï¼ˆCentOS-RHELï¼‰"><a href="#Linuxï¼ˆCentOS-RHELï¼‰" class="headerlink" title="Linuxï¼ˆCentOS&#x2F;RHELï¼‰"></a>Linuxï¼ˆCentOS&#x2F;RHELï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install nmap -y</span><br></pre></td></tr></table></figure><h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nmap</span><br></pre></td></tr></table></figure><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>ä¸‹è½½å¹¶å®‰è£… Nmapï¼š<a href="https://nmap.org/download.html">å®˜æ–¹ä¸‹è½½é¡µé¢</a></p><hr><h2 id="3-æ“ä½œæµç¨‹"><a href="#3-æ“ä½œæµç¨‹" class="headerlink" title="3. æ“ä½œæµç¨‹"></a>3. æ“ä½œæµç¨‹</h2><h3 id="3-1-ç›®æ ‡ä¸»æœºå‘ç°"><a href="#3-1-ç›®æ ‡ä¸»æœºå‘ç°" class="headerlink" title="3.1 ç›®æ ‡ä¸»æœºå‘ç°"></a>3.1 ç›®æ ‡ä¸»æœºå‘ç°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn 192.168.1.0/24</span><br></pre></td></tr></table></figure><ul><li><code>-sn</code>ï¼šä»…æ£€æµ‹åœ¨çº¿ä¸»æœºï¼ˆä¸æ‰«æç«¯å£ï¼‰ã€‚</li></ul><h3 id="3-2-ç«¯å£æ‰«æ"><a href="#3-2-ç«¯å£æ‰«æ" class="headerlink" title="3.2 ç«¯å£æ‰«æ"></a>3.2 ç«¯å£æ‰«æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 22,80,443 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>-p</code>ï¼šæŒ‡å®šç«¯å£ï¼ˆå¯è¾“å…¥å•ä¸ªç«¯å£æˆ–ç«¯å£èŒƒå›´ï¼Œå¦‚ <code>1-65535</code>ï¼‰ã€‚</li></ul><h4 id="å¸¸è§å…¬è®¤ç«¯å£ï¼ˆ0-1023ï¼‰"><a href="#å¸¸è§å…¬è®¤ç«¯å£ï¼ˆ0-1023ï¼‰" class="headerlink" title="å¸¸è§å…¬è®¤ç«¯å£ï¼ˆ0-1023ï¼‰"></a><strong>å¸¸è§å…¬è®¤ç«¯å£ï¼ˆ0-1023ï¼‰</strong></h4><table><thead><tr><th>ç«¯å£å·</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>20</td><td>TCP</td><td>FTP æ•°æ®ä¼ è¾“</td></tr><tr><td>21</td><td>TCP</td><td>FTP æ§åˆ¶è¿æ¥</td></tr><tr><td>22</td><td>TCP</td><td>SSH è¿œç¨‹ç™»å½•</td></tr><tr><td>23</td><td>TCP</td><td>Telnet è¿œç¨‹ç™»å½•ï¼ˆä¸å®‰å…¨ï¼‰</td></tr><tr><td>25</td><td>TCP</td><td>SMTPï¼ˆå‘é€é‚®ä»¶ï¼‰</td></tr><tr><td>53</td><td>TCP&#x2F;UDP</td><td>DNSï¼ˆåŸŸåè§£æï¼‰</td></tr><tr><td>67</td><td>UDP</td><td>DHCP æœåŠ¡å™¨ç«¯</td></tr><tr><td>68</td><td>UDP</td><td>DHCP å®¢æˆ·ç«¯</td></tr><tr><td>69</td><td>UDP</td><td>TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“ï¼‰</td></tr><tr><td>80</td><td>TCP</td><td>HTTPï¼ˆç½‘é¡µè®¿é—®ï¼‰</td></tr><tr><td>443</td><td>TCP</td><td>HTTPSï¼ˆåŠ å¯†ç½‘é¡µè®¿é—®ï¼‰</td></tr></tbody></table><h4 id="å¸¸è§æ³¨å†Œç«¯å£ï¼ˆ1024-49151ï¼‰"><a href="#å¸¸è§æ³¨å†Œç«¯å£ï¼ˆ1024-49151ï¼‰" class="headerlink" title="å¸¸è§æ³¨å†Œç«¯å£ï¼ˆ1024-49151ï¼‰"></a><strong>å¸¸è§æ³¨å†Œç«¯å£ï¼ˆ1024-49151ï¼‰</strong></h4><table><thead><tr><th>ç«¯å£å·</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1080</td><td>TCP</td><td>SOCKS ä»£ç†</td></tr><tr><td>1433</td><td>TCP</td><td>Microsoft SQL Server</td></tr><tr><td>1521</td><td>TCP</td><td>Oracle æ•°æ®åº“</td></tr><tr><td>3306</td><td>TCP</td><td>MySQL æ•°æ®åº“</td></tr><tr><td>3389</td><td>TCP</td><td>RDPï¼ˆè¿œç¨‹æ¡Œé¢åè®®ï¼‰</td></tr><tr><td>5900</td><td>TCP</td><td>VNC è¿œç¨‹æ§åˆ¶</td></tr><tr><td>8080</td><td>TCP</td><td>HTTP å¤‡ç”¨ç«¯å£</td></tr><tr><td>9200</td><td>TCP</td><td>Elasticsearch</td></tr></tbody></table><h4 id="IPMI-ç›¸å…³ç«¯å£"><a href="#IPMI-ç›¸å…³ç«¯å£" class="headerlink" title="IPMI ç›¸å…³ç«¯å£"></a><strong>IPMI ç›¸å…³ç«¯å£</strong></h4><table><thead><tr><th>ç«¯å£å·</th><th>åè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>623</td><td>UDP</td><td>IPMI RMCPï¼ˆè¿œç¨‹ç®¡ç†æ§åˆ¶åè®®ï¼‰</td></tr><tr><td>664</td><td>UDP</td><td>IPMI RMCP+ï¼ˆå¢å¼ºç‰ˆè¿œç¨‹ç®¡ç†æ§åˆ¶åè®®ï¼‰</td></tr><tr><td>22</td><td>TCP</td><td>IPMI è¿œç¨‹ SSH è®¿é—®ï¼ˆåŸºäº BMCï¼‰</td></tr><tr><td>80</td><td>TCP</td><td>IPMI Web ç•Œé¢ï¼ˆHTTPï¼‰</td></tr><tr><td>443</td><td>TCP</td><td>IPMI Web ç•Œé¢ï¼ˆHTTPSï¼‰</td></tr></tbody></table><p>å¦‚æœéœ€è¦æ£€æŸ¥ IPMI ç«¯å£æ˜¯å¦å¼€æ”¾ï¼Œå¯ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 623,664,22,80,443 &lt;BMC_IP&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -zv &lt;BMC_IP&gt; 623</span><br></pre></td></tr></table></figure><h3 id="3-3-æœåŠ¡ä¸ç‰ˆæœ¬æ£€æµ‹"><a href="#3-3-æœåŠ¡ä¸ç‰ˆæœ¬æ£€æµ‹" class="headerlink" title="3.3 æœåŠ¡ä¸ç‰ˆæœ¬æ£€æµ‹"></a>3.3 æœåŠ¡ä¸ç‰ˆæœ¬æ£€æµ‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>-sV</code>ï¼šæ¢æµ‹ç«¯å£å¯¹åº”çš„æœåŠ¡åŠç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><h3 id="3-4-æ“ä½œç³»ç»Ÿæ£€æµ‹ï¼ˆéœ€è¦-root-æƒé™ï¼‰"><a href="#3-4-æ“ä½œç³»ç»Ÿæ£€æµ‹ï¼ˆéœ€è¦-root-æƒé™ï¼‰" class="headerlink" title="3.4 æ“ä½œç³»ç»Ÿæ£€æµ‹ï¼ˆéœ€è¦ root æƒé™ï¼‰"></a>3.4 æ“ä½œç³»ç»Ÿæ£€æµ‹ï¼ˆéœ€è¦ root æƒé™ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap -O 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>-O</code>ï¼šå°è¯•è¯†åˆ«è¿œç¨‹ä¸»æœºæ“ä½œç³»ç»Ÿã€‚</li></ul><h3 id="3-5-å…¨ç«¯å£æ‰«æï¼ˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰"><a href="#3-5-å…¨ç«¯å£æ‰«æï¼ˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰" class="headerlink" title="3.5 å…¨ç«¯å£æ‰«æï¼ˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰"></a>3.5 å…¨ç«¯å£æ‰«æï¼ˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p- 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>-p-</code>ï¼šæ‰«ææ‰€æœ‰ 65535 ä¸ªç«¯å£ã€‚</li></ul><h3 id="3-6-è¿è¡Œé»˜è®¤å®‰å…¨è„šæœ¬æ‰«æ"><a href="#3-6-è¿è¡Œé»˜è®¤å®‰å…¨è„šæœ¬æ‰«æ" class="headerlink" title="3.6 è¿è¡Œé»˜è®¤å®‰å…¨è„šæœ¬æ‰«æ"></a>3.6 è¿è¡Œé»˜è®¤å®‰å…¨è„šæœ¬æ‰«æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sC 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>-sC</code>ï¼šè¿è¡Œé»˜è®¤ Nmap è„šæœ¬æ‰«æï¼Œæ£€æµ‹å¸¸è§å®‰å…¨é—®é¢˜ã€‚</li></ul><h3 id="3-7-æ‰§è¡Œæ·±åº¦æ¼æ´æ‰«æï¼ˆéœ€è¦-root-æƒé™ï¼‰"><a href="#3-7-æ‰§è¡Œæ·±åº¦æ¼æ´æ‰«æï¼ˆéœ€è¦-root-æƒé™ï¼‰" class="headerlink" title="3.7 æ‰§è¡Œæ·±åº¦æ¼æ´æ‰«æï¼ˆéœ€è¦ root æƒé™ï¼‰"></a>3.7 æ‰§è¡Œæ·±åº¦æ¼æ´æ‰«æï¼ˆéœ€è¦ root æƒé™ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap --script=vuln 192.168.1.100</span><br></pre></td></tr></table></figure><ul><li><code>--script=vuln</code>ï¼šè¿è¡Œæ¼æ´æ‰«æè„šæœ¬ã€‚</li></ul><h3 id="3-8-ç»“æœå¯¼å‡º"><a href="#3-8-ç»“æœå¯¼å‡º" class="headerlink" title="3.8 ç»“æœå¯¼å‡º"></a>3.8 ç»“æœå¯¼å‡º</h3><h4 id="å¯¼å‡ºä¸ºæ–‡æœ¬æ–‡ä»¶"><a href="#å¯¼å‡ºä¸ºæ–‡æœ¬æ–‡ä»¶" class="headerlink" title="å¯¼å‡ºä¸ºæ–‡æœ¬æ–‡ä»¶"></a>å¯¼å‡ºä¸ºæ–‡æœ¬æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -oN scan_results.txt 192.168.1.100</span><br></pre></td></tr></table></figure><h4 id="å¯¼å‡ºä¸º-XML-æ–‡ä»¶"><a href="#å¯¼å‡ºä¸º-XML-æ–‡ä»¶" class="headerlink" title="å¯¼å‡ºä¸º XML æ–‡ä»¶"></a>å¯¼å‡ºä¸º XML æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -oX scan_results.xml 192.168.1.100</span><br></pre></td></tr></table></figure><hr><h2 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4. å‚è€ƒèµ„æ–™"></a>4. å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://nmap.org/">Nmap å®˜æ–¹ç½‘ç«™</a></li><li><a href="https://nmap.org/book/man.html">Nmap å‘½ä»¤æ‰‹å†Œ</a></li><li><a href="https://nmap.org/nsedoc/">Nmap è„šæœ¬åº“</a></li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Nmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Bash ä¸­éšè—è·¯å¾„ä»¥ç®€åŒ–æç¤ºç¬¦</title>
      <link href="/2024/12/25/bash_directory_config/"/>
      <url>/2024/12/25/bash_directory_config/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-Bash-ä¸­éšè—è·¯å¾„ä»¥ç®€åŒ–æç¤ºç¬¦"><a href="#åœ¨-Bash-ä¸­éšè—è·¯å¾„ä»¥ç®€åŒ–æç¤ºç¬¦" class="headerlink" title="åœ¨ Bash ä¸­éšè—è·¯å¾„ä»¥ç®€åŒ–æç¤ºç¬¦"></a>åœ¨ Bash ä¸­éšè—è·¯å¾„ä»¥ç®€åŒ–æç¤ºç¬¦</h1><p>åœ¨ Bash ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•éšè—è·¯å¾„æˆ–è°ƒæ•´æç¤ºç¬¦ä»¥ç®€åŒ–æ˜¾ç¤ºï¼Œå¹¶ä¿æŒé«˜äº®æ•ˆæœï¼š</p><hr><h3 id="æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰-PS1ï¼ˆPrompt-String-1ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰-PS1ï¼ˆPrompt-String-1ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰ PS1ï¼ˆPrompt String 1ï¼‰"></a>æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰ <code>PS1</code>ï¼ˆPrompt String 1ï¼‰</h3><p><code>PS1</code> æ˜¯ Bash çš„æç¤ºç¬¦å˜é‡ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®å®ƒæ¥å®šåˆ¶æ˜¾ç¤ºå†…å®¹ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\u@\h:~\$ &#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>\u</code>ï¼šæ˜¾ç¤ºç”¨æˆ·åã€‚</li><li><code>\h</code>ï¼šæ˜¾ç¤ºä¸»æœºåã€‚</li><li><code>~</code>ï¼šå§‹ç»ˆæ˜¾ç¤ºä¸º <code>~</code>ï¼Œè€Œä¸æ˜¯å®Œæ•´è·¯å¾„ã€‚</li></ul><p>æ­¤æ—¶ï¼Œæç¤ºç¬¦å°†å˜æˆç±»ä¼¼è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@localhost:~$</span><br></pre></td></tr></table></figure><p>å¦‚æœå¸Œæœ›æ·»åŠ é«˜äº®æ•ˆæœï¼Œå¯ä»¥åŠ å…¥é¢œè‰²ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\[\033[1;32m\]\u@\h:\[\033[1;34m\]~\[\033[0m\]\$ &#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>\[\033[1;32m\]</code>ï¼šè®¾ç½®ç»¿è‰²é«˜äº®ï¼ˆç”¨æˆ·åå’Œä¸»æœºåï¼‰ã€‚</li><li><code>\[\033[1;34m\]</code>ï¼šè®¾ç½®è“è‰²é«˜äº®ï¼ˆè·¯å¾„ï¼‰ã€‚</li><li><code>\[\033[0m\]</code>ï¼šé‡ç½®é¢œè‰²ï¼Œé¿å…å½±å“åç»­è¾“å‡ºã€‚</li></ul><hr><h3 id="æ–¹æ³•äºŒï¼šæ˜¾ç¤ºç›¸å¯¹è·¯å¾„"><a href="#æ–¹æ³•äºŒï¼šæ˜¾ç¤ºç›¸å¯¹è·¯å¾„" class="headerlink" title="æ–¹æ³•äºŒï¼šæ˜¾ç¤ºç›¸å¯¹è·¯å¾„"></a>æ–¹æ³•äºŒï¼šæ˜¾ç¤ºç›¸å¯¹è·¯å¾„</h3><p>è®©è·¯å¾„åªæ˜¾ç¤ºç›¸å¯¹äºä¸»ç›®å½•çš„å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\u@\h:\w\$ &#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>\w</code>ï¼šæ˜¾ç¤ºå½“å‰è·¯å¾„ï¼Œä½†ç”¨ <code>~</code> æ›¿ä»£ä¸»ç›®å½•è·¯å¾„ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@localhost:~/log$</span><br></pre></td></tr></table></figure><p>å¦‚æœå¸Œæœ›ä¿æŒé«˜äº®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\[\033[1;32m\]\u@\h:\[\033[1;34m\]\w\[\033[0m\]\$ &#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ–¹æ³•ä¸‰ï¼šå®Œå…¨éšè—è·¯å¾„"><a href="#æ–¹æ³•ä¸‰ï¼šå®Œå…¨éšè—è·¯å¾„" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šå®Œå…¨éšè—è·¯å¾„"></a>æ–¹æ³•ä¸‰ï¼šå®Œå…¨éšè—è·¯å¾„</h3><p>å¦‚æœä½ æƒ³å®Œå…¨éšè—è·¯å¾„ï¼Œåªæ˜¾ç¤ºç”¨æˆ·åå’Œä¸»æœºåï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\u@\h\$ &#x27;</span></span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@localhost$</span><br></pre></td></tr></table></figure><p>ä¸ºæ¢å¤é«˜äº®ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\[\033[1;32m\]\u@\h\[\033[0m\]\$ &#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ–¹æ³•å››ï¼šè®¾ç½®ä¸ºç®€çŸ­è·¯å¾„"><a href="#æ–¹æ³•å››ï¼šè®¾ç½®ä¸ºç®€çŸ­è·¯å¾„" class="headerlink" title="æ–¹æ³•å››ï¼šè®¾ç½®ä¸ºç®€çŸ­è·¯å¾„"></a>æ–¹æ³•å››ï¼šè®¾ç½®ä¸ºç®€çŸ­è·¯å¾„</h3><p>å¦‚æœä½ åªæƒ³æ˜¾ç¤ºç›®å½•åï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\u@\h:\W\$ &#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>\W</code>ï¼šä»…æ˜¾ç¤ºå½“å‰ç›®å½•åã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@localhost:stress$</span><br></pre></td></tr></table></figure><p>ä¸ºæ·»åŠ é«˜äº®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\[\033[1;32m\]\u@\h:\[\033[1;34m\]\W\[\033[0m\]\$ &#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ–¹æ³•äº”ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤é«˜äº®æç¤ºç¬¦"><a href="#æ–¹æ³•äº”ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤é«˜äº®æç¤ºç¬¦" class="headerlink" title="æ–¹æ³•äº”ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤é«˜äº®æç¤ºç¬¦"></a>æ–¹æ³•äº”ï¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤é«˜äº®æç¤ºç¬¦</h3><p>å¦‚æœä¸æƒ³æ‰‹åŠ¨è®¾ç½®é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æç¤ºç¬¦æ ·å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&#x27;\[\e]0;\u@\h: \w\a\]\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\W\[\033[00m\]\$ &#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="æŒä¹…åŒ–é…ç½®"><a href="#æŒä¹…åŒ–é…ç½®" class="headerlink" title="æŒä¹…åŒ–é…ç½®"></a>æŒä¹…åŒ–é…ç½®</h3><p>å¦‚æœéœ€è¦æ¯æ¬¡å¯åŠ¨ Bash éƒ½åº”ç”¨è®¾ç½®ï¼Œå¯ä»¥å°†ä¸Šè¿°å‘½ä»¤åŠ å…¥ <code>~/.bashrc</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PS1=&#x27;\[\033[1;32m\]\u@\h:\[\033[1;34m\]\W\[\033[0m\]\$ &#x27;&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><hr><h3 id="æµ‹è¯•ç»ˆç«¯é¢œè‰²æ”¯æŒ"><a href="#æµ‹è¯•ç»ˆç«¯é¢œè‰²æ”¯æŒ" class="headerlink" title="æµ‹è¯•ç»ˆç«¯é¢œè‰²æ”¯æŒ"></a>æµ‹è¯•ç»ˆç«¯é¢œè‰²æ”¯æŒ</h3><p>ç¡®ä¿ä½ çš„ç»ˆç«¯æ”¯æŒ ANSI è½¬ä¹‰åºåˆ—ï¼ˆå¤§å¤šæ•°ç°ä»£ç»ˆç«¯éƒ½æ”¯æŒï¼Œä¾‹å¦‚ GNOME Terminalã€Konsole ç­‰ï¼‰ã€‚</p><p>æµ‹è¯•é¢œè‰²æ”¯æŒçš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[1;32mç»¿è‰²é«˜äº®\033[0m å’Œ \033[1;34mè“è‰²é«˜äº®\033[0m&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> BASH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³RHEL9 Home åˆ†åŒºä¸¢å¤±å¯¼è‡´è¿›å…¥emergency mode</title>
      <link href="/2024/12/23/RHEL9_home_partition_lost_solution/"/>
      <url>/2024/12/23/RHEL9_home_partition_lost_solution/</url>
      
        <content type="html"><![CDATA[<h1 id="è§£å†³RHEL9-Home-åˆ†åŒºä¸¢å¤±å¯¼è‡´è¿›å…¥emergency-mode"><a href="#è§£å†³RHEL9-Home-åˆ†åŒºä¸¢å¤±å¯¼è‡´è¿›å…¥emergency-mode" class="headerlink" title="è§£å†³RHEL9 Home åˆ†åŒºä¸¢å¤±å¯¼è‡´è¿›å…¥emergency mode"></a>è§£å†³RHEL9 Home åˆ†åŒºä¸¢å¤±å¯¼è‡´è¿›å…¥emergency mode</h1><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a><strong>é€‚ç”¨åœºæ™¯</strong></h4><ul><li>ç³»ç»Ÿè¿›å…¥ç´§æ€¥æ¨¡å¼ã€‚  </li><li>éœ€è¦ä¿®å¤LVMè®¾å¤‡é…ç½®æ–‡ä»¶é—®é¢˜ï¼ŒE.g. &#x2F;home åˆ†åŒºä¸¢å¤±ã€‚</li></ul><h4 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a><strong>æ“ä½œæ­¥éª¤</strong></h4><ol><li>åˆ é™¤æŸåçš„è®¾å¤‡æ–‡ä»¶ï¼š  <pre><code class="bash">rm /etc/lvm/devices/system.devices  </code></pre></li><li>åˆ›å»ºæ–°çš„è®¾å¤‡æ–‡ä»¶ï¼š  <pre><code class="bash">vgimportdevices -a  </code></pre></li></ol><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a><strong>æ³¨æ„äº‹é¡¹</strong></h4><ul><li>æ‰§è¡Œæ“ä½œå‰ç¡®ä¿æœ‰ç³»ç»Ÿå¤‡ä»½ã€‚  </li><li>é€‚ç”¨äºLVMç›¸å…³é…ç½®é—®é¢˜ã€‚</li></ul><p>æ›´å¤šè¯¦æƒ…å‚è€ƒåŸæ–‡ï¼š<a href="https://portal.nutanix.com/page/documents/kbs/details?targetId=kA07V000000LaGrSAK">NutanixçŸ¥è¯†åº“</a>ã€‚  </p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> RHEL9 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RHEL9 å¯ç”¨OSä¸²å£(Serial Port)ä¿¡æ¯è¾“å‡º</title>
      <link href="/2024/12/22/enable_rhel9_os_serial_output/"/>
      <url>/2024/12/22/enable_rhel9_os_serial_output/</url>
      
        <content type="html"><![CDATA[<h1 id="RHEL9-å¯ç”¨OSä¸²å£ä¿¡æ¯è¾“å‡º"><a href="#RHEL9-å¯ç”¨OSä¸²å£ä¿¡æ¯è¾“å‡º" class="headerlink" title="RHEL9 å¯ç”¨OSä¸²å£ä¿¡æ¯è¾“å‡º"></a>RHEL9 å¯ç”¨OSä¸²å£ä¿¡æ¯è¾“å‡º</h1><p>åŸºäº RHEL çš„ç³»ç»Ÿä¸Šä¿®æ”¹ GRUB é…ç½®ä»¥è°ƒæ•´å†…æ ¸å¯åŠ¨å‚æ•°ï¼š</p><ol><li><p><strong>å¤‡ä»½ç°æœ‰çš„ GRUB é…ç½®æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /etc/default/grub /etc/default/grub.bak</span><br></pre></td></tr></table></figure><p>å°†åŸå§‹çš„ GRUB é…ç½®æ–‡ä»¶ <code>/etc/default/grub</code> å¤‡ä»½ä¸º <code>/etc/default/grub.bak</code>ã€‚</p></li><li><p><strong>ä¿®æ”¹ GRUB é…ç½®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&quot;s/quiet/loglevel=8 console=tty1 console=ttyS1,115200n8/g&quot;</span> /etc/default/grub</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>sed</code> å‘½ä»¤æŸ¥æ‰¾å¹¶æ›¿æ¢æ–‡ä»¶ä¸­çš„å†…å®¹ï¼š</p><ul><li>å°† <code>quiet</code> å‚æ•°æ›¿æ¢ä¸º <code>loglevel=8 console=tty1 console=ttyS1,115200n8</code>ã€‚</li><li>è¿™ä¼šå¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡º (<code>loglevel=8</code>)ï¼Œå¹¶å°†è¾“å‡ºåŒæ—¶å‘é€åˆ° <code>tty1</code> å’Œä¸²å£ <code>ttyS1</code>ï¼Œé€Ÿç‡ä¸º 115200 æ³¢ç‰¹ç‡ï¼Œ8 ä¸ªæ•°æ®ä½ï¼Œæ— æ ¡éªŒä½ï¼Œ1 ä¸ªåœæ­¢ä½ã€‚</li></ul></li><li><p><strong>é‡æ–°ç”Ÿæˆ GRUB é…ç½®æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg --update-bls-cmdline</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>grub2-mkconfig</code> ç”Ÿæˆæ–°çš„ GRUB é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ <code>/boot/efi/EFI/redhat/grub.cfg</code>ã€‚  </p><ul><li>é€‰é¡¹ <code>--update-bls-cmdline</code> ç”¨äºæ›´æ–° Boot Loader Specification (BLS) æ¡ç›®ã€‚</li></ul></li></ol><h3 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h3><ul><li><strong>è·¯å¾„æ­£ç¡®æ€§</strong>ï¼šç¡®ä¿ä½ çš„ GRUB é…ç½®è·¯å¾„æ˜¯ <code>/boot/efi/EFI/redhat/grub.cfg</code>ã€‚å¦‚æœä½ çš„ç³»ç»Ÿè·¯å¾„ä¸åŒï¼Œéœ€è¦è°ƒæ•´ä¸ºé€‚åˆä½ çš„å®é™…ç¯å¢ƒã€‚</li><li><strong>BIOS æˆ– UEFI</strong>ï¼šæ­¤è·¯å¾„é€‚ç”¨äº UEFI å¼•å¯¼ã€‚å¦‚æœæ˜¯ä¼ ç»Ÿ BIOS å¼•å¯¼ï¼Œå¯èƒ½éœ€è¦å°†é…ç½®æ–‡ä»¶è·¯å¾„ä¿®æ”¹ä¸º <code>/boot/grub2/grub.cfg</code>ã€‚</li><li><strong>å¤‡ä»½</strong>ï¼šåœ¨ä¿®æ”¹é…ç½®å‰ä¸€å®šè¦å¤‡ä»½ï¼Œä»¥é˜²æ­¢é…ç½®é”™è¯¯å¯¼è‡´æ— æ³•å¯åŠ¨ã€‚</li><li><strong>éªŒè¯</strong>ï¼šä¿®æ”¹å®Œæˆåå»ºè®®é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;loglevel|console&quot;</span> /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure></li></ul><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œé‡å¯ç³»ç»ŸéªŒè¯æ–°å‚æ•°æ˜¯å¦ç”Ÿæ•ˆå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Serial </tag>
            
            <tag> RHEL </tag>
            
            <tag> Kernel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux bridge ä¸deviceå¯¹åº”å…³ç³»</title>
      <link href="/2024/11/24/lspci_bridge_devices/"/>
      <url>/2024/11/24/lspci_bridge_devices/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-bridge-ä¸deviceå¯¹åº”å…³ç³»"><a href="#Linux-bridge-ä¸deviceå¯¹åº”å…³ç³»" class="headerlink" title="Linux bridge ä¸deviceå¯¹åº”å…³ç³»"></a>Linux bridge ä¸deviceå¯¹åº”å…³ç³»</h1><p><code>lspci</code> æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨äºåˆ—å‡ºæ‰€æœ‰ PCI è®¾å¤‡ä¿¡æ¯çš„å‘½ä»¤ã€‚<code>-t</code> å’Œ <code>-t -v</code> æ˜¯ <code>lspci</code> å‘½ä»¤çš„ä¸¤ç§ä¸åŒå‚æ•°ç»„åˆï¼Œå®ƒä»¬åˆ†åˆ«æä¾›ä¸åŒçº§åˆ«çš„è®¾å¤‡æ ‘ä¿¡æ¯å’Œè¯¦ç»†æè¿°ã€‚</p><h3 id="1-lspci-t-å‘½ä»¤"><a href="#1-lspci-t-å‘½ä»¤" class="headerlink" title="1. lspci -t å‘½ä»¤"></a>1. <code>lspci -t</code> å‘½ä»¤</h3><p><code>lspci -t</code> å‘½ä»¤ä»¥æ ‘çŠ¶ç»“æ„çš„æ–¹å¼æ˜¾ç¤ºæ‰€æœ‰ PCI è®¾å¤‡çš„å±‚æ¬¡å…³ç³»ã€‚è¿™ç§æ ¼å¼æœ‰åŠ©äºäº†è§£è®¾å¤‡ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œä¾‹å¦‚å“ªä¸ªè®¾å¤‡æ˜¯å“ªä¸ªè®¾å¤‡çš„ä»å±è®¾å¤‡ã€‚å®ƒä¸æ˜¾ç¤ºè®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œä»…æ˜¾ç¤ºè®¾å¤‡çš„å±‚æ¬¡ç»“æ„ã€‚</p><p><strong>ç¤ºä¾‹è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root@DMIT-tigyEICHBB:~# lspci -t</span><br><span class="line">-[0000:00]-+-00.0</span><br><span class="line">           +-01.0</span><br><span class="line">           +-1a.0</span><br><span class="line">           +-1a.1</span><br><span class="line">           +-1a.2</span><br><span class="line">           +-1a.7</span><br><span class="line">           +-1b.0</span><br><span class="line">           +-1c.0-[01]--</span><br><span class="line">           +-1c.1-[02]--</span><br><span class="line">           +-1c.2-[03]--</span><br><span class="line">           +-1c.3-[04]--</span><br><span class="line">           +-1d.0</span><br><span class="line">           +-1d.1</span><br><span class="line">           +-1d.2</span><br><span class="line">           +-1d.7</span><br><span class="line">           +-1e.0-[05-09]--+-01.0-[06]--+-03.0</span><br><span class="line">           |               |            +-04.0</span><br><span class="line">           |               |            +-07.0</span><br><span class="line">           |               |            +-08.0</span><br><span class="line">           |               |            +-0a.0</span><br><span class="line">           |               |            \-12.0</span><br><span class="line">           |               +-02.0-[07]--</span><br><span class="line">           |               +-03.0-[08]--</span><br><span class="line">           |               \-04.0-[09]--</span><br><span class="line">           +-1f.0</span><br><span class="line">           +-1f.2</span><br><span class="line">           \-1f.3</span><br></pre></td></tr></table></figure><p>è¯¥è¾“å‡ºæ˜¾ç¤ºäº†ä¸€ä¸ª PCI è®¾å¤‡æ ‘çš„å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­ï¼š</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ª PCI è®¾å¤‡ã€‚</li><li>å„çº§èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥è¡¨ç¤ºçˆ¶å­è®¾å¤‡å…³ç³»ï¼Œä¾‹å¦‚ <code>-[0000:00]-+-00.0</code> è¡¨ç¤ºè®¾å¤‡ <code>00.0</code> æ˜¯æ ¹è®¾å¤‡ <code>0000:00</code> çš„å­è®¾å¤‡ã€‚</li></ul><h3 id="2-lspci-t-v-å‘½ä»¤"><a href="#2-lspci-t-v-å‘½ä»¤" class="headerlink" title="2. lspci -t -v å‘½ä»¤"></a>2. <code>lspci -t -v</code> å‘½ä»¤</h3><p><code>lspci -t -v</code> å‘½ä»¤åœ¨æ˜¾ç¤ºè®¾å¤‡æ ‘ç»“æ„çš„åŒæ—¶ï¼Œè¿˜æä¾›äº†æ›´å¤šçš„è¯¦ç»†ä¿¡æ¯ï¼Œé€šå¸¸åŒ…æ‹¬æ¯ä¸ª PCI è®¾å¤‡çš„å‹å·ã€å‚å•†ã€é©±åŠ¨ä¿¡æ¯ç­‰ã€‚è¿™äº›è¯¦ç»†ä¿¡æ¯æœ‰åŠ©äºè¿›ä¸€æ­¥äº†è§£è®¾å¤‡çš„é…ç½®å’Œå±æ€§ã€‚</p><p><strong>ç¤ºä¾‹è¾“å‡ºï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root@DMIT-tigyEICHBB:~# lspci -t -v</span><br><span class="line">-[0000:00]-+-00.0  Intel Corporation 82G33/G31/P35/P31 Express DRAM Controller</span><br><span class="line">           +-01.0  Device 1234:1111</span><br><span class="line">           +-1a.0  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #4</span><br><span class="line">           +-1a.1  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #5</span><br><span class="line">           +-1a.2  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #6</span><br><span class="line">           +-1a.7  Intel Corporation 82801I (ICH9 Family) USB2 EHCI Controller #2</span><br><span class="line">           +-1b.0  Intel Corporation 82801I (ICH9 Family) HD Audio Controller</span><br><span class="line">           +-1c.0-[01]--</span><br><span class="line">           +-1c.1-[02]--</span><br><span class="line">           +-1c.2-[03]--</span><br><span class="line">           +-1c.3-[04]--</span><br><span class="line">           +-1d.0  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #1</span><br><span class="line">           +-1d.1  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #2</span><br><span class="line">           +-1d.2  Intel Corporation 82801I (ICH9 Family) USB UHCI Controller #3</span><br><span class="line">           +-1d.7  Intel Corporation 82801I (ICH9 Family) USB2 EHCI Controller #1</span><br><span class="line">           +-1e.0-[05-09]--+-01.0-[06]--+-03.0  Red Hat, Inc. Virtio memory balloon</span><br><span class="line">           |               |            +-04.0  Intel Corporation 6300ESB Watchdog Timer</span><br><span class="line">           |               |            +-07.0  Intel Corporation 82801IR/IO/IH (ICH9R/DO/DH) 6 port SATA Controller [AHCI mode]</span><br><span class="line">           |               |            +-08.0  Red Hat, Inc. Virtio console</span><br><span class="line">           |               |            +-0a.0  Red Hat, Inc. Virtio block device</span><br><span class="line">           |               |            \-12.0  Red Hat, Inc. Virtio network device</span><br><span class="line">           |               +-02.0-[07]--</span><br><span class="line">           |               +-03.0-[08]--</span><br><span class="line">           |               \-04.0-[09]--</span><br><span class="line">           +-1f.0  Intel Corporation 82801IB (ICH9) LPC Interface Controller</span><br><span class="line">           +-1f.2  Intel Corporation 82801IR/IO/IH (ICH9R/DO/DH) 6 port SATA Controller [AHCI mode]</span><br><span class="line">           \-1f.3  Intel Corporation 82801I (ICH9 Family) SMBus Controller</span><br></pre></td></tr></table></figure><p>è¯¥è¾“å‡ºé™¤äº†æ˜¾ç¤ºè®¾å¤‡çš„æ ‘çŠ¶ç»“æ„å¤–ï¼Œè¿˜æä¾›äº†æ¯ä¸ª PCI è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ï¼š</p><ul><li><code>00.0  Intel Corporation 82G33/G31/P35/P31 Express DRAM Controller</code> è¡¨ç¤ºè¯¥è®¾å¤‡æ˜¯ Intel çš„ DRAM æ§åˆ¶å™¨ã€‚</li><li><code>Device 1234:1111</code> è¡¨ç¤ºè¯¥è®¾å¤‡çš„ PCI è®¾å¤‡å’Œä¾›åº”å•† IDã€‚</li><li><code>Red Hat, Inc. Virtio memory balloon</code> åˆ™æ˜¾ç¤ºäº†è™šæ‹ŸåŒ–ç›¸å…³çš„è®¾å¤‡ä¿¡æ¯ã€‚</li></ul><p><code>lspci -t -v -s 06:03.0</code> è¿™ä¸ªå‘½ä»¤åœ¨åŸæœ‰ <code>lspci -t -v</code> çš„åŸºç¡€ä¸Šï¼ŒåŠ å…¥äº† <code>-s</code> é€‰é¡¹ï¼Œå®ƒä¼šæ˜¾ç¤ºæŒ‡å®šè®¾å¤‡çš„ä¿¡æ¯ã€‚<code>-s</code> åé¢è·Ÿçš„æ˜¯è®¾å¤‡çš„ PCI åœ°å€ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>06:03.0</code> æ˜¯ä¸€ä¸ª PCI è®¾å¤‡çš„åœ°å€ï¼Œè¡¨ç¤ºè¯¥è®¾å¤‡ä½äºæ€»çº¿ 06 ä¸Šï¼Œè®¾å¤‡ç¼–å·ä¸º 03ï¼ˆå³ <code>06:03.0</code>ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ¥è·å–è¯¥è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h3 id="3-lspci-t-v-s-å‘½ä»¤"><a href="#3-lspci-t-v-s-å‘½ä»¤" class="headerlink" title="3. lspci -t -v -s å‘½ä»¤"></a>3. <code>lspci -t -v -s</code> å‘½ä»¤</h3><p>è¿™ä¸ªå‘½ä»¤ä¼šå…ˆå±•ç¤º PCI æ ‘çš„å±‚çº§ç»“æ„ï¼Œç„¶åæ˜¾ç¤ºè®¾å¤‡ çš„è¯¦ç»†ä¿¡æ¯ã€‚å…·ä½“æ‰©å±•å¦‚ä¸‹ï¼š</p><ol><li><p><strong>æ ‘å½¢ç»“æ„</strong>ï¼š<br>åœ¨ <code>lspci -t</code> å‘½ä»¤ä¸­ï¼Œæ¯ä¸ªè®¾å¤‡çš„å±‚çº§å…³ç³»æ˜¯é€šè¿‡ PCI æ€»çº¿åœ°å€æ¥è¡¨ç¤ºçš„ã€‚æ ‘å½¢ç»“æ„å¸®åŠ©æˆ‘ä»¬äº†è§£è®¾å¤‡åœ¨ PCI æ€»çº¿ä¸Šçš„å±‚çº§å’Œä¾èµ–å…³ç³»ã€‚</p></li><li><p><strong><code>-s</code> é€‰é¡¹</strong>ï¼š<br><code>-s</code> é€‰é¡¹ç”¨äºç­›é€‰å’ŒæŒ‡å®šæŸä¸ªè®¾å¤‡ã€‚å®ƒåé¢è·Ÿçš„æ˜¯ PCI åœ°å€ï¼ˆå¦‚ <code>06:03.0</code>ï¼‰ï¼Œè¡¨ç¤ºæˆ‘ä»¬åªæŸ¥çœ‹è¿™ä¸ªå…·ä½“è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ã€‚</p></li><li><p><strong>è®¾å¤‡è¯¦ç»†ä¿¡æ¯</strong>ï¼š<br>åœ¨ä½¿ç”¨ <code>-v</code> é€‰é¡¹æ—¶ï¼Œè¾“å‡ºä¼šæ˜¾ç¤ºè®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å‚å•† IDã€è®¾å¤‡ IDã€è®¾å¤‡åŠŸèƒ½ã€èµ„æºåˆ†é…ç­‰ã€‚</p></li></ol><h4 id="ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¿è¡Œå‘½ä»¤ï¼š"><a href="#ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¿è¡Œå‘½ä»¤ï¼š" class="headerlink" title="ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¿è¡Œå‘½ä»¤ï¼š"></a>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬è¿è¡Œå‘½ä»¤ï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -t -v -s 06:03.0</span><br></pre></td></tr></table></figure><p>è¾“å‡ºå¯èƒ½ç±»ä¼¼äºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-[0000:06]--+-03.0  Red Hat, Inc. Virtio network device</span><br><span class="line">           +-03.1  Intel Corporation 82801IR/IO/IH (ICH9R/DO/DH) 6 port SATA Controller [AHCI mode]</span><br></pre></td></tr></table></figure><ul><li><code>-[0000:06]</code> è¡¨ç¤º PCI æ€»çº¿ 06ã€‚</li><li><code>+-03.0</code> è®¾å¤‡ä½äºæ€»çº¿ 06 ä¸Šï¼Œç¼–å·ä¸º 03ï¼Œè®¾å¤‡æ˜¯ Red Hat çš„ Virtio ç½‘ç»œè®¾å¤‡ã€‚</li><li><code>-03.1</code> è¡¨ç¤ºå¦å¤–ä¸€ä¸ªè®¾å¤‡ï¼Œä¹Ÿæ˜¯ PCI æ€»çº¿ 06 ä¸Šçš„ä¸€ä¸ªè®¾å¤‡ï¼Œè®¾å¤‡ç¼–å·ä¸º 03.1ã€‚</li><li><strong><code>lspci -t -v -s &lt;address&gt;</code></strong> å‘½ä»¤å¯ä»¥è®©ä½ æŸ¥çœ‹ PCI è®¾å¤‡æ ‘çš„å±‚çº§ç»“æ„å¹¶è·å–æŒ‡å®šè®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ã€‚</li><li>ä½¿ç”¨ <code>-v</code> é€‰é¡¹æ—¶ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªè®¾å¤‡çš„è¯¦ç»†å±æ€§ï¼Œæ¯”å¦‚è®¾å¤‡ç±»å‹ã€èµ„æºåˆ†é…ã€é©±åŠ¨ç¨‹åºç­‰ã€‚</li><li><code>-s</code> é€‰é¡¹ç”¨äºæŒ‡å®šè®¾å¤‡åœ°å€ï¼Œä»è€ŒæŸ¥çœ‹è¯¥è®¾å¤‡çš„å…·ä½“ä¿¡æ¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TPMæ•°æ®å°å­˜ä¸è§£å°</title>
      <link href="/2024/11/07/tpm_seal_and_unseal/"/>
      <url>/2024/11/07/tpm_seal_and_unseal/</url>
      
        <content type="html"><![CDATA[<h1 id="TPM-æ•°æ®å°å­˜ä¸è§£å°"><a href="#TPM-æ•°æ®å°å­˜ä¸è§£å°" class="headerlink" title="TPM æ•°æ®å°å­˜ä¸è§£å°"></a>TPM æ•°æ®å°å­˜ä¸è§£å°</h1><hr><p>ä»¥ä¸‹æ˜¯ä¸¤ç§ä½¿ç”¨ TPM å°å­˜å’Œè§£å°æ•°æ®çš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„ Primary Key ä½œä¸ºçˆ¶å¯†é’¥ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨ Endorsement Key (EK) å’Œ Storage Root Key (SRK) çš„ç»„åˆã€‚å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚</p><h2 id="æ–¹å¼ä¸€ï¼šä½¿ç”¨-Primary-Key-è¿›è¡Œå°å­˜å’Œè§£å°"><a href="#æ–¹å¼ä¸€ï¼šä½¿ç”¨-Primary-Key-è¿›è¡Œå°å­˜å’Œè§£å°" class="headerlink" title="æ–¹å¼ä¸€ï¼šä½¿ç”¨ Primary Key è¿›è¡Œå°å­˜å’Œè§£å°"></a>æ–¹å¼ä¸€ï¼šä½¿ç”¨ Primary Key è¿›è¡Œå°å­˜å’Œè§£å°</h2><h3 id="1-æ¸…é™¤-TPM-å¹¶è®¾ç½®å¯†ç ï¼ˆå¦‚æœå°šæœªè®¾ç½®ï¼‰"><a href="#1-æ¸…é™¤-TPM-å¹¶è®¾ç½®å¯†ç ï¼ˆå¦‚æœå°šæœªè®¾ç½®ï¼‰" class="headerlink" title="1. æ¸…é™¤ TPM å¹¶è®¾ç½®å¯†ç ï¼ˆå¦‚æœå°šæœªè®¾ç½®ï¼‰"></a>1. æ¸…é™¤ TPM å¹¶è®¾ç½®å¯†ç ï¼ˆå¦‚æœå°šæœªè®¾ç½®ï¼‰</h3><p>ç¡®ä¿ TPM çš„çŠ¶æ€æ˜¯æ¸…é™¤çš„ï¼Œå¹¶è®¾ç½® Owner å¯†ç ï¼ˆä¾‹å¦‚ <code>111111</code>ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tpm2_clear</span><br><span class="line">tpm2_changeauth -c o 111111</span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»º-Primary-Key"><a href="#2-åˆ›å»º-Primary-Key" class="headerlink" title="2. åˆ›å»º Primary Key"></a>2. åˆ›å»º Primary Key</h3><p>åœ¨ TPM ä¸­åˆ›å»ºä¸€ä¸ª Primary Keyï¼Œä½œä¸ºå°å­˜å¯¹è±¡çš„çˆ¶å¯†é’¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_createprimary -C o -c primary.ctx -P 111111</span><br></pre></td></tr></table></figure><ul><li><code>-C o</code>ï¼šæŒ‡å®šä½¿ç”¨ Owner å±‚çº§ã€‚</li><li><code>-c primary.ctx</code>ï¼šå°† Primary Key çš„ä¸Šä¸‹æ–‡ä¿å­˜åˆ° <code>primary.ctx</code> æ–‡ä»¶ä¸­ã€‚</li><li><code>-P 111111</code>ï¼šè®¾ç½® Primary Key çš„å¯†ç ã€‚</li></ul><h3 id="3-å°å­˜ï¼ˆSealï¼‰æ•°æ®åˆ°-TPM"><a href="#3-å°å­˜ï¼ˆSealï¼‰æ•°æ®åˆ°-TPM" class="headerlink" title="3. å°å­˜ï¼ˆSealï¼‰æ•°æ®åˆ° TPM"></a>3. å°å­˜ï¼ˆSealï¼‰æ•°æ®åˆ° TPM</h3><p>å°†è¦å°å­˜çš„æ•°æ®ï¼ˆå¦‚ <code>secret.txt</code> æ–‡ä»¶ä¸­çš„å†…å®¹ï¼‰å­˜å‚¨åˆ° TPM ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;my_secret_data&quot;</span> &gt; secret.txt</span><br><span class="line">tpm2_create -C primary.ctx -u seal.pub -r seal.priv -i secret.txt</span><br></pre></td></tr></table></figure><ul><li><code>-C primary.ctx</code>ï¼šæŒ‡å®šä½¿ç”¨ Primary Key ä½œä¸ºçˆ¶å¯†é’¥ã€‚</li><li><code>-u seal.pub</code> å’Œ <code>-r seal.priv</code>ï¼šåˆ†åˆ«ä¿å­˜ç”Ÿæˆçš„å…¬é’¥å’Œç§é’¥ã€‚</li><li><code>-i secret.txt</code>ï¼šå°† <code>secret.txt</code> æ–‡ä»¶ä¸­çš„æ•°æ®å°å­˜åˆ° TPM ä¸­ã€‚</li></ul><h3 id="4-åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡åˆ°-TPM"><a href="#4-åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡åˆ°-TPM" class="headerlink" title="4. åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡åˆ° TPM"></a>4. åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡åˆ° TPM</h3><p>å°†å°å­˜å¯¹è±¡åŠ è½½åˆ° TPMï¼Œä»¥ä¾¿åç»­å¯ä»¥è¿›è¡Œè§£å°æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_load -C primary.ctx -u seal.pub -r seal.priv -c seal.ctx</span><br></pre></td></tr></table></figure><ul><li><code>-C primary.ctx</code>ï¼šæŒ‡å®šä½¿ç”¨ Primary Key ä½œä¸ºçˆ¶å¯†é’¥ã€‚</li><li><code>-u seal.pub</code> å’Œ <code>-r seal.priv</code>ï¼šåŠ è½½å°å­˜å¯¹è±¡çš„å…¬ç§é’¥ã€‚</li><li><code>-c seal.ctx</code>ï¼šç”Ÿæˆå¯†é’¥çš„ä¸Šä¸‹æ–‡æ–‡ä»¶ <code>seal.ctx</code>ã€‚</li></ul><h3 id="5-è§£å°ï¼ˆUnsealï¼‰æ•°æ®"><a href="#5-è§£å°ï¼ˆUnsealï¼‰æ•°æ®" class="headerlink" title="5. è§£å°ï¼ˆUnsealï¼‰æ•°æ®"></a>5. è§£å°ï¼ˆUnsealï¼‰æ•°æ®</h3><p>ä» TPM ä¸­è§£å°æ•°æ®å¹¶è¾“å‡ºåˆ°æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_unseal -c seal.ctx &gt; unsealed_data.txt</span><br></pre></td></tr></table></figure><ul><li><code>-c seal.ctx</code>ï¼šæŒ‡å®šå°å­˜å¯¹è±¡çš„ä¸Šä¸‹æ–‡æ–‡ä»¶ã€‚</li><li><code>&gt; unsealed_data.txt</code>ï¼šå°†è§£å°çš„æ•°æ®ä¿å­˜åˆ° <code>unsealed_data.txt</code> æ–‡ä»¶ä¸­ã€‚</li></ul><hr><h1 id="æ–¹å¼äºŒï¼šä½¿ç”¨-Endorsement-Key-EK-å’Œ-Storage-Root-Key-SRK-è¿›è¡Œå°å­˜å’Œè§£å°"><a href="#æ–¹å¼äºŒï¼šä½¿ç”¨-Endorsement-Key-EK-å’Œ-Storage-Root-Key-SRK-è¿›è¡Œå°å­˜å’Œè§£å°" class="headerlink" title="æ–¹å¼äºŒï¼šä½¿ç”¨ Endorsement Key (EK) å’Œ Storage Root Key (SRK) è¿›è¡Œå°å­˜å’Œè§£å°"></a>æ–¹å¼äºŒï¼šä½¿ç”¨ Endorsement Key (EK) å’Œ Storage Root Key (SRK) è¿›è¡Œå°å­˜å’Œè§£å°</h1><h3 id="1-æ¸…é™¤-TPM-å¹¶è®¾ç½®å¯†ç "><a href="#1-æ¸…é™¤-TPM-å¹¶è®¾ç½®å¯†ç " class="headerlink" title="1. æ¸…é™¤ TPM å¹¶è®¾ç½®å¯†ç "></a>1. æ¸…é™¤ TPM å¹¶è®¾ç½®å¯†ç </h3><p>æ¸…é™¤ TPMï¼Œç¡®ä¿ TPM çš„çŠ¶æ€æ˜¯å¹²å‡€çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tpm2_clear</span><br><span class="line">tpm2_changeauth -c o 111111</span><br><span class="line">tpm2_changeauth -c e 111111</span><br></pre></td></tr></table></figure><ul><li><code>tpm2_clear</code>ï¼šæ¸…é™¤ TPMã€‚</li><li><code>tpm2_changeauth -c o 111111</code>ï¼šè®¾ç½® Owner å¯†ç ä¸º <code>111111</code>ã€‚</li><li><code>tpm2_changeauth -c e 111111</code>ï¼šè®¾ç½® Endorsement å¯†ç ä¸º <code>111111</code>ã€‚</li></ul><h3 id="2-åˆ›å»º-Endorsement-Key-EK"><a href="#2-åˆ›å»º-Endorsement-Key-EK" class="headerlink" title="2. åˆ›å»º Endorsement Key (EK)"></a>2. åˆ›å»º Endorsement Key (EK)</h3><p>ç”Ÿæˆ Endorsement Key (EK) å¹¶ä¿å­˜å…¶ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_createek --ek-context ek.ctx --key-algorithm rsa -P 111111</span><br></pre></td></tr></table></figure><ul><li><code>--ek-context ek.ctx</code>ï¼šå°† EK ä¸Šä¸‹æ–‡ä¿å­˜åˆ° <code>ek.ctx</code> æ–‡ä»¶ä¸­ã€‚</li><li><code>--key-algorithm rsa</code>ï¼šæŒ‡å®šå¯†é’¥ç®—æ³•ä¸º RSAã€‚</li><li><code>-P 111111</code>ï¼šä¸º EK è®¾ç½®å¯†ç ã€‚</li></ul><h3 id="3-åˆ›å»º-Storage-Root-Key-SRK"><a href="#3-åˆ›å»º-Storage-Root-Key-SRK" class="headerlink" title="3. åˆ›å»º Storage Root Key (SRK)"></a>3. åˆ›å»º Storage Root Key (SRK)</h3><p>åŸºäº EK åˆ›å»º Storage Root Key (SRK)ï¼Œå°†å…¶ä¸Šä¸‹æ–‡ä¿å­˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_createprimary -C e -c srk.ctx -P 111111</span><br></pre></td></tr></table></figure><ul><li><code>-C e</code>ï¼šæŒ‡å®šä½¿ç”¨ EKï¼ˆEndorsementï¼‰ä½œä¸ºçˆ¶å¯†é’¥ã€‚</li><li><code>-c srk.ctx</code>ï¼šå°† SRK çš„ä¸Šä¸‹æ–‡ä¿å­˜åˆ° <code>srk.ctx</code> æ–‡ä»¶ä¸­ã€‚</li><li><code>-P 111111</code>ï¼šè®¾ç½® SRK çš„å¯†ç ã€‚</li></ul><h3 id="4-å°å­˜ï¼ˆSealï¼‰æ•°æ®"><a href="#4-å°å­˜ï¼ˆSealï¼‰æ•°æ®" class="headerlink" title="4. å°å­˜ï¼ˆSealï¼‰æ•°æ®"></a>4. å°å­˜ï¼ˆSealï¼‰æ•°æ®</h3><p>å°†è¦å°å­˜çš„æ•°æ®ï¼ˆå¦‚ <code>secret.txt</code> æ–‡ä»¶ä¸­çš„å†…å®¹ï¼‰å­˜å‚¨åˆ° TPM ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;my_secret_data&quot;</span> &gt; secret.txt</span><br><span class="line">tpm2_create -C srk.ctx -u seal.pub -r seal.priv -i secret.txt</span><br></pre></td></tr></table></figure><ul><li><code>-C srk.ctx</code>ï¼šæŒ‡å®š SRK ä½œä¸ºçˆ¶å¯†é’¥ã€‚</li><li><code>-u seal.pub</code> å’Œ <code>-r seal.priv</code>ï¼šåˆ†åˆ«ä¿å­˜ç”Ÿæˆçš„å…¬é’¥å’Œç§é’¥ã€‚</li><li><code>-i secret.txt</code>ï¼šå°† <code>secret.txt</code> æ–‡ä»¶ä¸­çš„æ•°æ®å°å­˜åˆ° TPM ä¸­ã€‚</li></ul><h3 id="5-åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡"><a href="#5-åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡" class="headerlink" title="5. åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡"></a>5. åŠ è½½å¯†é’¥ä¸Šä¸‹æ–‡</h3><p>å°†å°å­˜å¯¹è±¡åŠ è½½åˆ° TPMï¼Œä»¥ä¾¿åç»­è§£å°æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_load -C srk.ctx -u seal.pub -r seal.priv -c seal.ctx</span><br></pre></td></tr></table></figure><ul><li><code>-C srk.ctx</code>ï¼šæŒ‡å®š SRK ä½œä¸ºçˆ¶å¯†é’¥ã€‚</li><li><code>-u seal.pub</code> å’Œ <code>-r seal.priv</code>ï¼šåŠ è½½å°å­˜å¯¹è±¡çš„å…¬ç§é’¥ã€‚</li><li><code>-c seal.ctx</code>ï¼šç”Ÿæˆå¯†é’¥çš„ä¸Šä¸‹æ–‡æ–‡ä»¶ <code>seal.ctx</code>ã€‚</li></ul><h3 id="6-è§£å°ï¼ˆUnsealï¼‰æ•°æ®"><a href="#6-è§£å°ï¼ˆUnsealï¼‰æ•°æ®" class="headerlink" title="6. è§£å°ï¼ˆUnsealï¼‰æ•°æ®"></a>6. è§£å°ï¼ˆUnsealï¼‰æ•°æ®</h3><p>ä» TPM ä¸­è§£å°æ•°æ®å¹¶è¾“å‡ºåˆ°æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tpm2_unseal -c seal.ctx &gt; unsealed_data.txt</span><br></pre></td></tr></table></figure><ul><li><code>-c seal.ctx</code>ï¼šæŒ‡å®šå°å­˜å¯¹è±¡çš„ä¸Šä¸‹æ–‡æ–‡ä»¶ã€‚</li><li><code>&gt; unsealed_data.txt</code>ï¼šå°†è§£å°çš„æ•°æ®ä¿å­˜åˆ° <code>unsealed_data.txt</code> æ–‡ä»¶ä¸­ã€‚</li></ul><hr><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li><strong>æ–¹å¼ä¸€</strong> ä½¿ç”¨è‡ªå®šä¹‰çš„ Primary Key è¿›è¡Œå°å­˜å’Œè§£å°ï¼Œé€‚åˆè‡ªå®šä¹‰ç®¡ç†å¯†é’¥å±‚çº§ã€‚</li><li><strong>æ–¹å¼äºŒ</strong> ä½¿ç”¨ EK å’Œ SRK è¿›è¡Œå°å­˜å’Œè§£å°ï¼Œé€‚åˆ TPM å†…éƒ¨çš„å¯†é’¥ç®¡ç†æµç¨‹ã€‚</li></ul><p>æ ¹æ®åº”ç”¨éœ€æ±‚é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼å³å¯å®ç° TPM çš„æ•°æ®å°å­˜ä¸è§£å°æ“ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> TPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NVIDIA äº¤æ¢æœºå¿«é€Ÿé…ç½® - Cumulus Linux</title>
      <link href="/2024/10/31/nvidia_switch_quick_start/"/>
      <url>/2024/10/31/nvidia_switch_quick_start/</url>
      
        <content type="html"><![CDATA[<h1 id="NVIDIA-äº¤æ¢æœºå¿«é€Ÿé…ç½®-Cumulus-Linux"><a href="#NVIDIA-äº¤æ¢æœºå¿«é€Ÿé…ç½®-Cumulus-Linux" class="headerlink" title="NVIDIA äº¤æ¢æœºå¿«é€Ÿé…ç½® - Cumulus Linux"></a>NVIDIA äº¤æ¢æœºå¿«é€Ÿé…ç½® - Cumulus Linux</h1><ol><li><p><strong>è®¾ç½®æ¥å£åˆ°æ¡¥æ¥åŸŸ</strong>ï¼š</p><ul><li><p>æŸ¥çœ‹ç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Brctl show</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹äº¤æ¥æœºç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net show interface all</span><br></pre></td></tr></table></figure></li><li><p>å°†æ¥å£ <code>swp1</code> åˆ° <code>swp3</code> æ·»åŠ åˆ°æ¡¥æ¥åŸŸ <code>br_default</code> ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nv <span class="built_in">set</span> interface swp1-3 bridge domain br_default</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è®¾ç½®æ¡¥æ¥åŸŸä¸­çš„VLAN</strong>ï¼š</p><ul><li>ä¸ºæ¡¥æ¥åŸŸ <code>br_default</code> é…ç½® VLAN 10 å’Œ VLAN 20ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nv <span class="built_in">set</span> bridge domain br_default vlan 10,20</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è®¾ç½®æ— æ ‡ç­¾VLANï¼ˆuntagged VLANï¼‰</strong>ï¼š</p><ul><li>å°† VLAN 1 è®¾ä¸ºæ— æ ‡ç­¾ VLANï¼Œé€‚ç”¨äºé»˜è®¤VLANä¸æ‰“æ ‡ç­¾çš„æƒ…å†µã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nv <span class="built_in">set</span> bridge domain br_default untagged 1</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ä¸ºå•ä¸ªæ¥å£è®¾ç½®VLAN</strong>ï¼š</p><ul><li>å°†æ¥å£ <code>swp3</code> æ·»åŠ åˆ°æ¡¥æ¥åŸŸ <code>br_default</code> ä¸­ï¼Œå¹¶æŒ‡å®šä¸º VLAN 20ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nv <span class="built_in">set</span> interface swp3 bridge domain br_default vlan 20</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>åº”ç”¨å¹¶ä¿å­˜é…ç½®</strong>ï¼š</p><ul><li>åº”ç”¨ä»¥ä¸Šé…ç½®ï¼Œç¡®ä¿é…ç½®ç”Ÿæ•ˆã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nv config apply</span><br><span class="line">nv config save</span><br></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> CumulusLinux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PCIeé«˜çº§é”™è¯¯æŠ¥å‘Š</title>
      <link href="/2024/10/31/pcie_aer/"/>
      <url>/2024/10/31/pcie_aer/</url>
      
        <content type="html"><![CDATA[<h1 id="PCIeé«˜çº§é”™è¯¯æŠ¥å‘Šï¼ˆAERï¼‰"><a href="#PCIeé«˜çº§é”™è¯¯æŠ¥å‘Šï¼ˆAERï¼‰" class="headerlink" title="PCIeé«˜çº§é”™è¯¯æŠ¥å‘Šï¼ˆAERï¼‰"></a>PCIeé«˜çº§é”™è¯¯æŠ¥å‘Šï¼ˆAERï¼‰</h1><p>PCIeï¼ˆPeripheral Component Interconnect Expressï¼‰é«˜çº§é”™è¯¯æŠ¥å‘Šï¼ˆAERï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç›‘æ§å’ŒæŠ¥å‘Šåœ¨PCIeè®¾å¤‡å’Œé“¾è·¯ä¸Šå‘ç”Ÿçš„é”™è¯¯ã€‚AERæ—¨åœ¨æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä»è€Œå¸®åŠ©å·¥ç¨‹å¸ˆå¿«é€Ÿè¯†åˆ«å’Œè§£å†³é—®é¢˜ã€‚</p><h2 id="AER-çš„ä¸»è¦åŠŸèƒ½"><a href="#AER-çš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="AER çš„ä¸»è¦åŠŸèƒ½"></a>AER çš„ä¸»è¦åŠŸèƒ½</h2><ol><li><strong>é”™è¯¯æ£€æµ‹</strong>ï¼šå®æ—¶ç›‘æµ‹PCIeè®¾å¤‡ä¸­çš„é”™è¯¯æƒ…å†µã€‚</li><li><strong>é”™è¯¯æŠ¥å‘Š</strong>ï¼šé€šè¿‡çŠ¶æ€å¯„å­˜å™¨æŠ¥å‘Šä¸åŒç±»å‹çš„é”™è¯¯ã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ”¯æŒè‡ªåŠ¨æˆ–æ‰‹åŠ¨é”™è¯¯æ¢å¤æœºåˆ¶ã€‚</li></ol><h2 id="AER-å¯„å­˜å™¨"><a href="#AER-å¯„å­˜å™¨" class="headerlink" title="AER å¯„å­˜å™¨"></a>AER å¯„å­˜å™¨</h2><p>AERé€šè¿‡å‡ ä¸ªå…³é”®å¯„å­˜å™¨æ¥å®ç°å…¶åŠŸèƒ½ï¼š</p><ol><li><p><strong>UEStaï¼ˆä¸å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li><p>æŒ‡ç¤ºå‘ç”Ÿçš„ä¸å¯æ ¡æ­£é”™è¯¯ç±»å‹ï¼ŒåŒ…æ‹¬å¤šä¸ªé”™è¯¯ç±»å‹çš„ä½åŸŸã€‚</p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šç”¨äºæŒ‡ç¤ºä¸å¯æ ¡æ­£é”™è¯¯çš„çŠ¶æ€ã€‚</p></li><li><p><strong>å¯„å­˜å™¨å­—æ®µ</strong>ï¼š</p><ul><li><strong>Bit 0</strong>ï¼š<strong>ä¸å¯æ ¡æ­£é”™è¯¯æ£€æµ‹</strong>ã€‚è®¾ç½®ä¸º1è¡¨ç¤ºæ£€æµ‹åˆ°ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li><li><strong>Bit 1</strong>ï¼š<strong>äº‹åŠ¡å±‚è¶…æ—¶</strong>ã€‚è¡¨ç¤ºäº‹åŠ¡å±‚æ“ä½œè¶…æ—¶ã€‚</li><li><strong>Bit 2</strong>ï¼š<strong>æ¥æ”¶å™¨æº¢å‡º</strong>ã€‚æŒ‡ç¤ºæ¥æ”¶å™¨ç¼“å†²åŒºæº¢å‡ºã€‚</li><li><strong>Bit 3</strong>ï¼š<strong>æ ¼å¼é”™è¯¯çš„TLP</strong>ã€‚è¡¨ç¤ºæ”¶åˆ°æ ¼å¼é”™è¯¯çš„äº‹åŠ¡å±‚åŒ…ï¼ˆTLPï¼‰ã€‚</li><li><strong>Bit 4</strong>ï¼š<strong>ECRCé”™è¯¯</strong>ã€‚æŒ‡ç¤ºå¤–éƒ¨å¾ªç¯å†—ä½™æ ¡éªŒå¤±è´¥ã€‚</li><li><strong>Bit 5</strong>ï¼š<strong>ä¸æ”¯æŒçš„è¯·æ±‚</strong>ã€‚è¡¨ç¤ºæ”¶åˆ°ä¸æ”¯æŒçš„è¯·æ±‚ç±»å‹ã€‚</li><li><strong>Bit 6</strong>ï¼š<strong>AERä¸å¯æ ¡æ­£é”™è¯¯</strong>ã€‚é€šè¿‡AERæŠ¥å‘Šçš„ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li></ul></li><li><p>ç¤ºä¾‹ï¼š<code>UESta: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</code> è¡¨ç¤ºå½“å‰æ²¡æœ‰æ£€æµ‹åˆ°ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</p></li></ul></li><li><p><strong>UEMskï¼ˆä¸å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li><p>æ§åˆ¶å“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ï¼ˆå¿½ç•¥ï¼‰ã€‚</p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šæ§åˆ¶å“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯å¯ä»¥è¢«æŠ¥å‘Šã€‚</p></li><li><p><strong>å¯„å­˜å™¨å­—æ®µ</strong>ï¼š</p><ul><li><strong>Bit 0</strong>ï¼š<strong>ä¸å¯æ ¡æ­£é”™è¯¯æ©ç </strong>ã€‚è®¾ç½®ä¸º1è¡¨ç¤ºæ©ç æ­¤ç±»é”™è¯¯ã€‚</li><li><strong>Bit 1</strong>ï¼š<strong>äº‹åŠ¡å±‚è¶…æ—¶æ©ç </strong>ã€‚</li><li><strong>Bit 2</strong>ï¼š<strong>æ¥æ”¶å™¨æº¢å‡ºæ©ç </strong>ã€‚</li><li><strong>Bit 3</strong>ï¼š<strong>æ ¼å¼é”™è¯¯çš„TLPæ©ç </strong>ã€‚</li><li><strong>Bit 4</strong>ï¼š<strong>ECRCé”™è¯¯æ©ç </strong>ã€‚</li><li><strong>Bit 5</strong>ï¼š<strong>ä¸æ”¯æŒçš„è¯·æ±‚é”™è¯¯æ©ç </strong>ã€‚</li></ul></li><li><p>ç¤ºä¾‹ï¼š<code>UEMsk: DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</code> è¡¨ç¤ºæ²¡æœ‰é”™è¯¯è¢«æ©ç ï¼Œæ‰€æœ‰ä¸å¯æ ¡æ­£é”™è¯¯å‡å¯æŠ¥å‘Šã€‚</p></li></ul></li><li><p><strong>UESvrtï¼ˆä¸å¯æ ¡æ­£é”™è¯¯æœåŠ¡å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li>æŒ‡ç¤ºå“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯å·²è¢«å¤„ç†ã€‚</li><li>ç¤ºä¾‹ï¼š<code>UESvrt: DLP+ SDES+ TLP- FCP+</code> è¡¨ç¤ºDLPå’ŒFCPé”™è¯¯å·²è¢«å¤„ç†ã€‚</li></ul></li><li><p><strong>CEStaï¼ˆå¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li><p>æŒ‡ç¤ºå‘ç”Ÿçš„å¯æ ¡æ­£é”™è¯¯ç±»å‹ã€‚</p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šç”¨äºæŠ¥å‘Šå¯æ ¡æ­£é”™è¯¯çš„çŠ¶æ€ã€‚</p></li><li><p><strong>å¯„å­˜å™¨å­—æ®µ</strong>ï¼š</p><ul><li><strong>Bit 0</strong>ï¼š<strong>å¯æ ¡æ­£é”™è¯¯æ£€æµ‹</strong>ã€‚è®¾ç½®ä¸º1è¡¨ç¤ºæ£€æµ‹åˆ°å¯æ ¡æ­£é”™è¯¯ã€‚</li><li><strong>Bit 1</strong>ï¼š<strong>æ•°æ®é“¾è·¯å±‚å¯æ ¡æ­£é”™è¯¯</strong>ã€‚</li><li><strong>Bit 2</strong>ï¼š<strong>é‡æ’­è¶…æ—¶é”™è¯¯</strong>ã€‚</li><li><strong>Bit 3</strong>ï¼š<strong>æ¥æ”¶é”™è¯¯</strong>ã€‚</li><li><strong>Bit 4</strong>ï¼š<strong>æ ¼å¼é”™è¯¯çš„TLP</strong>ã€‚</li><li><strong>Bit 5</strong>ï¼š<strong>ECRCé”™è¯¯</strong>ã€‚</li><li><strong>Bit 6</strong>ï¼š<strong>ä¸æ”¯æŒçš„è¯·æ±‚é”™è¯¯</strong>ã€‚</li></ul></li><li><p>ç¤ºä¾‹ï¼š<code>CESta: RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr-</code> è¡¨ç¤ºå½“å‰æ²¡æœ‰å¯æ ¡æ­£é”™è¯¯è¢«æ£€æµ‹åˆ°ã€‚</p></li></ul></li><li><p><strong>CEMskï¼ˆå¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li><p>æ§åˆ¶å“ªäº›å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ã€‚</p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šæ§åˆ¶å“ªäº›å¯æ ¡æ­£é”™è¯¯å¯ä»¥è¢«æŠ¥å‘Šã€‚</p></li><li><p><strong>å¯„å­˜å™¨å­—æ®µ</strong>ï¼š</p><ul><li><strong>Bit 0</strong>ï¼š<strong>å¯æ ¡æ­£é”™è¯¯æ©ç </strong>ã€‚è®¾ç½®ä¸º1è¡¨ç¤ºæ©ç æ­¤ç±»é”™è¯¯ã€‚</li><li><strong>Bit 1</strong>ï¼š<strong>æ•°æ®é“¾è·¯å±‚é”™è¯¯æ©ç </strong>ã€‚</li><li><strong>Bit 2</strong>ï¼š<strong>é‡æ’­è¶…æ—¶é”™è¯¯æ©ç </strong>ã€‚</li><li><strong>Bit 3</strong>ï¼š<strong>æ¥æ”¶é”™è¯¯æ©ç </strong>ã€‚</li><li><strong>Bit 4</strong>ï¼š<strong>æ ¼å¼é”™è¯¯çš„TLPæ©ç </strong>ã€‚</li><li><strong>Bit 5</strong>ï¼š<strong>ECRCé”™è¯¯æ©ç </strong>ã€‚</li></ul></li><li><p>ç¤ºä¾‹ï¼š<code>CEMsk: RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr+</code> è¡¨ç¤ºæ‰€æœ‰å¯æ ¡æ­£é”™è¯¯å‡å¯æŠ¥å‘Šï¼Œä½†<code>AdvNonFatalErr</code>å°†è¢«æ©ç ã€‚</p></li></ul></li><li><p><strong>AERCapï¼ˆAERèƒ½åŠ›å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li>æä¾›è®¾å¤‡æ”¯æŒçš„AERåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ECRCç”Ÿæˆå’Œæ£€æŸ¥èƒ½åŠ›ã€‚</li><li>ç¤ºä¾‹ï¼š<code>AERCap: First Error Pointer: 00, ECRCGenCap+ ECRCGenEn-</code> è¡¨ç¤ºè®¾å¤‡æ”¯æŒECRCç”Ÿæˆä½†æœªå¯ç”¨ã€‚</li></ul></li><li><p><strong>HeaderLogï¼ˆå¤´éƒ¨æ—¥å¿—ï¼‰</strong>ï¼š</p><ul><li>ç”¨äºè®°å½•é”™è¯¯çš„æ—¥å¿—ï¼Œå¸®åŠ©æ•…éšœæ’æŸ¥ã€‚</li><li>ç¤ºä¾‹ï¼š<code>HeaderLog: 00000000 00000000 00000000 00000000</code> è¡¨ç¤ºå½“å‰æ²¡æœ‰é”™è¯¯æ—¥å¿—ã€‚</li></ul></li><li><p><strong>RootCmdï¼ˆæ ¹å‘½ä»¤å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li>æ§åˆ¶æ ¹å¤æ‚è®¾å¤‡çš„é”™è¯¯æŠ¥å‘ŠåŠŸèƒ½ã€‚</li><li>ç¤ºä¾‹ï¼š<code>RootCmd: CERptEn+ NFERptEn+ FERptEn+</code> è¡¨ç¤ºæ‰€æœ‰é”™è¯¯æŠ¥å‘ŠåŠŸèƒ½å·²å¯ç”¨ã€‚</li></ul></li><li><p><strong>RootStaï¼ˆæ ¹çŠ¶æ€å¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li>æ˜¾ç¤ºæ¥æ”¶åˆ°çš„é”™è¯¯æ¶ˆæ¯çš„çŠ¶æ€ã€‚</li><li>ç¤ºä¾‹ï¼š<code>RootSta: CERcvd- MultCERcvd- UERcvd-</code> è¡¨ç¤ºæ²¡æœ‰æ¥æ”¶åˆ°é”™è¯¯æ¶ˆæ¯ã€‚</li></ul></li><li><p><strong>ErrorSrcï¼ˆé”™è¯¯æºå¯„å­˜å™¨ï¼‰</strong>ï¼š</p><ul><li>æŒ‡ç¤ºå½“å‰çš„é”™è¯¯æ¥æºï¼ŒåŒ…æ‹¬å¯æ ¡æ­£å’Œä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li><li>ç¤ºä¾‹ï¼š<code>ErrorSrc: ERR_COR: 0000 ERR_FATAL/NONFATAL: 0000</code> è¡¨ç¤ºæ²¡æœ‰æ£€æµ‹åˆ°å¯æ ¡æ­£æˆ–ä¸å¯æ ¡æ­£é”™è¯¯æ¥æºã€‚</li></ul></li></ol><h2 id="å¸¸è§é”™è¯¯ç±»å‹"><a href="#å¸¸è§é”™è¯¯ç±»å‹" class="headerlink" title="å¸¸è§é”™è¯¯ç±»å‹"></a>å¸¸è§é”™è¯¯ç±»å‹</h2><p>åœ¨AERæŠ¥å‘Šä¸­ï¼Œé”™è¯¯ç±»å‹é€šå¸¸ä»¥ç¼©å†™å½¢å¼åˆ—å‡ºï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p><ol><li><p><strong>DLP</strong> (Data Link Protocol Error)</p><ul><li>æŒ‡æ•°æ®é“¾è·¯å±‚åè®®é”™è¯¯ï¼Œè¿™ç±»é”™è¯¯é€šå¸¸æ˜¯ç”±äºæ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªèƒ½æˆåŠŸåˆ°è¾¾ç›®æ ‡ã€‚</li></ul></li><li><p><strong>SDES</strong> (Surprise Down Error Status)</p><ul><li>è¡¨ç¤ºçªå‘æ–­å¼€é”™è¯¯çŠ¶æ€ï¼Œé€šå¸¸æ˜¯ç”±äºè®¾å¤‡çªç„¶å¤±å»è¿æ¥æˆ–å‡ºç°æ•…éšœå¼•èµ·çš„ã€‚</li></ul></li><li><p><strong>TLP</strong> (Transaction Layer Protocol Error)</p><ul><li>æŒ‡äº‹åŠ¡å±‚åè®®é”™è¯¯ï¼Œé€šå¸¸æ¶‰åŠåˆ°æ•°æ®åŒ…çš„äº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚</li></ul></li><li><p><strong>FCP</strong> (Flow Control Protocol Error)</p><ul><li>æŒ‡æµæ§åˆ¶åè®®é”™è¯¯ï¼Œè¿™ç§é”™è¯¯å¯èƒ½å‘ç”Ÿåœ¨æµæ§åˆ¶æœºåˆ¶å‡ºç°é—®é¢˜æ—¶ï¼Œä¾‹å¦‚æœªèƒ½æ­£ç¡®åœ°å‘é€æˆ–æ¥æ”¶æµæ§åˆ¶ä¿¡å·ã€‚</li></ul></li><li><p><strong>CmpltTO</strong> (Completion Timeout)</p><ul><li>è¡¨ç¤ºå®Œæˆè¶…æ—¶ï¼Œé€šå¸¸æ˜¯æŒ‡åœ¨è§„å®šæ—¶é—´å†…æœªèƒ½æ”¶åˆ°è¯·æ±‚çš„æ“ä½œçš„å®Œæˆå“åº”ã€‚</li></ul></li><li><p><strong>CmpltAbrt</strong> (Completion Aborted)</p><ul><li>æŒ‡å®Œæˆæ“ä½œè¢«ä¸­æ­¢ï¼Œå¯èƒ½ç”±äºè®¾å¤‡é”™è¯¯æˆ–å…¶ä»–åŸå› å¯¼è‡´è¯·æ±‚æœªèƒ½æˆåŠŸå®Œæˆã€‚</li></ul></li><li><p><strong>UnxCmplt</strong> (Unexpected Completion)</p><ul><li>è¡¨ç¤ºæ„å¤–çš„å®Œæˆï¼Œé€šå¸¸æ˜¯æŒ‡æ”¶åˆ°çš„å®ŒæˆåŒ…ä¸å‘å‡ºçš„è¯·æ±‚ä¸åŒ¹é…ã€‚</li></ul></li><li><p><strong>RxOF</strong> (Receive Overflow)</p><ul><li>è¡¨ç¤ºæ¥æ”¶æº¢å‡ºï¼Œé€šå¸¸å‘ç”Ÿåœ¨æ¥æ”¶ç¼“å†²åŒºå·²æ»¡ä½†ä»å°è¯•æ¥æ”¶æ›´å¤šæ•°æ®æ—¶ã€‚</li></ul></li><li><p><strong>MalfTLP</strong> (Malformed TLP)</p><ul><li>æŒ‡æ ¼å¼é”™è¯¯çš„äº‹åŠ¡å±‚åŒ…ï¼ˆTLPï¼‰ï¼Œè¿™é€šå¸¸æ„å‘³ç€åŒ…çš„ç»“æ„ä¸ç¬¦åˆåè®®è§„èŒƒã€‚</li></ul></li><li><p><strong>ECRC</strong> (ECRC Error)</p><ul><li>æŒ‡ECRCï¼ˆEnd-to-End CRCï¼‰é”™è¯¯ï¼Œè¿™æ˜¯æ•°æ®å®Œæ•´æ€§æ£€æŸ¥çš„ä¸€éƒ¨åˆ†ï¼Œå½“å‘ç°æ•°æ®ä¼ è¾“é”™è¯¯æ—¶ä¼šè§¦å‘ã€‚</li></ul></li><li><p><strong>UnsupReq</strong> (Unsupported Request)</p><ul><li>è¡¨ç¤ºæ”¶åˆ°ä¸æ”¯æŒçš„è¯·æ±‚ï¼Œå¯èƒ½æ˜¯å› ä¸ºè®¾å¤‡ä¸æ”¯æŒè¯¥è¯·æ±‚çš„ç±»å‹æˆ–å‚æ•°ã€‚</li></ul></li><li><p><strong>ACSViol</strong> (Access Control Service Violation)</p><ul><li>æŒ‡è®¿é—®æ§åˆ¶æœåŠ¡è¿è§„ï¼Œé€šå¸¸æ¶‰åŠå®‰å…¨æˆ–æƒé™é—®é¢˜ï¼Œè¡¨ç¤ºæŸä¸ªæ“ä½œæœªèƒ½éµå¾ªé¢„å®šä¹‰çš„è®¿é—®æ§åˆ¶è§„åˆ™ã€‚</li></ul></li></ol><h2 id="é”™è¯¯å¤„ç†æµç¨‹"><a href="#é”™è¯¯å¤„ç†æµç¨‹" class="headerlink" title="é”™è¯¯å¤„ç†æµç¨‹"></a>é”™è¯¯å¤„ç†æµç¨‹</h2><p>AERæœºåˆ¶çš„æœ‰æ•ˆæ€§ä¾èµ–äºå¯¹å¯„å­˜å™¨çš„ç›‘æ§ä¸å“åº”ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„é”™è¯¯å¤„ç†æµç¨‹ï¼š</p><h3 id="æ­¥éª¤-1ï¼šæ£€æµ‹é”™è¯¯"><a href="#æ­¥éª¤-1ï¼šæ£€æµ‹é”™è¯¯" class="headerlink" title="æ­¥éª¤ 1ï¼šæ£€æµ‹é”™è¯¯"></a>æ­¥éª¤ 1ï¼šæ£€æµ‹é”™è¯¯</h3><p>ä½¿ç”¨<code>lspci</code>å‘½ä»¤æŸ¥çœ‹è®¾å¤‡çš„é”™è¯¯çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vvv -s &lt;device_id&gt;</span><br></pre></td></tr></table></figure><p>åœ¨è¾“å‡ºä¸­ï¼ŒæŸ¥æ‰¾<code>CESta</code>å’Œ<code>CEMsk</code>ã€<code>UESta</code>å’Œ<code>UEMsk</code>éƒ¨åˆ†ã€‚</p><h3 id="æ­¥éª¤-2ï¼šåˆ†æå¯„å­˜å™¨çŠ¶æ€"><a href="#æ­¥éª¤-2ï¼šåˆ†æå¯„å­˜å™¨çŠ¶æ€" class="headerlink" title="æ­¥éª¤ 2ï¼šåˆ†æå¯„å­˜å™¨çŠ¶æ€"></a>æ­¥éª¤ 2ï¼šåˆ†æå¯„å­˜å™¨çŠ¶æ€</h3><ul><li><strong>CESta</strong>ï¼šæ£€æŸ¥å“ªäº›å¯æ ¡æ­£é”™è¯¯è¢«æ£€æµ‹åˆ°ã€‚</li><li><strong>CEMsk</strong>ï¼šæ£€æŸ¥å“ªäº›å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ã€‚</li><li><strong>UESta</strong>ï¼šæ£€æŸ¥å“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯è¢«æ£€æµ‹åˆ°ã€‚</li><li><strong>UEMsk</strong>ï¼šæ£€æŸ¥å“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ã€‚</li></ul><h3 id="æ­¥éª¤-3ï¼šåˆ¤æ–­å’Œå“åº”"><a href="#æ­¥éª¤-3ï¼šåˆ¤æ–­å’Œå“åº”" class="headerlink" title="æ­¥éª¤ 3ï¼šåˆ¤æ–­å’Œå“åº”"></a>æ­¥éª¤ 3ï¼šåˆ¤æ–­å’Œå“åº”</h3><ul><li><p><strong>å¯¹äºå¯æ ¡æ­£é”™è¯¯</strong>ï¼š</p><ul><li>å¦‚æœ<code>CESta</code>ä¸­çš„ä½ä¸º1ä¸”<code>CEMsk</code>ä¸­çš„å¯¹åº”ä½ä¸º0ï¼Œè¡¨ç¤ºè¯¥å¯æ ¡æ­£é”™è¯¯è¢«æ£€æµ‹åˆ°å¹¶ä¼šè¢«æŠ¥å‘Šã€‚å¯ä»¥è€ƒè™‘è®°å½•è¯¥é”™è¯¯å¹¶åˆ†æåŸå› ã€‚</li><li>å¦‚æœ<code>CEMsk</code>ä¸­çš„ä½ä¸º1ï¼Œè¡¨ç¤ºè¯¥é”™è¯¯è¢«æ©ç ï¼Œä¸»æœºä¸ä¼šæŠ¥å‘Šã€‚å¯ä»¥æ ¹æ®éœ€æ±‚å†³å®šæ˜¯å¦è§£é™¤æ©ç ã€‚</li></ul></li><li><p><strong>å¯¹äºä¸å¯æ ¡æ­£é”™è¯¯</strong>ï¼š</p><ul><li>å¦‚æœ<code>UESta</code>ä¸­çš„ä½ä¸º1ä¸”<code>UEMsk</code>ä¸­çš„å¯¹åº”ä½ä¸º0ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°ä¸å¯æ ¡æ­£é”™è¯¯å¹¶å°†è¢«æŠ¥å‘Šã€‚è¿™é€šå¸¸éœ€è¦æ›´ç´§æ€¥çš„å“åº”ï¼Œä¾‹å¦‚è®¾å¤‡é‡ç½®æˆ–ç¡¬ä»¶æ£€æŸ¥ã€‚</li><li>å¦‚æœ<code>UEMsk</code>ä¸­çš„ä½ä¸º1ï¼Œè¡¨ç¤ºè¯¥é”™è¯¯è¢«æ©ç ï¼Œä¸ä¼šè¢«æŠ¥å‘Šã€‚æ­¤æ—¶å¯ä»¥è€ƒè™‘æ˜¯å¦éœ€è¦è°ƒæ•´æ©ç è®¾ç½®ä»¥æ•è·é‡è¦çš„é”™è¯¯ä¿¡æ¯ã€‚</li></ul></li></ul><h2 id="ä½¿ç”¨-lspci-æ£€æŸ¥-AER-çŠ¶æ€"><a href="#ä½¿ç”¨-lspci-æ£€æŸ¥-AER-çŠ¶æ€" class="headerlink" title="ä½¿ç”¨ lspci æ£€æŸ¥ AER çŠ¶æ€"></a>ä½¿ç”¨ <code>lspci</code> æ£€æŸ¥ AER çŠ¶æ€</h2><p>å¯ä»¥ä½¿ç”¨<code>lspci</code>å‘½ä»¤æ¥æŸ¥çœ‹PCIeè®¾å¤‡çš„AERçŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vvv -s &lt;device_id&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="AER-çŠ¶æ€åˆ†æ"><a href="#AER-çŠ¶æ€åˆ†æ" class="headerlink" title="AER çŠ¶æ€åˆ†æ"></a>AER çŠ¶æ€åˆ†æ</h3><h4 id="1-AER-èƒ½åŠ›ï¼ˆCapabilitiesï¼‰"><a href="#1-AER-èƒ½åŠ›ï¼ˆCapabilitiesï¼‰" class="headerlink" title="1. AER èƒ½åŠ›ï¼ˆCapabilitiesï¼‰"></a>1. AER èƒ½åŠ›ï¼ˆCapabilitiesï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Capabilities: [100 v2] Advanced Error Reporting</span><br></pre></td></tr></table></figure><ul><li>è¿™è¡¨ç¤ºè®¾å¤‡æ”¯æŒAERï¼Œå¹¶ä¸”æ˜¯ç‰ˆæœ¬2ã€‚</li></ul><h4 id="2-ä¸å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆUEStaï¼‰"><a href="#2-ä¸å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆUEStaï¼‰" class="headerlink" title="2. ä¸å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆUEStaï¼‰"></a>2. ä¸å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆUEStaï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UESta:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</span><br></pre></td></tr></table></figure><ul><li>æ­¤å¯„å­˜å™¨ç”¨äºæŒ‡ç¤ºæ˜¯å¦æ£€æµ‹åˆ°ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li><li><code>DLP-</code>ã€<code>SDES-</code>ç­‰å‰é¢çš„<code>-</code>è¡¨ç¤ºè¿™äº›é”™è¯¯ç±»å‹æœªè¢«æ£€æµ‹åˆ°ã€‚</li><li>æ‰€æœ‰é¡¹å‡æœªè®¾ç½®ï¼Œè¡¨ç¤ºå½“å‰æ²¡æœ‰ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li></ul><h4 id="3-ä¸å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆUEMskï¼‰"><a href="#3-ä¸å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆUEMskï¼‰" class="headerlink" title="3. ä¸å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆUEMskï¼‰"></a>3. ä¸å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆUEMskï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UEMsk:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</span><br></pre></td></tr></table></figure><ul><li>æ­¤å¯„å­˜å™¨æ§åˆ¶å“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ã€‚</li><li>åŒæ ·ï¼Œæ‰€æœ‰é¡¹å‰çš„<code>-</code>è¡¨ç¤ºæ²¡æœ‰é”™è¯¯è¢«æ©ç ï¼Œæ‰€æœ‰ä¸å¯æ ¡æ­£é”™è¯¯å‡å¯æŠ¥å‘Šã€‚</li></ul><h4 id="4-ä¸å¯æ ¡æ­£é”™è¯¯æºå¯„å­˜å™¨ï¼ˆUESvrtï¼‰"><a href="#4-ä¸å¯æ ¡æ­£é”™è¯¯æºå¯„å­˜å™¨ï¼ˆUESvrtï¼‰" class="headerlink" title="4. ä¸å¯æ ¡æ­£é”™è¯¯æºå¯„å­˜å™¨ï¼ˆUESvrtï¼‰"></a>4. ä¸å¯æ ¡æ­£é”™è¯¯æºå¯„å­˜å™¨ï¼ˆUESvrtï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UESvrt: DLP+ SDES+ TLP- FCP+ CmpltTO- CmpltAbrt- UnxCmplt- RxOF+ MalfTLP+ ECRC- UnsupReq- ACSViol-</span><br></pre></td></tr></table></figure><ul><li>æ­¤å¯„å­˜å™¨è¡¨ç¤ºå“ªäº›ä¸å¯æ ¡æ­£é”™è¯¯è¢«æœåŠ¡ã€‚</li><li><code>DLP+</code>ã€<code>FCP+</code>ã€<code>RxOF+</code>ã€<code>MalfTLP+</code>è¡¨ç¤ºè¿™äº›é”™è¯¯ç±»å‹å·²è¢«æœåŠ¡ï¼ˆå³è¢«å¤„ç†ï¼‰ã€‚</li><li>å…¶ä»–é¡¹æœªè¢«æœåŠ¡ï¼Œè¡¨ç¤ºæ²¡æœ‰æ£€æµ‹åˆ°è¿™äº›ç±»å‹çš„é”™è¯¯ã€‚</li></ul><h4 id="5-å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆCEStaï¼‰"><a href="#5-å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆCEStaï¼‰" class="headerlink" title="5. å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆCEStaï¼‰"></a>5. å¯æ ¡æ­£é”™è¯¯çŠ¶æ€å¯„å­˜å™¨ï¼ˆCEStaï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CESta:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr-</span><br></pre></td></tr></table></figure><ul><li>è¯¥å¯„å­˜å™¨æ˜¾ç¤ºæ£€æµ‹åˆ°çš„å¯æ ¡æ­£é”™è¯¯çŠ¶æ€ã€‚</li><li>æ‰€æœ‰é¡¹å‡ä¸º<code>-</code>ï¼Œè¡¨ç¤ºå½“å‰æ²¡æœ‰å¯æ ¡æ­£é”™è¯¯è¢«æ£€æµ‹åˆ°ã€‚</li></ul><h4 id="6-å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆCEMskï¼‰"><a href="#6-å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆCEMskï¼‰" class="headerlink" title="6. å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆCEMskï¼‰"></a>6. å¯æ ¡æ­£é”™è¯¯æ©ç å¯„å­˜å™¨ï¼ˆCEMskï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CEMsk:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr+</span><br></pre></td></tr></table></figure><ul><li>æ­¤å¯„å­˜å™¨æ§åˆ¶å“ªäº›å¯æ ¡æ­£é”™è¯¯è¢«æ©ç ã€‚</li><li>é™¤äº†<code>AdvNonFatalErr+</code>å¤–ï¼Œå…¶ä»–é¡¹å‡ä¸º<code>-</code>ï¼Œè¡¨ç¤ºæ‰€æœ‰å…¶ä»–ç±»å‹çš„å¯æ ¡æ­£é”™è¯¯å°†è¢«æŠ¥å‘Šã€‚</li></ul><h4 id="7-AER-èƒ½åŠ›å¯„å­˜å™¨ï¼ˆAERCapï¼‰"><a href="#7-AER-èƒ½åŠ›å¯„å­˜å™¨ï¼ˆAERCapï¼‰" class="headerlink" title="7. AER èƒ½åŠ›å¯„å­˜å™¨ï¼ˆAERCapï¼‰"></a>7. AER èƒ½åŠ›å¯„å­˜å™¨ï¼ˆAERCapï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AERCap: First Error Pointer: 00, ECRCGenCap+ ECRCGenEn- ECRCChkCap+ ECRCChkEn-</span><br><span class="line">        MultHdrRecCap+ MultHdrRecEn- TLPPfxPres- HdrLogCap-</span><br></pre></td></tr></table></figure><ul><li><strong>First Error Pointer</strong>: 00 â€” è¡¨ç¤ºæœ€è¿‘çš„é”™è¯¯æŒ‡é’ˆä½ç½®ã€‚</li><li><strong>ECRCGenCap+</strong>: æ”¯æŒç”ŸæˆECRCã€‚</li><li><strong>ECRCGenEn-</strong>: ç”ŸæˆECRCåŠŸèƒ½æœªå¯ç”¨ã€‚</li><li><strong>ECRCChkCap+</strong>: æ”¯æŒECRCæ£€æŸ¥ã€‚</li><li><strong>ECRCChkEn-</strong>: ECRCæ£€æŸ¥åŠŸèƒ½æœªå¯ç”¨ã€‚</li><li><strong>MultHdrRecCap+</strong>: æ”¯æŒå¤šä¸ªå¤´éƒ¨æ¥æ”¶ã€‚</li><li><strong>MultHdrRecEn-</strong>: å¤šä¸ªå¤´éƒ¨æ¥æ”¶åŠŸèƒ½æœªå¯ç”¨ã€‚</li><li><strong>TLPPfxPres</strong>: äº‹åŠ¡å±‚å‰ç¼€ä¿ç•™åŠŸèƒ½ã€‚</li><li><strong>HdrLogCap-</strong>: å¤´éƒ¨æ—¥å¿—èƒ½åŠ›æœªå¯ç”¨ã€‚</li></ul><h4 id="8-å¤´éƒ¨æ—¥å¿—ï¼ˆHeaderLogï¼‰"><a href="#8-å¤´éƒ¨æ—¥å¿—ï¼ˆHeaderLogï¼‰" class="headerlink" title="8. å¤´éƒ¨æ—¥å¿—ï¼ˆHeaderLogï¼‰"></a>8. å¤´éƒ¨æ—¥å¿—ï¼ˆHeaderLogï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HeaderLog: 00000000 00000000 00000000 00000000</span><br></pre></td></tr></table></figure><ul><li>å¤´éƒ¨æ—¥å¿—æ˜¾ç¤ºä¸ºé›¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é”™è¯¯æ—¥å¿—å¯ç”¨ã€‚</li></ul><h4 id="9-æ ¹å‘½ä»¤ï¼ˆRootCmdï¼‰"><a href="#9-æ ¹å‘½ä»¤ï¼ˆRootCmdï¼‰" class="headerlink" title="9. æ ¹å‘½ä»¤ï¼ˆRootCmdï¼‰"></a>9. æ ¹å‘½ä»¤ï¼ˆRootCmdï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RootCmd: CERptEn+ NFERptEn+ FERptEn+</span><br></pre></td></tr></table></figure><ul><li>æŒ‡ç¤ºæ ¹å‘½ä»¤çš„é”™è¯¯æŠ¥å‘ŠåŠŸèƒ½å‡å·²å¯ç”¨ï¼ˆCERptEnã€NFERptEnã€FERptEnï¼‰ã€‚</li></ul><h4 id="10-æ ¹çŠ¶æ€ï¼ˆRootStaï¼‰"><a href="#10-æ ¹çŠ¶æ€ï¼ˆRootStaï¼‰" class="headerlink" title="10. æ ¹çŠ¶æ€ï¼ˆRootStaï¼‰"></a>10. æ ¹çŠ¶æ€ï¼ˆRootStaï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RootSta: CERcvd- MultCERcvd- UERcvd- MultUERcvd-</span><br><span class="line">         FirstFatal- NonFatalMsg- FatalMsg- IntMsg 0</span><br></pre></td></tr></table></figure><ul><li>è¿™äº›å­—æ®µæŒ‡ç¤ºå„ç§é”™è¯¯çŠ¶æ€ã€‚å½“å‰æ— é”™è¯¯è¢«æ¥æ”¶ï¼ˆCERcvd-ã€UERcvd-ï¼‰ã€‚</li></ul><h4 id="11-é”™è¯¯æºï¼ˆErrorSrcï¼‰"><a href="#11-é”™è¯¯æºï¼ˆErrorSrcï¼‰" class="headerlink" title="11. é”™è¯¯æºï¼ˆErrorSrcï¼‰"></a>11. é”™è¯¯æºï¼ˆErrorSrcï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ErrorSrc: ERR_COR: 0000 ERR_FATAL/NONFATAL: 0000</span><br></pre></td></tr></table></figure><ul><li>è¡¨ç¤ºå½“å‰æ²¡æœ‰å¯æ ¡æ­£é”™è¯¯å’Œä¸å¯æ ¡æ­£é”™è¯¯æ¥æºã€‚</li></ul><h3 id="ç¤ºä¾‹åˆ†æ1"><a href="#ç¤ºä¾‹åˆ†æ1" class="headerlink" title="ç¤ºä¾‹åˆ†æ1"></a>ç¤ºä¾‹åˆ†æ1</h3><p>å‡è®¾è¯»å–åˆ°çš„å¯„å­˜å™¨çŠ¶æ€å¦‚ä¸‹ï¼š</p><ul><li><code>CESta</code>: <code>00000111</code>ï¼ˆå¯æ ¡æ­£é”™è¯¯ä½0ã€1å’Œ2è¢«è®¾ç½®ï¼‰</li><li><code>CEMsk</code>: <code>00000001</code>ï¼ˆå¯æ ¡æ­£é”™è¯¯æ©ç ä½0è¢«è®¾ç½®ï¼‰</li><li><code>UESta</code>: <code>00000001</code>ï¼ˆä¸å¯æ ¡æ­£é”™è¯¯ä½0è¢«è®¾ç½®ï¼‰</li><li><code>UEMsk</code>: <code>00000000</code>ï¼ˆä¸å¯æ ¡æ­£é”™è¯¯æ©ç ä½0æœªè®¾ç½®ï¼‰</li></ul><p><strong>åˆ†æ</strong>ï¼š</p><ul><li><p><strong>å¯æ ¡æ­£é”™è¯¯</strong>ï¼š</p><ul><li><code>CESta</code>ä¸­çš„Bit 0ï¼ˆå¯æ ¡æ­£é”™è¯¯æ£€æµ‹ï¼‰ä¸º1ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°å¯æ ¡æ­£é”™è¯¯ï¼Œä½†ç”±äº<code>CEMsk</code>ä¸­å¯¹åº”ä½ä¸º1ï¼Œå› æ­¤ä¸ä¼šæŠ¥å‘Šã€‚</li><li><code>CESta</code>ä¸­çš„Bit 1å’Œ2ä¸º1ï¼Œè¡¨ç¤ºæ•°æ®é“¾è·¯å±‚å¯æ ¡æ­£é”™è¯¯å’Œé‡æ’­è¶…æ—¶é”™è¯¯è¢«æ£€æµ‹åˆ°ï¼Œä¸”<code>CEMsk</code>ä¸­çš„å¯¹åº”ä½å‡ä¸º0ï¼Œè¿™äº›é”™è¯¯å°†è¢«æŠ¥å‘Šã€‚</li></ul></li><li><p><strong>ä¸å¯æ ¡æ­£é”™è¯¯</strong>ï¼š</p><ul><li><code>UESta</code>ä¸­çš„Bit 0ï¼ˆä¸å¯æ ¡æ­£é”™è¯¯æ£€æµ‹ï¼‰ä¸º1ä¸”<code>UEMsk</code>ä¸­å¯¹åº”ä½ä¸º0ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°ä¸å¯æ ¡æ­£é”™è¯¯å¹¶å°†è¢«æŠ¥å‘Šã€‚è¿™éœ€è¦ç«‹å³å…³æ³¨å’Œå¤„ç†ã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹åˆ†æ2"><a href="#ç¤ºä¾‹åˆ†æ2" class="headerlink" title="ç¤ºä¾‹åˆ†æ2"></a>ç¤ºä¾‹åˆ†æ2</h3><p>å‡è®¾è¿è¡Œ<code>lspci -vvv -s 00:1f.6</code>ï¼Œå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Capabilities: [100 v2] Advanced Error Reporting</span><br><span class="line">    UESta:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</span><br><span class="line">    UEMsk:  DLP- SDES- TLP- FCP- CmpltTO- CmpltAbrt- UnxCmplt- RxOF- MalfTLP- ECRC- UnsupReq- ACSViol-</span><br><span class="line">    CESta:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr-</span><br><span class="line">    CEMsk:  RxErr- BadTLP- BadDLLP- Rollover- Timeout- AdvNonFatalErr+</span><br><span class="line">    AERCap: First Error Pointer: 00, ECRCGenCap+ ECRCGenEn- ECRCChkCap+ ECRCChkEn-</span><br><span class="line">            MultHdrRecCap+ MultHdrRecEn- TLPPfxPres- HdrLogCap-</span><br><span class="line">    HeaderLog: 00000000 00000000 00000000 00000000</span><br><span class="line">    RootCmd: CERptEn+ NFERptEn+ FERptEn+</span><br><span class="line">    RootSta: CERcvd- MultCERcvd- UERcvd- MultUERcvd-</span><br><span class="line">             FirstFatal- NonFatalMsg- FatalMsg- IntMsg 0</span><br><span class="line">    ErrorSrc: ERR_COR: 0000 ERR_FATAL/NONFATAL: 0000</span><br></pre></td></tr></table></figure><ul><li><strong>UESta</strong>ï¼šæ— ä¸å¯æ ¡æ­£é”™è¯¯ã€‚</li><li><strong>UEMsk</strong>ï¼šæ‰€æœ‰ä¸å¯æ ¡æ­£é”™è¯¯å¯æŠ¥å‘Šã€‚</li><li><strong>CESta</strong>ï¼šæ— å¯æ ¡æ­£é”™è¯¯ã€‚</li><li><strong>CEMsk</strong>ï¼šå¤§éƒ¨åˆ†å¯æ ¡æ­£é”™è¯¯å¯æŠ¥å‘Šã€‚</li><li><strong>AERCap</strong>ï¼šæ˜¾ç¤ºæ”¯æŒçš„AERåŠŸèƒ½ï¼Œå¦‚ECRCã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>PCIe AERæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºæ£€æµ‹å’ŒæŠ¥å‘ŠPCIeè®¾å¤‡çš„é”™è¯¯ã€‚é€šè¿‡ç›‘æ§AERå¯„å­˜å™¨ï¼Œèƒ½å¤ŸåŠæ—¶å‘ç°å’Œå¤„ç†æ½œåœ¨çš„é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> AER </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxæ­å»ºHTTPä»£ç†æœåŠ¡å™¨</title>
      <link href="/2024/10/31/proxy_server_setup/"/>
      <url>/2024/10/31/proxy_server_setup/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxæ­å»ºHTTPä»£ç†æœåŠ¡å™¨"><a href="#Linuxæ­å»ºHTTPä»£ç†æœåŠ¡å™¨" class="headerlink" title="Linuxæ­å»ºHTTPä»£ç†æœåŠ¡å™¨"></a>Linuxæ­å»ºHTTPä»£ç†æœåŠ¡å™¨</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>åœ¨ Ubuntu å’Œ RHEL ç³»ç»Ÿä¸Šæ­å»ºä»£ç†æœåŠ¡å™¨å¹¶é…ç½®é˜²ç«å¢™ï¼Œä»¥ç¡®ä¿ç½‘ç»œå®‰å…¨å’Œè®¿é—®æ§åˆ¶ã€‚æœ¬æ–‡ä¸»è¦ä½¿ç”¨ Squid ä½œä¸ºä»£ç†æœåŠ¡å™¨è½¯ä»¶ï¼Œå¹¶ä½¿ç”¨ UFWï¼ˆUbuntuï¼‰å’Œ firewalldï¼ˆRHELï¼‰æ¥ç®¡ç†é˜²ç«å¢™ã€‚</p><h2 id="2-èŒƒå›´"><a href="#2-èŒƒå›´" class="headerlink" title="2. èŒƒå›´"></a>2. èŒƒå›´</h2><p>é€‚ç”¨äºå¸Œæœ›é€šè¿‡ä»£ç†æœåŠ¡å™¨å®‰å…¨åœ°è®¿é—®äº’è”ç½‘çš„ç”¨æˆ·å’Œç»„ç»‡ï¼Œé€‚åˆ Ubuntu å’Œ RHEL ç³»ç»Ÿã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šè´Ÿè´£å®‰è£…å’Œé…ç½®ä»£ç†æœåŠ¡å™¨åŠé˜²ç«å¢™ï¼Œç¡®ä¿å…¶å®‰å…¨æ€§å’Œæ­£å¸¸è¿è¡Œã€‚</li><li><strong>ç”¨æˆ·</strong>ï¼šè´Ÿè´£é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®äº’è”ç½‘ï¼Œå¹¶éµå¾ªå…¬å¸ç½‘ç»œå®‰å…¨æ”¿ç­–ã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>å…·å¤‡ Ubuntu æˆ– RHEL æ“ä½œç³»ç»Ÿçš„æœåŠ¡å™¨æˆ–è®¡ç®—æœºã€‚</li><li>å…·å¤‡ç®¡ç†å‘˜æƒé™ã€‚</li></ul><h2 id="5-è¿‡ç¨‹"><a href="#5-è¿‡ç¨‹" class="headerlink" title="5. è¿‡ç¨‹"></a>5. è¿‡ç¨‹</h2><h3 id="æ­¥éª¤-1-æ›´æ–°ç³»ç»Ÿ"><a href="#æ­¥éª¤-1-æ›´æ–°ç³»ç»Ÿ" class="headerlink" title="æ­¥éª¤ 1: æ›´æ–°ç³»ç»Ÿ"></a>æ­¥éª¤ 1: æ›´æ–°ç³»ç»Ÿ</h3><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ï¼š</p><ul><li><p><strong>Ubuntu</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br></pre></td></tr></table></figure></li><li><p><strong>RHEL</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update -y</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ­¥éª¤-2-å®‰è£…-Squid"><a href="#æ­¥éª¤-2-å®‰è£…-Squid" class="headerlink" title="æ­¥éª¤ 2: å®‰è£… Squid"></a>æ­¥éª¤ 2: å®‰è£… Squid</h3><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£… Squidï¼š</p><ul><li><p><strong>Ubuntu</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install squid -y</span><br></pre></td></tr></table></figure></li><li><p><strong>RHEL</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install squid -y</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ­¥éª¤-3-é…ç½®-Squid"><a href="#æ­¥éª¤-3-é…ç½®-Squid" class="headerlink" title="æ­¥éª¤ 3: é…ç½® Squid"></a>æ­¥éª¤ 3: é…ç½® Squid</h3><ol><li>ç¼–è¾‘ Squid é…ç½®æ–‡ä»¶ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/squid/squid.conf</span><br></pre></td></tr></table></figure></li><li>é…ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acl localnet src 192.168.1.0/24  # é€‚é…å±€åŸŸç½‘IPæ®µ</span><br><span class="line">http_access allow localnet</span><br><span class="line">http_access deny all</span><br></pre></td></tr></table></figure></li><li>è®¾ç½®ä»£ç†ç«¯å£ï¼ˆé»˜è®¤ä¸º 3128ï¼‰ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http_port 3128</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ­¥éª¤-4-å®‰è£…å’Œé…ç½®é˜²ç«å¢™"><a href="#æ­¥éª¤-4-å®‰è£…å’Œé…ç½®é˜²ç«å¢™" class="headerlink" title="æ­¥éª¤ 4: å®‰è£…å’Œé…ç½®é˜²ç«å¢™"></a>æ­¥éª¤ 4: å®‰è£…å’Œé…ç½®é˜²ç«å¢™</h3><ul><li><p><strong>Ubuntu ä½¿ç”¨ UFW</strong>:</p><ol><li>å®‰è£… UFWï¼ˆå¦‚æœæœªå®‰è£…ï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ufw -y</span><br></pre></td></tr></table></figure></li><li>å…è®¸é€šè¿‡ä»£ç†ç«¯å£è®¿é—®ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 3128/tcp</span><br></pre></td></tr></table></figure></li><li>å¯ç”¨ UFWï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw <span class="built_in">enable</span></span><br></pre></td></tr></table></figure></li><li>æ£€æŸ¥ UFW çŠ¶æ€ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure></li></ol></li><li><p><strong>RHEL ä½¿ç”¨ firewalld</strong>:</p><ol><li>å¯ç”¨ firewalldï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start firewalld</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> firewalld</span><br></pre></td></tr></table></figure></li><li>å…è®¸é€šè¿‡ä»£ç†ç«¯å£è®¿é—®ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port=3128/tcp --permanent</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li>æ£€æŸ¥ firewalld çŠ¶æ€ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --state</span><br></pre></td></tr></table></figure></li></ol></li></ul><h3 id="æ­¥éª¤-5-é‡å¯-Squid-æœåŠ¡"><a href="#æ­¥éª¤-5-é‡å¯-Squid-æœåŠ¡" class="headerlink" title="æ­¥éª¤ 5: é‡å¯ Squid æœåŠ¡"></a>æ­¥éª¤ 5: é‡å¯ Squid æœåŠ¡</h3><p>åœ¨ä¿®æ”¹é…ç½®åï¼Œé‡å¯ Squid ä»¥åº”ç”¨æ›´æ”¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart squid</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-6-æ£€æŸ¥-Squid-çŠ¶æ€"><a href="#æ­¥éª¤-6-æ£€æŸ¥-Squid-çŠ¶æ€" class="headerlink" title="æ­¥éª¤ 6: æ£€æŸ¥ Squid çŠ¶æ€"></a>æ­¥éª¤ 6: æ£€æŸ¥ Squid çŠ¶æ€</h3><p>ç¡®ä¿ Squid æ­£åœ¨è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status squid</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-7-é…ç½®å®¢æˆ·ç«¯"><a href="#æ­¥éª¤-7-é…ç½®å®¢æˆ·ç«¯" class="headerlink" title="æ­¥éª¤ 7: é…ç½®å®¢æˆ·ç«¯"></a>æ­¥éª¤ 7: é…ç½®å®¢æˆ·ç«¯</h3><p>åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºä¸Šï¼Œå°†ç½‘ç»œä»£ç†è®¾ç½®ä¸ºæœåŠ¡å™¨çš„ IP åœ°å€å’Œé…ç½®çš„ç«¯å£ï¼ˆä¾‹å¦‚ï¼Œ<code>http://&lt;server-ip&gt;:3128</code>ï¼‰ã€‚</p><h2 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h2><p><img src="https://cybrix.ai/workflow_diagrams/static/a444ca81-4fd1-4550-8fa9-876bb5205063.png" alt="ä»£ç†æœåŠ¡å™¨æ­å»ºæµç¨‹å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Proxy </tag>
            
            <tag> Squid </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Linuxä¸Šä½¿ç”¨ `grep`</title>
      <link href="/2024/10/21/linux_grep_command/"/>
      <url>/2024/10/21/linux_grep_command/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨Linuxä¸Šä½¿ç”¨-grep"><a href="#åœ¨Linuxä¸Šä½¿ç”¨-grep" class="headerlink" title="åœ¨Linuxä¸Šä½¿ç”¨ grep"></a>åœ¨Linuxä¸Šä½¿ç”¨ <code>grep</code></h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p><code>grep</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæœç´¢æ–‡ä»¶ä¸­çš„æ–‡æœ¬æ¨¡å¼ã€‚é€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æˆ·å¯ä»¥é«˜æ•ˆåœ°æŸ¥æ‰¾å’Œè¿‡æ»¤æ•°æ®ã€‚</p><h2 id="2-èŒƒå›´"><a href="#2-èŒƒå›´" class="headerlink" title="2. èŒƒå›´"></a>2. èŒƒå›´</h2><p>é€‚ç”¨äºéœ€è¦å¤„ç†å’Œåˆ†ææ–‡æœ¬æ•°æ®çš„ç”¨æˆ·ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç®¡ç†å‘˜ã€å¼€å‘äººå‘˜å’Œæ•°æ®åˆ†æå¸ˆã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ç”¨æˆ·</strong>ï¼šè¿›è¡Œ <code>grep</code> çš„ä½¿ç”¨å’Œæ“ä½œã€‚</li><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šè´Ÿè´£ç»´æŠ¤ç³»ç»Ÿç¯å¢ƒï¼Œç¡®ä¿ <code>grep</code> å·¥å…·å¯ç”¨ã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>ç³»ç»Ÿéœ€å®‰è£… Unix&#x2F;Linux æˆ–è€…æ”¯æŒ <code>grep</code> å‘½ä»¤çš„ç¯å¢ƒã€‚</li><li>åŸºç¡€çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li></ul><h2 id="5-è¿‡ç¨‹"><a href="#5-è¿‡ç¨‹" class="headerlink" title="5. è¿‡ç¨‹"></a>5. è¿‡ç¨‹</h2><h3 id="5-1-åŸºæœ¬ç”¨æ³•"><a href="#5-1-åŸºæœ¬ç”¨æ³•" class="headerlink" title="5.1 åŸºæœ¬ç”¨æ³•"></a>5.1 åŸºæœ¬ç”¨æ³•</h3><p>ä½¿ç”¨ <code>grep</code> å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [é€‰é¡¹] <span class="string">&#x27;æ¨¡å¼&#x27;</span> æ–‡ä»¶å</span><br></pre></td></tr></table></figure><h3 id="5-2-å¸¸è§é€‰é¡¹åŠç¤ºä¾‹"><a href="#5-2-å¸¸è§é€‰é¡¹åŠç¤ºä¾‹" class="headerlink" title="5.2 å¸¸è§é€‰é¡¹åŠç¤ºä¾‹"></a>5.2 å¸¸è§é€‰é¡¹åŠç¤ºä¾‹</h3><ol><li><p><strong>å¿½ç•¥å¤§å°å†™</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -i <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>åå‘åŒ¹é…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>é€’å½’æœç´¢</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&#x27;hello&#x27;</span> /path/to/directory/</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºè¡Œå·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ—å‡ºæ–‡ä»¶å</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -l <span class="string">&#x27;hello&#x27;</span> *.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>ç»Ÿè®¡åŒ¹é…è¡Œæ•°</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -c <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>ä»…æ˜¾ç¤ºåŒ¹é…éƒ¨åˆ†</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -o <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>é«˜äº®åŒ¹é…éƒ¨åˆ†</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep --color <span class="string">&#x27;hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š<br>ä½¿ç”¨ <code>-E</code> é€‰é¡¹å¯å¯ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ”¯æŒæ›´å¤æ‚çš„åŒ¹é…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;hello|world&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p><code>-E</code> å‚æ•°ç”¨äºå¯ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼ˆEREï¼‰ï¼Œä½¿å¾—å¯ä»¥ä½¿ç”¨æ›´å¤šå¤æ‚çš„åŒ¹é…æ¨¡å¼ã€‚ä¸åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBREï¼‰ç›¸æ¯”ï¼Œæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒæ›´å¤šçš„å…ƒå­—ç¬¦å’Œè¯­æ³•ç®€åŒ–ã€‚</p><p>9.1. <strong>æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹ç‚¹</strong></p><ul><li><strong>æ— éœ€è½¬ä¹‰çš„å…ƒå­—ç¬¦</strong>ï¼šåœ¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œä¸€äº›å…ƒå­—ç¬¦ï¼ˆå¦‚ <code>+</code>, <code>?</code>, <code>|</code>, <code>&#123;&#125;</code>ï¼‰å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦ç”¨ <code>\</code> è½¬ä¹‰ã€‚</li></ul><p>9.2. å¸¸è§çš„å…ƒå­—ç¬¦</p><ul><li><code>|</code>ï¼šè¡¨ç¤ºâ€œæˆ–â€æ“ä½œç¬¦ã€‚</li><li><code>+</code>ï¼šè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>?</code>ï¼šè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚</li><li><code>&#123;n&#125;</code>ï¼šè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å‡ºç°ç²¾ç¡®çš„ n æ¬¡ã€‚</li><li><code>&#123;n,&#125;</code>ï¼šè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å‡ºç°è‡³å°‘ n æ¬¡ã€‚</li><li><code>&#123;n,m&#125;</code>ï¼šè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å‡ºç° n æ¬¡åˆ° m æ¬¡ã€‚</li></ul><p>9.3. ä½¿ç”¨ç¤ºä¾‹</p><ol><li><p><strong>åŒ¹é…å¤šä¸ªè¯</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;cat|dog&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p>è¿™å°†åŒ¹é…æ–‡ä»¶ä¸­åŒ…å«â€œcatâ€æˆ–â€œdogâ€çš„è¡Œã€‚</p></li><li><p><strong>åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;he+llo&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p>è¿™å°†åŒ¹é…â€œhelloâ€ï¼Œ â€œheeeeeelloâ€ç­‰ã€‚</p></li><li><p><strong>åŒ¹é…å¯é€‰å­—ç¬¦</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;colou?r&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p>è¿™å°†åŒ¹é…â€œcolorâ€æˆ–â€œcolourâ€ã€‚</p></li><li><p><strong>ä½¿ç”¨èŠ±æ‹¬å·æŒ‡å®šæ•°é‡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;a&#123;2,5&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p>è¿™å°†åŒ¹é…åŒ…å«ä¸¤ä¸ªåˆ°äº”ä¸ªè¿ç»­â€œaâ€çš„è¡Œï¼Œå¦‚â€œaaâ€ï¼Œâ€œaaaâ€ï¼Œâ€œaaaaâ€ï¼Œâ€œaaaaaâ€ã€‚</p></li><li><p><strong>ç»„åˆä½¿ç”¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;^[A-Z]+|[0-9]&#123;3&#125;$&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><p>è¿™å°†åŒ¹é…ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„è¡Œæˆ–ä»¥ä¸‰ä¸ªæ•°å­—ç»“å°¾çš„è¡Œã€‚</p></li></ol></li></ol><h3 id="5-3-ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#5-3-ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="5.3 ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>5.3 ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</h3><p><code>grep</code> æ”¯æŒåŸºæœ¬å’Œæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œå¤æ‚çš„åŒ¹é…ï¼š</p><ul><li><strong>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;h.llo&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><strong>åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;he*llo&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><strong>åŒ¹é…è¡Œçš„å¼€å¤´</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;^hello&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li><li><strong>åŒ¹é…è¡Œçš„ç»“å°¾</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;hello$&#x27;</span> file.txt</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-4-ç®¡é“ä¸-grep"><a href="#5-4-ç®¡é“ä¸-grep" class="headerlink" title="5.4 ç®¡é“ä¸ grep"></a>5.4 ç®¡é“ä¸ <code>grep</code></h3><p>å¯ä»¥å°†å…¶ä»–å‘½ä»¤çš„è¾“å‡ºä¼ é€’ç»™ <code>grep</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep <span class="string">&#x27;nginx&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="5-5-å®é™…åº”ç”¨ç¤ºä¾‹"><a href="#5-5-å®é™…åº”ç”¨ç¤ºä¾‹" class="headerlink" title="5.5 å®é™…åº”ç”¨ç¤ºä¾‹"></a>5.5 å®é™…åº”ç”¨ç¤ºä¾‹</h3><ol><li><p><strong>æŸ¥æ‰¾è¿›ç¨‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep <span class="string">&#x27;nginx&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è¿‡æ»¤æ—¥å¿—æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f /var/log/syslog | grep <span class="string">&#x27;error&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹é…ç½®æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -i <span class="string">&#x27;listen&#x27;</span> /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-å‚è€ƒæ–‡çŒ®"><a href="#6-å‚è€ƒæ–‡çŒ®" class="headerlink" title="6. å‚è€ƒæ–‡çŒ®"></a>6. å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="https://www.gnu.org/software/grep/manual/grep.html">GNU Grep Manual</a></li><li><a href="https://linuxcommand.org/">Linux Command Line</a></li></ul><p><img src="https://cybrix.ai/workflow_diagrams/static/8e5d225f-1873-4bc3-a9ef-98f192d1f01d.png" alt="grep ä½¿ç”¨æµç¨‹å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Memory Rank/Channel/DPC</title>
      <link href="/2024/09/25/memory_dpc_rank_channel/"/>
      <url>/2024/09/25/memory_dpc_rank_channel/</url>
      
        <content type="html"><![CDATA[<h1 id="Memory-Rank-Channel-DPC"><a href="#Memory-Rank-Channel-DPC" class="headerlink" title="Memory Rank&#x2F;Channel&#x2F;DPC"></a>Memory Rank&#x2F;Channel&#x2F;DPC</h1><p>å†…å­˜ <strong>Rank</strong>ã€<strong>Channel</strong> å’Œ <strong>DPCï¼ˆDIMMs per Channelï¼‰</strong> è¿™ä¸‰ä¸ªæ¦‚å¿µä¸€èµ·å†³å®šäº†ç³»ç»Ÿçš„å†…å­˜é…ç½®ã€æ€§èƒ½å’Œå¸¦å®½ã€‚è®©æˆ‘ä»¬ä»å„è‡ªçš„å®šä¹‰å’Œç›¸äº’å…³ç³»æ¥è®¨è®ºå®ƒä»¬ï¼š</p><h3 id="1-Memory-Rankï¼ˆå†…å­˜Rankï¼‰"><a href="#1-Memory-Rankï¼ˆå†…å­˜Rankï¼‰" class="headerlink" title="1. Memory Rankï¼ˆå†…å­˜Rankï¼‰"></a>1. <strong>Memory Rankï¼ˆå†…å­˜Rankï¼‰</strong></h3><p>å†…å­˜ Rank æŒ‡çš„æ˜¯ä¸€æ¡å†…å­˜æ¡ä¸Šæœ‰å¤šå°‘ç»„å†…å­˜èŠ¯ç‰‡ï¼Œè¿™äº›ç»„å¯ä»¥ç‹¬ç«‹è®¿é—®ã€‚Rank å†³å®šäº†å†…å­˜æ¡çš„å†…éƒ¨ç»„ç»‡ç»“æ„ã€‚</p><ul><li>**Single Rank (å•Rank)**ï¼šä¸€æ¡å†…å­˜æ¡ä¸­çš„å†…å­˜èŠ¯ç‰‡è¢«åˆ’åˆ†ä¸ºä¸€ä¸ªé€»è¾‘ç»„ï¼Œæ‰€æœ‰èŠ¯ç‰‡å¯ä»¥åŒæ—¶è¢«è®¿é—®ã€‚</li><li>**Dual Rank (åŒRank)**ï¼šä¸€æ¡å†…å­˜æ¡ä¸­çš„å†…å­˜èŠ¯ç‰‡åˆ†ä¸ºä¸¤ä¸ªé€»è¾‘ç»„ï¼Œå†…å­˜æ§åˆ¶å™¨ä¸€æ¬¡åªèƒ½è®¿é—®ä¸€ä¸ªç»„ã€‚åŒRankå†…å­˜ä¸€èˆ¬æ¯”å•Rankå†…å­˜çš„æ€§èƒ½ç¨å¥½ï¼Œä½†å¯¹ç³»ç»Ÿçš„æ”¯æŒè¦æ±‚è¾ƒé«˜ã€‚</li><li>**Quad Rank (å››Rank)**ï¼šå†…å­˜æ¡ä¸­çš„å†…å­˜èŠ¯ç‰‡åˆ†ä¸ºå››ä¸ªé€»è¾‘ç»„ï¼Œé€šå¸¸ç”¨äºå¤§å®¹é‡å†…å­˜æ¡ã€‚</li></ul><p><strong>Rankçš„å½±å“</strong>ï¼šæ›´å¤šçš„Ranké€šå¸¸æ„å‘³ç€å†…å­˜å®¹é‡æ›´å¤§ï¼Œèƒ½å¤Ÿæå‡å†…å­˜å¸¦å®½ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´ç³»ç»Ÿå»¶è¿Ÿå¢åŠ ï¼Œå…¼å®¹æ€§å˜å·®ã€‚æŸäº›ä¸»æ¿é™åˆ¶äº†æ”¯æŒçš„ Rank æ•°é‡ã€‚</p><p><img src="https://www.oempcworld.com/wordpress/wp-content/uploads/2020/02/SinglevsDualvsQuadRAM.jpg" alt="Memory Rank"></p><p><img src="https://i0.wp.com/blog.memory4less.com/wp-content/uploads/2022/09/single-rank-vs-dual-rank-memory.jpg" alt="Memory Rank"></p><h3 id="2-Memory-Channelï¼ˆå†…å­˜é€šé“ï¼‰"><a href="#2-Memory-Channelï¼ˆå†…å­˜é€šé“ï¼‰" class="headerlink" title="2. Memory Channelï¼ˆå†…å­˜é€šé“ï¼‰"></a>2. <strong>Memory Channelï¼ˆå†…å­˜é€šé“ï¼‰</strong></h3><p>Memory Channel æŒ‡çš„æ˜¯ä¸»æ¿ä¸å†…å­˜ä¹‹é—´çš„æ•°æ®é€šé“æ•°é‡ï¼Œå†³å®šäº†ä¸»æ¿ä¸å†…å­˜é€šä¿¡çš„å¹¶è¡Œèƒ½åŠ›ã€‚</p><ul><li><strong>å•é€šé“ï¼ˆSingle Channelï¼‰</strong>ï¼šåªæœ‰ä¸€ä¸ªé€šé“ç”¨äºä¸å†…å­˜é€šä¿¡ï¼Œå¸¦å®½è¾ƒä½ã€‚</li><li><strong>åŒé€šé“ï¼ˆDual Channelï¼‰</strong>ï¼šä¸¤ä¸ªé€šé“ç”¨äºä¸å†…å­˜é€šä¿¡ï¼Œå¸¦å®½æ˜¯å•é€šé“çš„ä¸¤å€ã€‚</li><li><strong>å››é€šé“ï¼ˆQuad Channelï¼‰</strong>ï¼šå››ä¸ªé€šé“åŒæ—¶å·¥ä½œï¼Œå¤§å¹…æé«˜å†…å­˜å¸¦å®½ï¼Œå¤šç”¨äºé«˜æ€§èƒ½çš„å·¥ä½œç«™å’ŒæœåŠ¡å™¨ã€‚</li></ul><p><strong>Channelçš„å½±å“</strong>ï¼šæ›´å¤šçš„é€šé“å¯ä»¥å¢åŠ å†…å­˜å¸¦å®½ï¼Œæå‡æ•°æ®ä¼ è¾“æ•ˆç‡ï¼Œé™ä½ç“¶é¢ˆã€‚ç°ä»£ä¸»æ¿é€šå¸¸æ”¯æŒåŒé€šé“ç”šè‡³å››é€šé“é…ç½®ã€‚<br><img src="https://infohub.delltechnologies.com/static/media/9198938f-8c47-5a0e-82d9-6db6a62cd3f7/DAM-df9ef174-c6d7-41d7-9876-fd664ccd00e2/out/1856.009.png" alt="Memory Channel"></p><h3 id="3-DPC-DIMMs-per-Channel"><a href="#3-DPC-DIMMs-per-Channel" class="headerlink" title="3. DPC (DIMMs per Channel)"></a>3. <strong>DPC (DIMMs per Channel)</strong></h3><p>DPC æ˜¯æŒ‡æ¯ä¸ªå†…å­˜é€šé“ä¸Šå®‰è£…çš„å†…å­˜æ¡æ•°é‡ã€‚å¸¸è§çš„é…ç½®æœ‰ï¼š</p><ul><li>**1DPC (One DIMM per Channel)**ï¼šæ¯ä¸ªå†…å­˜é€šé“åªæœ‰ä¸€æ¡å†…å­˜æ¡ã€‚è¿™ç§é…ç½®ä¸‹å†…å­˜é¢‘ç‡è¾ƒé«˜ï¼Œç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§é€šå¸¸æ›´å¥½ã€‚</li><li>**2DPC (Two DIMMs per Channel)**ï¼šæ¯ä¸ªå†…å­˜é€šé“ä¸Šæœ‰ä¸¤æ¡å†…å­˜æ¡ã€‚è¿™ç§é…ç½®å¯ä»¥å¢åŠ ç³»ç»Ÿçš„å†…å­˜å®¹é‡ï¼Œä½†ç”±äºå¤šä¸ªå†…å­˜æ¡å…±äº«åŒä¸€ä¸ªé€šé“ï¼Œå†…å­˜é¢‘ç‡å¯èƒ½ä¼šä¸‹é™ï¼Œå»¶è¿Ÿå¢åŠ ã€‚</li><li><strong>æ›´å¤šçš„DPC</strong>ï¼šä¸€äº›é«˜ç«¯æœåŠ¡å™¨ä¸»æ¿æ”¯æŒæ¯ä¸ªé€šé“ä¸Šå¤šè¾¾ 3DPC æˆ– 4DPC çš„é…ç½®ï¼Œä½†è¿™æ ·çš„é…ç½®æ›´å¸¸ç”¨äºéœ€è¦è¶…å¤§å†…å­˜å®¹é‡çš„ç³»ç»Ÿã€‚</li></ul><p><strong>DPCçš„å½±å“</strong>ï¼š1DPC é…ç½®é€šå¸¸æ€§èƒ½æœ€å¥½ï¼Œé¢‘ç‡è¾ƒé«˜ï¼›2DPC å¢åŠ äº†å®¹é‡ï¼Œä½†é¢‘ç‡å’Œæ€§èƒ½å¯èƒ½ä¼šå—åˆ°å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜é¢‘å†…å­˜é…ç½®ä¸‹ã€‚</p><p><img src="https://www.intel.com/content/dam/support/us/en/images/processors/88926_image1.png" alt="Memory DPC"></p><h3 id="å†…å­˜-Rankã€Channel-å’Œ-DPC-ä¹‹é—´çš„å…³ç³»"><a href="#å†…å­˜-Rankã€Channel-å’Œ-DPC-ä¹‹é—´çš„å…³ç³»" class="headerlink" title="å†…å­˜ Rankã€Channel å’Œ DPC ä¹‹é—´çš„å…³ç³»"></a><strong>å†…å­˜ Rankã€Channel å’Œ DPC ä¹‹é—´çš„å…³ç³»</strong></h3><p>è¿™ä¸‰ä¸ªæ¦‚å¿µåœ¨å†…å­˜ç³»ç»Ÿä¸­ç›¸äº’ä½œç”¨ï¼Œå½±å“ç€æ•´ä½“çš„å†…å­˜æ€§èƒ½ã€å®¹é‡å’Œå¸¦å®½ã€‚</p><ol><li><p><strong>Rank å’Œ Channel çš„å…³ç³»</strong>ï¼š</p><ul><li><strong>Rank</strong> å’Œ <strong>Channel</strong> æ˜¯ç‹¬ç«‹çš„æ¦‚å¿µã€‚ä½ å¯ä»¥åœ¨å•é€šé“é…ç½®ä¸­ä½¿ç”¨å¤šRankå†…å­˜æ¡ï¼Œæˆ–åœ¨åŒé€šé“é…ç½®ä¸­ä½¿ç”¨å•Rankå†…å­˜æ¡ã€‚æ›´å¤šçš„é€šé“é€šå¸¸æ„å‘³ç€æ›´é«˜çš„å¸¦å®½ï¼Œè€Œæ›´å¤šçš„Rankå¯ä»¥æå‡å†…å­˜æ§åˆ¶å™¨çš„è®¿é—®æ•ˆç‡ã€‚</li><li>ä¾‹å¦‚ï¼ŒåŒé€šé“ + åŒRanké…ç½®å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤æ¡å†…å­˜æ¡ä¸­çš„å¤šä¸ªRankï¼Œæé«˜æ•°æ®ä¼ è¾“çš„å¹¶è¡Œæ€§ã€‚</li></ul></li><li><p><strong>Rank å’Œ DPC çš„å…³ç³»</strong>ï¼š</p><ul><li><strong>Rank</strong> å†³å®šäº†æ¯æ¡å†…å­˜æ¡çš„é€»è¾‘åˆ†ç»„ï¼Œè€Œ <strong>DPC</strong> åˆ™å†³å®šäº†æ¯ä¸ªé€šé“ä¸Šæœ‰å¤šå°‘æ¡å†…å­˜ã€‚å¦‚æœä¸€ä¸ªé€šé“ä¸Šæœ‰ä¸¤æ¡åŒRankå†…å­˜æ¡ï¼ˆå³2DPC+åŒRankï¼‰ï¼Œç³»ç»Ÿä¼šå¤„ç†å¤šä¸ªRankå’Œå¤šä¸ªå†…å­˜æ¡ï¼Œè¿™ç§é…ç½®å¯èƒ½ä¼šå¢åŠ å»¶è¿Ÿï¼Œä½†ä¹Ÿèƒ½å¸¦æ¥æ›´å¤§çš„å†…å­˜å®¹é‡ã€‚</li><li>ä½¿ç”¨å¤šRankå†…å­˜æ¡çš„åŒæ—¶å¢åŠ DPCæ•°é‡ï¼Œç³»ç»Ÿåœ¨å¤„ç†å¤šä¸ªRankæ—¶éœ€è¦æ›´å¤æ‚çš„æ§åˆ¶æœºåˆ¶ï¼Œé¢‘ç‡å¯èƒ½ä¸‹é™ï¼Œç¨³å®šæ€§ä¹Ÿå¯èƒ½å—åˆ°å½±å“ã€‚</li></ul></li><li><p><strong>Channel å’Œ DPC çš„å…³ç³»</strong>ï¼š</p><ul><li><strong>Channel</strong> å†³å®šäº†å¹¶è¡Œä¼ è¾“çš„èƒ½åŠ›ï¼Œè€Œ <strong>DPC</strong> å†³å®šäº†æ¯ä¸ªé€šé“ä¸Šæœ‰å¤šå°‘å†…å­˜æ¡ã€‚æ¯”å¦‚ï¼Œåœ¨åŒé€šé“é…ç½®ä¸­ï¼Œæ¯ä¸ªé€šé“ä¸Šéƒ½å¯ä»¥æœ‰ä¸€æ¡ï¼ˆ1DPCï¼‰æˆ–ä¸¤æ¡ï¼ˆ2DPCï¼‰å†…å­˜æ¡ã€‚å¦‚æœä½ åœ¨åŒé€šé“ä¸Šä½¿ç”¨2DPCï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­å°†æœ‰4æ¡å†…å­˜æ¡ï¼Œå¹¶ä¸”å¸¦å®½ä¼šå¢åŠ ï¼Œä½†é¢‘ç‡å¯èƒ½ä¼šä¸‹é™ã€‚</li></ul></li></ol><h3 id="ç¤ºä¾‹é…ç½®ï¼š"><a href="#ç¤ºä¾‹é…ç½®ï¼š" class="headerlink" title="ç¤ºä¾‹é…ç½®ï¼š"></a><strong>ç¤ºä¾‹é…ç½®</strong>ï¼š</h3><ul><li><strong>åŒé€šé“ + 1DPC + å•Rank</strong>ï¼šä¸¤ä¸ªå†…å­˜é€šé“ï¼Œæ¯ä¸ªé€šé“ä¸Šæœ‰ä¸€æ¡å•Rankå†…å­˜ã€‚è¿™ç§é…ç½®å…·æœ‰é«˜å¸¦å®½å’Œé«˜é¢‘ç‡ï¼Œé€‚åˆè¿½æ±‚æ€§èƒ½çš„ç³»ç»Ÿã€‚</li><li><strong>åŒé€šé“ + 2DPC + åŒRank</strong>ï¼šä¸¤ä¸ªå†…å­˜é€šé“ï¼Œæ¯ä¸ªé€šé“ä¸Šæœ‰ä¸¤æ¡åŒRankå†…å­˜ã€‚è¿™ç§é…ç½®æä¾›æ›´å¤§çš„å†…å­˜å®¹é‡ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´å†…å­˜é¢‘ç‡ä¸‹é™ï¼Œå»¶è¿Ÿå¢åŠ ã€‚</li><li><strong>å››é€šé“ + 1DPC + Quad Rank</strong>ï¼šå››ä¸ªå†…å­˜é€šé“ï¼Œæ¯ä¸ªé€šé“ä¸Šæœ‰ä¸€æ¡å››Rankå†…å­˜æ¡ï¼Œå¸¸è§äºéœ€è¦è¶…å¤§å†…å­˜å®¹é‡çš„é«˜ç«¯æœåŠ¡å™¨ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><strong>Memory Rank</strong>ï¼šå†³å®šäº†å•æ¡å†…å­˜æ¡çš„å†…éƒ¨ç»“æ„å’Œå®¹é‡ï¼Œå½±å“æ€§èƒ½ã€‚</li><li><strong>Memory Channel</strong>ï¼šå†³å®šäº†ç³»ç»Ÿä¸å†…å­˜ä¹‹é—´çš„å¹¶è¡Œé€šä¿¡è·¯å¾„æ•°é‡ï¼Œæ›´å¤šçš„é€šé“æé«˜äº†å†…å­˜å¸¦å®½ã€‚</li><li>**DPC (DIMMs per Channel)**ï¼šå†³å®šäº†æ¯ä¸ªé€šé“ä¸Šæœ‰å¤šå°‘æ¡å†…å­˜æ¡ï¼Œå¢åŠ DPCæ•°é‡é€šå¸¸èƒ½æé«˜å†…å­˜å®¹é‡ï¼Œä½†å¯èƒ½é™ä½é¢‘ç‡å’Œæ€§èƒ½ã€‚</li></ul><p>è¿™ä¸‰ä¸ªå› ç´ å…±åŒä½œç”¨ï¼Œå½±å“å†…å­˜çš„å®¹é‡ã€å¸¦å®½ã€å»¶è¿Ÿå’Œæ•´ä½“ç³»ç»Ÿæ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> memory </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RHEL9 åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸</title>
      <link href="/2024/09/25/rhel9_kernel_switch/"/>
      <url>/2024/09/25/rhel9_kernel_switch/</url>
      
        <content type="html"><![CDATA[<h1 id="RHEL9-åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸"><a href="#RHEL9-åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸" class="headerlink" title="RHEL9 åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸"></a>RHEL9 åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸</h1><hr><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>åœ¨ Red Hat Enterprise Linux 9 (RHEL9) ä¸­åˆ‡æ¢é»˜è®¤å¯åŠ¨å†…æ ¸çš„è¯¦ç»†æ“ä½œæ­¥éª¤ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåˆ‡æ¢é»˜è®¤å†…æ ¸å¯èƒ½æ˜¯å¿…è¦çš„ï¼Œæ¯”å¦‚ä¸ºäº†æµ‹è¯•ã€æé«˜æ€§èƒ½æˆ–å¢å¼ºå®‰å…¨æ€§ã€‚</p><hr><h2 id="é€‚ç”¨èŒƒå›´"><a href="#é€‚ç”¨èŒƒå›´" class="headerlink" title="é€‚ç”¨èŒƒå›´"></a>é€‚ç”¨èŒƒå›´</h2><p>é€‚ç”¨äºè´Ÿè´£ç®¡ç†å’Œç»´æŠ¤ RHEL9 ç³»ç»Ÿçš„ç³»ç»Ÿç®¡ç†å‘˜ã€‚</p><hr><h2 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a>èŒè´£</h2><ul><li>ç³»ç»Ÿç®¡ç†å‘˜éœ€è¦ç¡®ä¿åœ¨åˆ‡æ¢é»˜è®¤å†…æ ¸åï¼Œç³»ç»Ÿçš„ç¨³å®šæ€§å’ŒåŠŸèƒ½æ€§ã€‚</li><li>æ‰§è¡Œè¿™äº›å‘½ä»¤éœ€è¦ root æƒé™æˆ–ç®¡ç†å‘˜æƒé™ã€‚</li><li>åœ¨ä¿®æ”¹å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œå»ºè®®è¿›è¡Œå¤‡ä»½ä»¥é˜²æ­¢ç³»ç»Ÿæ•…éšœã€‚</li></ul><hr><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><ul><li>RHEL9 ç³»ç»Ÿ</li><li>root æˆ–ç®¡ç†å‘˜æƒé™</li><li>å·²å®‰è£…çš„æ‰€æœ‰å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯</li><li>åŸºæœ¬çš„ Linux å¯åŠ¨æµç¨‹çŸ¥è¯†</li></ul><hr><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><ol><li><p><strong>æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„å†…æ ¸</strong></p><ul><li>åœ¨è®¾ç½®é»˜è®¤å†…æ ¸ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æŸ¥çœ‹ç³»ç»Ÿä¸­å·²å®‰è£…çš„å†…æ ¸åˆ—è¡¨ã€‚</li><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å†…æ ¸ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --info=ALL</span><br></pre></td></tr></table></figure></li><li>ç¤ºä¾‹è¾“å‡ºï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index=0</span><br><span class="line">kernel=&quot;/boot/vmlinuz-5.14.0-70.17.1.el9_0.x86_64&quot;</span><br><span class="line">...</span><br><span class="line">index=1</span><br><span class="line">kernel=&quot;/boot/vmlinuz-5.14.0-50.12.2.el9.x86_64&quot;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>è®¾ç½®é»˜è®¤å¯åŠ¨å†…æ ¸</strong></p><ul><li>ä»ä¸Šä¸€æ­¥è¾“å‡ºä¸­ï¼Œæ‰¾åˆ°æ‰€éœ€è®¾ç½®ä¸ºé»˜è®¤çš„å†…æ ¸çš„å®Œæ•´è·¯å¾„ï¼Œé€šå¸¸ç±»ä¼¼äº <code>/boot/vmlinuz-&lt;ç‰ˆæœ¬å·&gt;</code> çš„å½¢å¼ã€‚</li><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®é»˜è®¤å¯åŠ¨å†…æ ¸ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --set-default /boot/vmlinuz-&lt;ç‰ˆæœ¬å·&gt;</span><br></pre></td></tr></table></figure></li><li>ç¤ºä¾‹ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --set-default /boot/vmlinuz-5.14.0-70.17.1.el9_0.x86_64</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>éªŒè¯é»˜è®¤å¯åŠ¨å†…æ ¸</strong></p><ul><li>è®¾ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯é»˜è®¤å¯åŠ¨çš„å†…æ ¸ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-editenv list</span><br></pre></td></tr></table></figure></li><li>ç¤ºä¾‹è¾“å‡ºï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saved_entry=5.14.0-70.17.1.el9_0.x86_64</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h2 id="å…¶ä»–ç¤ºä¾‹"><a href="#å…¶ä»–ç¤ºä¾‹" class="headerlink" title="å…¶ä»–ç¤ºä¾‹"></a>å…¶ä»–ç¤ºä¾‹</h2><ul><li><p><strong>æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å†…æ ¸</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -r</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.14.0-70.17.1.el9_0.x86_64</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„å†…æ ¸ï¼ˆå¸¦è¯¦ç»†ä¿¡æ¯ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep kernel</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kernel-5.14.0-50.12.2.el9.x86_64</span><br><span class="line">kernel-5.14.0-70.17.1.el9_0.x86_64</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ—§å†…æ ¸ï¼ˆä¿æŒä¸¤ä¸ªå†…æ ¸ç‰ˆæœ¬ï¼‰</strong><br>åœ¨ç¡®ä¿æ–°çš„å†…æ ¸å¯ä»¥æ­£å¸¸å·¥ä½œåï¼Œå¯ä»¥åˆ é™¤æ—§çš„å†…æ ¸æ¥èŠ‚çœç£ç›˜ç©ºé—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf remove kernel-&lt;æ—§ç‰ˆæœ¬å·&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/">Red Hat å®˜æ–¹æ–‡æ¡£ï¼šGRUB2 å¯åŠ¨åŠ è½½å™¨</a></li><li><a href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/">RHEL9 å†…æ ¸ç®¡ç†æŒ‡å—</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> RHEL </tag>
            
            <tag> Kernel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„ (CA)ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾å</title>
      <link href="/2024/08/14/Digital_Certificate_SOP/"/>
      <url>/2024/08/14/Digital_Certificate_SOP/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„-CA-ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾å"><a href="#æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„-CA-ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾å" class="headerlink" title="æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„ (CA)ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾å"></a>æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„ (CA)ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾å</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>æ¦‚è¿°äº†ä½¿ç”¨æ•°å­—è¯ä¹¦ã€è¯ä¹¦é¢å‘æœºæ„ (CA)ã€ç§é’¥ã€å…¬é’¥å’Œæ•°å­—ç­¾åçš„åŸºæœ¬æ¦‚å¿µå’Œç¨‹åºã€‚è¿™äº›ç»„ä»¶å¯¹äºç¡®ä¿é€šä¿¡å®‰å…¨ã€éªŒè¯æ•°å­—æ•°æ®çš„çœŸå®æ€§å’Œå®Œæ•´æ€§è‡³å…³é‡è¦ã€‚</p><h2 id="2-é€‚ç”¨èŒƒå›´"><a href="#2-é€‚ç”¨èŒƒå›´" class="headerlink" title="2. é€‚ç”¨èŒƒå›´"></a>2. é€‚ç”¨èŒƒå›´</h2><p>é€‚ç”¨äºç»„ç»‡å†…è´Ÿè´£ç®¡ç†ã€éƒ¨ç½²å’Œä½¿ç”¨æ•°å­—è¯ä¹¦å’ŒåŠ å¯†æŠ€æœ¯çš„ITå®‰å…¨ä¸“ä¸šäººå‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜ã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ITå®‰å…¨å›¢é˜Ÿ</strong>ï¼šç®¡ç†æ•°å­—è¯ä¹¦çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬é¢å‘ã€æ›´æ–°å’ŒåŠé”€ï¼Œç¡®ä¿ç¬¦åˆå®‰å…¨ç­–ç•¥ã€‚</li><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šé…ç½®ç³»ç»Ÿä»¥ä½¿ç”¨æ•°å­—è¯ä¹¦ï¼Œå¹¶ç®¡ç†ç§é’¥çš„å®‰å…¨å­˜å‚¨ã€‚</li><li><strong>å¼€å‘äººå‘˜</strong>ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­é›†æˆå…¬é’¥å’Œç§é’¥ï¼Œä»¥å®ç°å®‰å…¨é€šä¿¡åè®®ã€‚</li><li><strong>ç»ˆç«¯ç”¨æˆ·</strong>ï¼šä½¿ç”¨é…ç½®äº†æœ‰æ•ˆå’Œå¯ä¿¡è¯ä¹¦çš„ç³»ç»Ÿã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>å¯ä¿¡çš„è¯ä¹¦é¢å‘æœºæ„ (CA) æˆ–å†…éƒ¨CAè®¾ç½®ã€‚</li><li>ç”ŸæˆåŠ å¯†å¯†é’¥å¯¹çš„å·¥å…·ï¼ˆä¾‹å¦‚OpenSSLï¼‰ã€‚</li><li>ç§é’¥çš„å®‰å…¨å­˜å‚¨æœºåˆ¶ï¼Œå¦‚ç¡¬ä»¶å®‰å…¨æ¨¡å— (HSM) æˆ–åŠ å¯†æ–‡ä»¶ã€‚</li><li>é…ç½®ä¸ºæ”¯æŒTLS&#x2F;SSLåè®®çš„åº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿï¼Œç”¨äºå®‰å…¨çš„æ•°æ®ä¼ è¾“ã€‚</li></ul><h2 id="5-æµç¨‹"><a href="#5-æµç¨‹" class="headerlink" title="5. æµç¨‹"></a>5. æµç¨‹</h2><p><img src="https://lilinth.github.io/picx-images-hosting/8740f369-7073-4439-9658-d2729bdfb355[1].13lp5jsm8r.webp" alt="8740f369-7073-4439-9658-d2729bdfb355[1]"></p><h3 id="5-1-ç”Ÿæˆå¯†é’¥å¯¹"><a href="#5-1-ç”Ÿæˆå¯†é’¥å¯¹" class="headerlink" title="5.1 ç”Ÿæˆå¯†é’¥å¯¹"></a>5.1 ç”Ÿæˆå¯†é’¥å¯¹</h3><ol><li><p><strong>ç”Ÿæˆç§é’¥</strong>ï¼š</p><ul><li>ä½¿ç”¨åŠ å¯†å·¥å…·ï¼ˆå¦‚OpenSSLï¼‰åˆ›å»ºç§é’¥ã€‚</li><li>ç¤ºä¾‹å‘½ä»¤ï¼š<code>openssl genpkey -algorithm RSA -out private_key.pem -aes256</code></li><li>ç§é’¥å¿…é¡»å®‰å…¨å­˜å‚¨ï¼Œå› ä¸ºå®ƒå¯¹äºåŠ å¯†å’Œç­¾ååˆ›å»ºè‡³å…³é‡è¦ã€‚</li></ul></li><li><p><strong>æ´¾ç”Ÿå…¬é’¥</strong>ï¼š</p><ul><li>ä»ç§é’¥ä¸­æå–å…¬é’¥ï¼Œå¯ä¸ä»–äººå…±äº«ã€‚</li><li>ç¤ºä¾‹å‘½ä»¤ï¼š<code>openssl rsa -pubout -in private_key.pem -out public_key.pem</code></li><li>å…¬é’¥ç”¨äºåŠ å¯†å’ŒéªŒè¯æ•°å­—ç­¾åã€‚</li></ul></li></ol><h3 id="5-2-åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚-CSR"><a href="#5-2-åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚-CSR" class="headerlink" title="5.2 åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)"></a>5.2 åˆ›å»ºè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)</h3><ol><li><strong>ç”ŸæˆCSR</strong>ï¼š<ul><li>ä½¿ç”¨ç§é’¥åˆ›å»ºåŒ…å«å…¬é’¥å’Œç»„ç»‡ä¿¡æ¯çš„CSRã€‚</li><li>ç¤ºä¾‹å‘½ä»¤ï¼š<code>openssl req -new -key private_key.pem -out csr.pem</code></li><li>å°†CSRæäº¤ç»™CAè¿›è¡ŒéªŒè¯å’Œè¯ä¹¦é¢å‘ã€‚</li></ul></li></ol><h3 id="5-3-è¯ä¹¦é¢å‘æœºæ„-CA-æ“ä½œ"><a href="#5-3-è¯ä¹¦é¢å‘æœºæ„-CA-æ“ä½œ" class="headerlink" title="5.3 è¯ä¹¦é¢å‘æœºæ„ (CA) æ“ä½œ"></a>5.3 è¯ä¹¦é¢å‘æœºæ„ (CA) æ“ä½œ</h3><ol><li><p><strong>ç­¾ç½²CSR</strong>ï¼š</p><ul><li>CAå®¡æ ¸CSRï¼ŒéªŒè¯åè¿›è¡Œç­¾åå¹¶é¢å‘æ•°å­—è¯ä¹¦ã€‚</li><li>è¯¥è¯ä¹¦ç”¨äºæœåŠ¡å™¨åœ¨å®‰å…¨é€šä¿¡ä¸­éªŒè¯å…¶èº«ä»½ã€‚</li><li>å†…éƒ¨CAçš„ç¤ºä¾‹å‘½ä»¤ï¼š<code>openssl x509 -req -days 365 -in csr.pem -signkey ca_private_key.pem -out certificate.pem</code></li></ul></li><li><p><strong>è¯ä¹¦æ›´æ–°</strong>ï¼š</p><ul><li>åœ¨è¯ä¹¦è¿‡æœŸä¹‹å‰ï¼Œç”Ÿæˆæ–°çš„CSRå¹¶æäº¤ç»™CAã€‚</li><li>CAé¢å‘æ–°çš„è¯ä¹¦ï¼Œå¹¶æ›´æ–°æœ‰æ•ˆæœŸã€‚</li></ul></li></ol><h3 id="5-4-æ•°å­—ç­¾åå’ŒéªŒè¯"><a href="#5-4-æ•°å­—ç­¾åå’ŒéªŒè¯" class="headerlink" title="5.4 æ•°å­—ç­¾åå’ŒéªŒè¯"></a>5.4 æ•°å­—ç­¾åå’ŒéªŒè¯</h3><ol><li><p><strong>åˆ›å»ºæ•°å­—ç­¾å</strong>ï¼š</p><ul><li>é€šè¿‡å¯¹æ¶ˆæ¯æˆ–æ–‡æ¡£è¿›è¡Œå“ˆå¸Œå¤„ç†å¹¶ä½¿ç”¨ç§é’¥åŠ å¯†å“ˆå¸Œå€¼æ¥ç­¾åã€‚</li><li>è¿™å¯ç¡®ä¿æ¶ˆæ¯çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚</li><li>ç¤ºä¾‹ï¼š<code>openssl dgst -sha256 -sign private_key.pem -out signature.sig file_to_sign.txt</code></li></ul></li><li><p><strong>éªŒè¯æ•°å­—ç­¾å</strong>ï¼š</p><ul><li>ä½¿ç”¨å‘é€æ–¹çš„å…¬é’¥è§£å¯†å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶ä¸æ ¹æ®æ”¶åˆ°çš„æ–‡æ¡£è®¡ç®—çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒï¼Œä»¥éªŒè¯ç­¾åçš„çœŸå®æ€§ã€‚</li><li>ç¤ºä¾‹ï¼š<code>openssl dgst -sha256 -verify public_key.pem -signature signature.sig file_to_verify.txt</code></li></ul></li></ol><h3 id="5-5-ç®¡ç†è¯ä¹¦åŠé”€"><a href="#5-5-ç®¡ç†è¯ä¹¦åŠé”€" class="headerlink" title="5.5 ç®¡ç†è¯ä¹¦åŠé”€"></a>5.5 ç®¡ç†è¯ä¹¦åŠé”€</h3><ol><li><strong>åŠé”€è¯ä¹¦</strong>ï¼š<ul><li>å¦‚æœè¯ä¹¦è¢«æ³„éœ²ï¼Œåº”ç«‹å³é€šè¿‡CAåŠé”€ã€‚</li><li>CAä¼šå°†è¯ä¹¦æ·»åŠ åˆ°è¯ä¹¦åŠé”€åˆ—è¡¨ (CRL) ä¸­ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥CRLä»¥é¿å…ä½¿ç”¨è¢«æ³„éœ²çš„è¯ä¹¦ã€‚</li><li>åˆ›å»ºCRLçš„ç¤ºä¾‹å‘½ä»¤ï¼š<code>openssl ca -gencrl -out crl.pem</code></li></ul></li></ol><h2 id="6-å‚è€ƒæ–‡çŒ®"><a href="#6-å‚è€ƒæ–‡çŒ®" class="headerlink" title="6. å‚è€ƒæ–‡çŒ®"></a>6. å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="https://www.openssl.org/docs/">OpenSSLæ–‡æ¡£</a></li><li><a href="https://www.digicert.com/ssl/">ç†è§£æ•°å­—è¯ä¹¦</a></li><li><a href="https://www.globalsign.com/en/blog/what-is-a-certificate-authority">è¯ä¹¦é¢å‘æœºæ„æ¦‚è¿°</a></li><li><a href="https://www.cloudflare.com/learning/ssl/what-is-public-key-infrastructure-pki/">PKIå’Œæ•°å­—ç­¾å</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Certificate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Fio å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•</title>
      <link href="/2024/08/14/fio_test/"/>
      <url>/2024/08/14/fio_test/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Fio-å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•"><a href="#ä½¿ç”¨-Fio-å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ Fio å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•"></a>ä½¿ç”¨ Fio å·¥å…·è¿›è¡Œæ€§èƒ½æµ‹è¯•</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Fioï¼ˆFlexible I&#x2F;O Testerï¼‰å·¥å…·è¿›è¡Œå­˜å‚¨æ€§èƒ½æµ‹è¯•ã€‚Fioæ˜¯ä¸€æ¬¾å¹¿æ³›åº”ç”¨çš„å·¥å…·ï¼Œèƒ½å¤Ÿæµ‹è¯•å—è®¾å¤‡å’Œæ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™æ€§èƒ½ã€‚æœ¬æ–‡å°†ç»“åˆå¤šä¸ªå®é™…ç¤ºä¾‹ï¼Œé€æ­¥è¯´æ˜å¦‚ä½•é…ç½®å’Œè¿è¡ŒFioæµ‹è¯•ï¼Œå¹¶è§£ææ¯ä¸ªæµ‹è¯•ç»“æœã€‚</p><h2 id="2-é€‚ç”¨èŒƒå›´"><a href="#2-é€‚ç”¨èŒƒå›´" class="headerlink" title="2. é€‚ç”¨èŒƒå›´"></a>2. é€‚ç”¨èŒƒå›´</h2><p>é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜ã€å­˜å‚¨å·¥ç¨‹å¸ˆå’Œå¼€å‘äººå‘˜ï¼Œä»–ä»¬éœ€è¦å¯¹å„ç§å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚HDDã€SSDã€RAIDé˜µåˆ—ã€SANå’ŒNASè®¾å¤‡ï¼‰è¿›è¡Œæ€§èƒ½è¯„ä¼°ã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>: è´Ÿè´£å®‰è£…å’Œé…ç½®Fioå·¥å…·ï¼Œç¡®ä¿æµ‹è¯•ç¯å¢ƒçš„ç¨³å®šæ€§å’Œä¸€è‡´æ€§ã€‚</li><li><strong>å­˜å‚¨å·¥ç¨‹å¸ˆ</strong>: è®¾è®¡æµ‹è¯•å‚æ•°å’Œè´Ÿè½½æ¨¡å‹ï¼Œä»¥æ¨¡æ‹Ÿå®é™…ä½¿ç”¨åœºæ™¯ã€‚</li><li><strong>å¼€å‘äººå‘˜</strong>: ä½¿ç”¨Fioç”Ÿæˆæ€§èƒ½æ•°æ®ï¼Œå¸®åŠ©ä¼˜åŒ–åº”ç”¨ç¨‹åºçš„I&#x2F;Oæ“ä½œã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>å®‰è£…äº†Fioå·¥å…·çš„ç³»ç»Ÿã€‚</li><li>å¯¹ç›®æ ‡å­˜å‚¨è®¾å¤‡çš„å®Œå…¨è®¿é—®æƒé™ã€‚</li><li>ç†è§£å­˜å‚¨è®¾å¤‡å’Œæ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬åŸç†ã€‚</li><li>é€‚å½“çš„æƒé™æ‰§è¡Œæ€§èƒ½æµ‹è¯•ï¼Œä»¥é¿å…å½±å“ç”Ÿäº§ç¯å¢ƒã€‚</li></ul><h2 id="5-æµç¨‹å’Œç¤ºä¾‹"><a href="#5-æµç¨‹å’Œç¤ºä¾‹" class="headerlink" title="5. æµç¨‹å’Œç¤ºä¾‹"></a>5. æµç¨‹å’Œç¤ºä¾‹</h2><h3 id="5-1-å®‰è£…-Fio"><a href="#5-1-å®‰è£…-Fio" class="headerlink" title="5.1 å®‰è£… Fio"></a>5.1 å®‰è£… Fio</h3><ol><li><p><strong>åœ¨Linuxä¸Šå®‰è£…Fio</strong>:</p><ul><li>å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆå¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…Fioã€‚</li><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…Fio:<ul><li><strong>Debian&#x2F;Ubuntu</strong>: <code>sudo apt-get install fio</code></li><li><strong>CentOS&#x2F;RHEL</strong>: <code>sudo yum install fio</code></li><li><strong>Fedora</strong>: <code>sudo dnf install fio</code></li></ul></li></ul></li><li><p><strong>éªŒè¯å®‰è£…</strong>:</p><ul><li>ä½¿ç”¨å‘½ä»¤ <code>fio --version</code> éªŒè¯Fioæ˜¯å¦æˆåŠŸå®‰è£…ã€‚</li></ul></li></ol><h3 id="5-2-åŸºæœ¬æµ‹è¯•å‘½ä»¤"><a href="#5-2-åŸºæœ¬æµ‹è¯•å‘½ä»¤" class="headerlink" title="5.2 åŸºæœ¬æµ‹è¯•å‘½ä»¤"></a>5.2 åŸºæœ¬æµ‹è¯•å‘½ä»¤</h3><ol><li><strong>è¿è¡Œç®€å•çš„è¯»å†™æµ‹è¯•</strong>:<ul><li>ä»¥ä¸‹å‘½ä»¤å°†åœ¨æŒ‡å®šçš„æ–‡ä»¶æˆ–è®¾å¤‡ä¸Šè¿è¡ŒåŸºæœ¬çš„é¡ºåºå†™å…¥å’Œè¯»å–æµ‹è¯•ã€‚</li><li>ç¤ºä¾‹å‘½ä»¤: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=basic_test --filename=/path/to/testfile --size=1G --rw=readwrite --bs=4k --ioengine=libaio --numjobs=1 --runtime=60 --group_reporting</span><br></pre></td></tr></table></figure></li><li>å‚æ•°è¯´æ˜:<ul><li><code>--name=basic_test</code>: æµ‹è¯•ä»»åŠ¡çš„åç§°ã€‚</li><li><code>--filename=/path/to/testfile</code>: æµ‹è¯•çš„ç›®æ ‡æ–‡ä»¶æˆ–è®¾å¤‡ã€‚</li><li><code>--size=1G</code>: æ–‡ä»¶å¤§å°ä¸º1GBã€‚</li><li><code>--rw=readwrite</code>: è¯»å†™æ··åˆæµ‹è¯•ã€‚</li><li><code>--bs=4k</code>: å—å¤§å°ä¸º4KBã€‚</li><li><code>--ioengine=libaio</code>: ä½¿ç”¨Linuxå¼‚æ­¥I&#x2F;Oå¼•æ“ã€‚</li><li><code>--numjobs=1</code>: ä½¿ç”¨å•ä¸ªå·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--runtime=60</code>: è¿è¡Œæ—¶é—´ä¸º60ç§’ã€‚</li><li><code>--group_reporting</code>: æ±‡æ€»æŠ¥å‘Šè¾“å‡ºã€‚</li></ul></li></ul></li></ol><h3 id="5-3-å¤æ‚æµ‹è¯•"><a href="#5-3-å¤æ‚æµ‹è¯•" class="headerlink" title="5.3 å¤æ‚æµ‹è¯•"></a>5.3 å¤æ‚æµ‹è¯•</h3><ol><li><p><strong>è¿è¡Œéšæœºè¯»å†™æµ‹è¯•</strong>:</p><ul><li>å¯¹å­˜å‚¨è®¾å¤‡è¿›è¡Œéšæœºè¯»å†™æµ‹è¯•ï¼Œä»¥æ¨¡æ‹Ÿå®é™…å·¥ä½œè´Ÿè½½ã€‚</li><li>ç¤ºä¾‹å‘½ä»¤:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=random_test --filename=/path/to/testfile --size=2G --rw=randrw --bs=4k --ioengine=libaio --numjobs=4 --runtime=120 --rwmixread=70 --group_reporting</span><br></pre></td></tr></table></figure></li><li>é¢å¤–å‚æ•°:<ul><li><code>--rw=randrw</code>: éšæœºè¯»å†™æµ‹è¯•ã€‚</li><li><code>--rwmixread=70</code>: è®¾ç½®è¯»æ“ä½œå æ¯”ä¸º70%ã€‚</li></ul></li></ul></li><li><p><strong>æµ‹è¯•å¤šçº¿ç¨‹æ€§èƒ½</strong>:</p><ul><li>ä½¿ç”¨å¤šä¸ªå·¥ä½œçº¿ç¨‹åŒæ—¶å¯¹è®¾å¤‡è¿›è¡Œè¯»å†™ï¼Œä»¥æµ‹è¯•å¤šçº¿ç¨‹æ€§èƒ½ã€‚</li><li>ç¤ºä¾‹å‘½ä»¤:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=multithread_test --filename=/path/to/testfile --size=4G --rw=randwrite --bs=8k --ioengine=libaio --numjobs=8 --runtime=180 --group_reporting</span><br></pre></td></tr></table></figure></li><li>è¯¥å‘½ä»¤ä½¿ç”¨8ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œéšæœºå†™æ“ä½œã€‚</li></ul></li></ol><h3 id="5-4-åˆ†æç»“æœ"><a href="#5-4-åˆ†æç»“æœ" class="headerlink" title="5.4 åˆ†æç»“æœ"></a>5.4 åˆ†æç»“æœ</h3><ol><li><p><strong>æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š</strong>:</p><ul><li>Fioçš„è¾“å‡ºä¼šåŒ…å«æ¯ä¸ªæµ‹è¯•çš„è¯¦ç»†æŠ¥å‘Šï¼ŒåŒ…æ‹¬ååé‡ã€IOPSã€å»¶è¿Ÿç­‰æŒ‡æ ‡ã€‚</li><li>ç¤ºä¾‹è¾“å‡ºåˆ†æ:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Run status group 0 (all jobs):</span><br><span class="line">  READ: io=1048576KB, bw=17496KB/s, iops=4374, runt= 60001msec</span><br><span class="line">  WRITE: io=1048576KB, bw=17496KB/s, iops=4374, runt= 60001msec</span><br></pre></td></tr></table></figure></li><li><code>bw</code>è¡¨ç¤ºå¸¦å®½ï¼ˆååé‡ï¼‰ï¼Œ<code>iops</code>è¡¨ç¤ºæ¯ç§’I&#x2F;Oæ“ä½œæ¬¡æ•°ï¼Œ<code>runt</code>è¡¨ç¤ºæµ‹è¯•è¿è¡Œæ—¶é—´ã€‚</li></ul></li><li><p><strong>ä¿å­˜ç»“æœ</strong>:</p><ul><li>å¯ä»¥å°†ç»“æœè¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ä¸­è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚</li><li>ä½¿ç”¨ <code>--output=&lt;filename&gt;</code> å‚æ•°ä¿å­˜æŠ¥å‘Šï¼Œä¾‹å¦‚:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=basic_test --filename=/path/to/testfile --size=1G --rw=readwrite --bs=4k --ioengine=libaio --numjobs=1 --runtime=60 --group_reporting --output=fio_report.txt</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="6-æ›´å¤šç¤ºä¾‹"><a href="#6-æ›´å¤šç¤ºä¾‹" class="headerlink" title="6. æ›´å¤šç¤ºä¾‹"></a>6. æ›´å¤šç¤ºä¾‹</h2><h3 id="6-1-åŸºæœ¬é¡ºåºè¯»å†™æµ‹è¯•"><a href="#6-1-åŸºæœ¬é¡ºåºè¯»å†™æµ‹è¯•" class="headerlink" title="6.1 åŸºæœ¬é¡ºåºè¯»å†™æµ‹è¯•"></a>6.1 åŸºæœ¬é¡ºåºè¯»å†™æµ‹è¯•</h3><ol><li><p><strong>é¡ºåºå†™å…¥æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•å­˜å‚¨è®¾å¤‡åœ¨é¡ºåºå†™å…¥æ•°æ®æ—¶çš„æ€§èƒ½ï¼Œè¿™å¯¹æ•°æ®ä»“åº“æˆ–è§†é¢‘å­˜å‚¨ç³»ç»Ÿç­‰å¤§æ–‡ä»¶é¡ºåºå†™å…¥åœºæ™¯éå¸¸é‡è¦ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=seq_write --filename=/path/to/testfile --size=10G --rw=write --bs=1M --direct=1 --ioengine=libaio --numjobs=1 --runtime=60 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>bw</code>: æµ‹è¯•æœŸé—´çš„å¹³å‡å¸¦å®½ï¼Œåæ˜ äº†è®¾å¤‡çš„é¡ºåºå†™å…¥é€Ÿåº¦ã€‚</li><li><code>iops</code>: æ¯ç§’I&#x2F;Oæ“ä½œæ¬¡æ•°ï¼Œé€šå¸¸ç”¨äºè¡¡é‡è®¾å¤‡çš„å“åº”èƒ½åŠ›ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>bw=500MB/s</code> å’Œ <code>iops=500</code>ï¼Œè¿™è¡¨æ˜è®¾å¤‡åœ¨æ­¤æµ‹è¯•ä¸­èƒ½å¤Ÿç»´æŒ500MB&#x2F;sçš„é¡ºåºå†™å…¥é€Ÿåº¦ã€‚</li></ul></li></ul></li><li><p><strong>é¡ºåºè¯»å–æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•å­˜å‚¨è®¾å¤‡åœ¨é¡ºåºè¯»å–æ•°æ®æ—¶çš„æ€§èƒ½ï¼Œé€‚ç”¨äºéœ€è¦å¤§é‡é¡ºåºè¯»å–æ“ä½œçš„åœºæ™¯ï¼Œå¦‚è§†é¢‘æ’­æ”¾æˆ–æ•°æ®åˆ†æã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=seq_read --filename=/path/to/testfile --size=10G --rw=<span class="built_in">read</span> --bs=1M --direct=1 --ioengine=libaio --numjobs=1 --runtime=60 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>bw</code>: æµ‹è¯•æœŸé—´çš„å¹³å‡è¯»å–å¸¦å®½ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>bw=600MB/s</code> è¡¨ç¤ºè®¾å¤‡èƒ½å¤Ÿä»¥600MB&#x2F;sçš„é€Ÿåº¦é¡ºåºè¯»å–æ•°æ®ï¼Œè¿™å¯¹äºé¡ºåºæ•°æ®è®¿é—®æ¨¡å¼çš„åº”ç”¨éå¸¸ç†æƒ³ã€‚</li></ul></li></ul></li></ol><h3 id="6-2-éšæœºè¯»å†™æµ‹è¯•"><a href="#6-2-éšæœºè¯»å†™æµ‹è¯•" class="headerlink" title="6.2 éšæœºè¯»å†™æµ‹è¯•"></a>6.2 éšæœºè¯»å†™æµ‹è¯•</h3><ol><li><p><strong>éšæœºå†™å…¥æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•è®¾å¤‡åœ¨éšæœºå†™å…¥æ•°æ®æ—¶çš„æ€§èƒ½ï¼Œæ¨¡æ‹Ÿæ•°æ®åº“å†™å…¥ã€æ—¥å¿—è®°å½•ç­‰éœ€è¦é¢‘ç¹å†™å…¥å°å—æ•°æ®çš„åœºæ™¯ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=rand_write --filename=/path/to/testfile --size=5G --rw=randwrite --bs=4k --direct=1 --ioengine=libaio --numjobs=4 --runtime=120 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>iops</code>: éšæœºå†™å…¥æ“ä½œçš„IOPSé€šå¸¸æ˜¯å…³æ³¨çš„é‡ç‚¹ï¼Œåæ˜ äº†è®¾å¤‡åœ¨å¤„ç†å°å—éšæœºå†™å…¥æ—¶çš„èƒ½åŠ›ã€‚</li><li><code>lat</code>: å»¶è¿Ÿæ—¶é—´ï¼Œè¡¨ç¤ºæ¯æ¬¡I&#x2F;Oæ“ä½œçš„å¹³å‡æ—¶é—´ï¼Œå»¶è¿Ÿè¶Šä½è¶Šå¥½ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>iops=20000</code> å’Œ <code>lat=0.1ms</code> è¡¨ç¤ºè®¾å¤‡åœ¨éšæœºå†™å…¥å°å—æ•°æ®æ—¶è¡¨ç°è‰¯å¥½ã€‚</li></ul></li></ul></li><li><p><strong>éšæœºè¯»å–æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•å­˜å‚¨è®¾å¤‡åœ¨éšæœºè¯»å–æ•°æ®æ—¶çš„æ€§èƒ½ï¼Œé€‚ç”¨äºOLTPæ•°æ®åº“æˆ–é«˜å¹¶å‘è¯»å–çš„åº”ç”¨åœºæ™¯ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=rand_read --filename=/path/to/testfile --size=5G --rw=randread --bs=4k --direct=1 --ioengine=libaio --numjobs=4 --runtime=120 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>iops</code> å’Œ <code>lat</code> æ˜¯è¯„ä¼°è®¾å¤‡éšæœºè¯»å–æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>iops=50000</code> å’Œ <code>lat=0.08ms</code>ï¼Œè¿™è¡¨æ˜è®¾å¤‡åœ¨é«˜è´Ÿè½½ä¸‹ä¹Ÿèƒ½å¿«é€Ÿå“åº”éšæœºè¯»å–è¯·æ±‚ã€‚</li></ul></li></ul></li><li><p><strong>éšæœºè¯»å†™æ··åˆæµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•è¯»å†™æ··åˆåœºæ™¯ä¸‹çš„å­˜å‚¨æ€§èƒ½ï¼Œå¸¸è§äºéœ€è¦åŒæ—¶å¤„ç†è¯»å–å’Œå†™å…¥è¯·æ±‚çš„ç³»ç»Ÿï¼Œå¦‚æ–‡ä»¶æœåŠ¡å™¨æˆ–è™šæ‹ŸåŒ–ç¯å¢ƒã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=rand_rw_mix --filename=/path/to/testfile --size=5G --rw=randrw --bs=4k --direct=1 --ioengine=libaio --numjobs=4 --runtime=120 --rwmixread=70 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>rwmixread=70</code> è®¾ç½®è¯»å†™æ¯”ä¾‹ä¸º70%è¯»å’Œ30%å†™ï¼Œè¿™èƒ½æµ‹è¯•å‡ºè®¾å¤‡åœ¨è¯»å†™æ··åˆè´Ÿè½½ä¸‹çš„è¡¨ç°ã€‚</li><li>è§‚å¯Ÿ <code>iops</code> å’Œ <code>lat</code> æ¥è¯„ä¼°åœ¨è¿™ç§æ··åˆåœºæ™¯ä¸‹çš„æ€§èƒ½ã€‚</li></ul></li></ul></li></ol><h3 id="6-3-å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æµ‹è¯•"><a href="#6-3-å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æµ‹è¯•" class="headerlink" title="6.3 å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æµ‹è¯•"></a>6.3 å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æµ‹è¯•</h3><ol><li><p><strong>å¤šçº¿ç¨‹é¡ºåºè¯»å†™æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: è¯„ä¼°å­˜å‚¨è®¾å¤‡åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„é¡ºåºè¯»å†™æ€§èƒ½ï¼Œæ¨¡æ‹Ÿå¤šç”¨æˆ·å¹¶å‘è®¿é—®çš„åœºæ™¯ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=multithread_seq --filename=/path/to/testfile --size=10G --rw=write --bs=1M --direct=1 --ioengine=libaio --numjobs=8 --runtime=180 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>bw</code> å’Œ <code>iops</code> åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰æ‰€å¢åŠ ï¼Œä½†ä¹Ÿå¯èƒ½å› é”äº‰ç”¨æˆ–I&#x2F;Oè°ƒåº¦å½±å“è€Œä¸‹é™ã€‚</li><li>å¯¹æ¯”å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹ç»“æœï¼Œå¯ä»¥è¯„ä¼°è®¾å¤‡åœ¨å¹¶å‘è´Ÿè½½ä¸‹çš„æ‰©å±•æ€§ã€‚</li></ul></li></ul></li><li><p><strong>å¤šè¿›ç¨‹éšæœºå†™å…¥æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•åœ¨å¤šä¸ªè¿›ç¨‹åŒæ—¶è¿›è¡Œéšæœºå†™å…¥æ—¶çš„æ€§èƒ½ï¼Œé€‚ç”¨äºæ¨¡æ‹Ÿæ•°æ®åº“é›†ç¾¤æˆ–å¹¶è¡Œè®¡ç®—ç¯å¢ƒã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=multiprocess_rand_write --filename=/path/to/testfile --size=10G --rw=randwrite --bs=4k --direct=1 --ioengine=libaio --numjobs=8 --runtime=180 --group_reporting --gtod_reduce=1</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>å¤šè¿›ç¨‹ä¸‹çš„ <code>iops</code> å’Œ <code>lat</code> æ˜¯å…³é”®æŒ‡æ ‡ï¼Œæ³¨æ„è§‚å¯Ÿæ˜¯å¦æœ‰ç“¶é¢ˆäº§ç”Ÿã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>iops=45000</code> å’Œ <code>lat=0.15ms</code>ï¼Œåˆ™è¡¨ç¤ºè®¾å¤‡åœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸‹è¡¨ç°è¾ƒä¸ºç¨³å®šã€‚</li></ul></li></ul></li></ol><h3 id="6-4-æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„å½±å“"><a href="#6-4-æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„å½±å“" class="headerlink" title="6.4 æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„å½±å“"></a>6.4 æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„å½±å“</h3><ol><li><p><strong>å¼€å¯ç¼“å­˜çš„éšæœºå†™å…¥æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å¯¹å†™æ“ä½œçš„å½±å“ï¼Œæ¨¡æ‹Ÿå¸¸è§„å†™å…¥æ“ä½œã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=cached_rand_write --filename=/path/to/testfile --size=2G --rw=randwrite --bs=4k --ioengine=<span class="built_in">sync</span> --numjobs=1 --runtime=60 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>iops</code> å¯èƒ½ä¼šå› ä¸ºç¼“å­˜çš„ä½œç”¨è€Œæ˜¾è‘—æé«˜ï¼Œ<code>lat</code> ä¹Ÿå¯èƒ½å‡å°‘ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>iops=35000</code> å’Œ <code>lat=0.05ms</code>ï¼Œè¿™è¡¨æ˜æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å¯¹æ€§èƒ½æœ‰ç§¯æå½±å“ã€‚</li></ul></li></ul></li><li><p><strong>ç¦ç”¨ç¼“å­˜çš„éšæœºå†™å…¥æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: ç¦ç”¨ç¼“å­˜ç›´æ¥å†™å…¥åˆ°ç£ç›˜ï¼Œè¯„ä¼°çº¯ç²¹çš„ç¡¬ä»¶æ€§èƒ½ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=direct_rand_write --filename=/path/to/testfile --size=2G --rw=randwrite --bs=4k --direct=1 --ioengine=libaio --numjobs=1 --runtime=60 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>ç¦ç”¨ç¼“å­˜åï¼Œ<code>iops</code> å’Œ <code>lat</code> åæ˜ äº†è®¾å¤‡çš„å®é™…æ€§èƒ½ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>iops=15000</code> å’Œ <code>lat=0.3ms</code> è¡¨ç¤ºåœ¨æ— ç¼“å­˜æƒ…å†µä¸‹ï¼Œè®¾å¤‡çš„ç¡¬ä»¶æ€§èƒ½ã€‚</li></ul></li></ul></li></ol><h3 id="6-5-RAIDé˜µåˆ—æ€§èƒ½æµ‹è¯•"><a href="#6-5-RAIDé˜µåˆ—æ€§èƒ½æµ‹è¯•" class="headerlink" title="6.5 RAIDé˜µåˆ—æ€§èƒ½æµ‹è¯•"></a>6.5 RAIDé˜µåˆ—æ€§èƒ½æµ‹è¯•</h3><ol><li><p><strong>é¡ºåºè¯»å–RAIDæ€§èƒ½</strong></p><ul><li><strong>ç›®çš„</strong>: è¯„ä¼°RAIDé˜µåˆ—çš„é¡ºåºè¯»å–æ€§èƒ½ï¼Œé€‚ç”¨äºé«˜ååé‡éœ€æ±‚çš„åº”ç”¨ï¼Œå¦‚è§†é¢‘ç¼–è¾‘æˆ–æ•°æ®å¤‡ä»½ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=raid_seq_read --filename=/dev/md0 --size=10G --rw=<span class="built_in">read</span> --bs=1M --direct=1 --ioengine=libaio --numjobs=1 --runtime=300 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li><code>bw</code> æ˜¯ä¸»è¦å…³æ³¨ç‚¹ï¼Œåæ˜ äº†RAIDé˜µåˆ—åœ¨é¡ºåºè¯»å–ä»»åŠ¡ä¸­çš„ååèƒ½åŠ›ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>bw=800MB/s</code> è¡¨ç¤ºRAIDé˜µåˆ—åœ¨è¯¥æµ‹è¯•ä¸­è¡¨ç°è‰¯å¥½ã€‚</li></ul></li></ul></li><li><p><strong>éšæœºå†™å…¥RAIDæ€§èƒ½</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•RAIDé˜µåˆ—çš„éšæœºå†™å…¥æ€§èƒ½ï¼Œé€‚ç”¨äºéœ€è¦é«˜I&#x2F;Oååçš„ç¯å¢ƒï¼Œå¦‚è™šæ‹ŸåŒ–å¹³å°ã€‚</li><li><strong>å‘½ä»¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fio --name=raid_rand_write --filename=/dev/md0 --size=5G --rw=randwrite --bs=4k --direct=1 --ioengine=libaio --numjobs=4 --runtime=300 --group_reporting</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>å…³æ³¨ <code>iops</code> å’Œ <code>lat</code> æŒ‡æ ‡ï¼Œè¯„ä¼°RAIDåœ¨å¹¶å‘éšæœºå†™å…¥ä¸‹çš„æ€§èƒ½ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœ <code>iops=30000</code> å’Œ <code>lat=0.2ms</code>ï¼Œåˆ™è¡¨ç¤ºRAIDé˜µåˆ—èƒ½å¤Ÿåœ¨éšæœºå†™å…¥åœºæ™¯ä¸‹ä¿æŒè¾ƒé«˜çš„æ€§èƒ½ã€‚</li></ul></li></ul></li></ol><h2 id="7-ä¸€äº›Tips"><a href="#7-ä¸€äº›Tips" class="headerlink" title="7. ä¸€äº›Tips"></a>7. ä¸€äº›Tips</h2><ul><li>Q: æŒ‡å®šè¿è¡ŒFIOçš„æ—¶é—´ï¼Œä½†æ˜¯æå‰å°±ç»“æŸäº†ã€‚</li><li>A: åŠ ä¸Šå‚æ•° <code>-time_base</code>å³å¯</li></ul><h2 id="8-å‚è€ƒæ–‡çŒ®"><a href="#8-å‚è€ƒæ–‡çŒ®" class="headerlink" title="8. å‚è€ƒæ–‡çŒ®"></a>8. å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="https://fio.readthedocs.io/">Fioå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.redhat.com/en/resources/storage-performance-testing-best-practices">å­˜å‚¨æ€§èƒ½æµ‹è¯•æœ€ä½³å®è·µ</a></li><li><a href="https://www.intel.com/content/www/us/en/support/articles/000005791/memory-and-storage.html">RAIDæ€§èƒ½ä¼˜åŒ–æŒ‡å—</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ RHEL 9.4 ä¸Šé…ç½® ARM64 è™šæ‹Ÿæœº</title>
      <link href="/2024/08/14/rhel9.4_arm_vm/"/>
      <url>/2024/08/14/rhel9.4_arm_vm/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-RHEL-9-4-ä¸Šé…ç½®-ARM64-è™šæ‹Ÿæœº"><a href="#åœ¨-RHEL-9-4-ä¸Šé…ç½®-ARM64-è™šæ‹Ÿæœº" class="headerlink" title="åœ¨ RHEL 9.4 ä¸Šé…ç½® ARM64 è™šæ‹Ÿæœº"></a>åœ¨ RHEL 9.4 ä¸Šé…ç½® ARM64 è™šæ‹Ÿæœº</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p>åœ¨ RHEL 9.4 ä¸Šé…ç½® ARM64 è™šæ‹Ÿæœºå¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šæ¨¡æ‹Ÿ ARM64 ç¯å¢ƒï¼Œç”¨äºæµ‹è¯•å’Œå¼€å‘é€‚ç”¨äº ARM64 æ¶æ„çš„è½¯ä»¶ã€‚è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨ RHEL 9.4 ç³»ç»Ÿä¸Šé…ç½®å’Œè¿è¡Œ ARM64 è™šæ‹Ÿæœºçš„è¿‡ç¨‹ã€‚</p><h2 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h2><p>é€‚ç”¨äºåœ¨ RHEL 9.4 ç³»ç»Ÿä¸Šéœ€è¦æ¨¡æ‹Ÿ ARM64 è™šæ‹Ÿæœºç¯å¢ƒçš„æŠ€æœ¯äººå‘˜ã€‚ä¸»è¦æ¶‰åŠ QEMUã€KVM å’Œç›¸å…³å·¥å…·çš„å®‰è£…ä¸é…ç½®ã€‚</p><h2 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šè´Ÿè´£ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼Œå¹¶å…·å¤‡è¿è¡Œè™šæ‹Ÿæœºçš„æƒé™ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§æ­£ç¡®é…ç½®å’Œè¿è¡Œ ARM64 è™šæ‹Ÿæœºã€‚</li></ul><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h2><ul><li>è¿è¡Œ RHEL 9.4 æ“ä½œç³»ç»Ÿçš„ç‰©ç†æœåŠ¡å™¨æˆ–è™šæ‹Ÿä¸»æœºã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥ä»¥ä¸‹è½½å¿…è¦çš„è½¯ä»¶åŒ…å’Œå·¥å…·ã€‚</li></ul><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h2><h3 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h3><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf update -y</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£… QEMUã€KVM å’Œç›¸å…³å·¥å…·</strong></p><ul><li>ä½¿ç”¨ <code>dnf</code> å®‰è£… QEMU å’Œ KVM ä»¥åŠç›¸å…³çš„è™šæ‹ŸåŒ–ç®¡ç†å·¥å…·ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install qemu-kvm qemu-img libvirt virt-install virt-manager -y</span><br><span class="line">sudo dnf install libguestfs-tools -y  <span class="comment"># ç”¨äºç®¡ç†è™šæ‹Ÿæœºç£ç›˜é•œåƒ</span></span><br></pre></td></tr></table></figure></li></ul><p>1.3 <strong>å¯åŠ¨å¹¶å¯ç”¨ KVM å’Œ Libvirt æœåŠ¡</strong></p><ul><li>ç¡®ä¿ KVM å’Œ Libvirt æœåŠ¡å·²å¯åŠ¨å¹¶è¿è¡Œï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start libvirtd</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> libvirtd</span><br></pre></td></tr></table></figure></li></ul><p>1.4 <strong>æ£€æŸ¥ KVM æ˜¯å¦å·²å¯ç”¨</strong></p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ KVM æ˜¯å¦æ­£å¸¸å¯ç”¨(æœ‰äº›æƒ…å†µä¸‹è™½ç„¶æ²¡æœ‰åˆ—å‡ºKVMï¼Œä½†æ˜¯ä»ç„¶æ˜¯æ”¯æŒçš„)ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo lsmod | grep kvm</span><br></pre></td></tr></table></figure></li><li>å¦‚æœè¾“å‡ºä¸­åŒ…å« <code>kvm</code> å’Œ <code>kvm_intel</code> æˆ– <code>kvm_amd</code>ï¼Œåˆ™è¡¨ç¤º KVM å·²æ­£ç¡®å¯ç”¨ã€‚</li><li>å®é™…æµ‹è¯•ï¼Œä¸åŒ…å«<code>kvm</code>ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</li></ul><h3 id="2-è·å–å’Œå‡†å¤‡-ARM64-é•œåƒ"><a href="#2-è·å–å’Œå‡†å¤‡-ARM64-é•œåƒ" class="headerlink" title="2. è·å–å’Œå‡†å¤‡ ARM64 é•œåƒ"></a>2. <strong>è·å–å’Œå‡†å¤‡ ARM64 é•œåƒ</strong></h3><p>2.1 <strong>ä¸‹è½½ RHEL 9.4 ARM64 æ“ä½œç³»ç»Ÿé•œåƒ</strong></p><ul><li>ä» Red Hat å®˜æ–¹ç½‘ç«™æˆ–å®¢æˆ·é—¨æˆ·ä¸‹è½½ RHEL 9.4 ARM64 ISO é•œåƒã€‚ç¡®ä¿æ‚¨æœ‰é€‚å½“çš„è®¢é˜…ä»¥è®¿é—®é•œåƒã€‚</li></ul><p>2.2 <strong>åˆ›å»ºè™šæ‹Ÿæœºç£ç›˜é•œåƒ</strong></p><ul><li>ä½¿ç”¨ <code>qemu-img</code> åˆ›å»ºè™šæ‹Ÿæœºç£ç›˜é•œåƒï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create -f qcow2 rhel9-arm64.qcow2 20G</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>-f qcow2</code>ï¼šæŒ‡å®šç£ç›˜é•œåƒæ ¼å¼ä¸º QCOW2ã€‚</li><li><code>20G</code>ï¼šè®¾ç½®ç£ç›˜å¤§å°ä¸º 20GBã€‚</li></ul></li></ul><h3 id="3-åˆ›å»ºå’Œé…ç½®-ARM64-è™šæ‹Ÿæœº"><a href="#3-åˆ›å»ºå’Œé…ç½®-ARM64-è™šæ‹Ÿæœº" class="headerlink" title="3. åˆ›å»ºå’Œé…ç½® ARM64 è™šæ‹Ÿæœº"></a>3. <strong>åˆ›å»ºå’Œé…ç½® ARM64 è™šæ‹Ÿæœº</strong></h3><p>3.1 <strong>å¯åŠ¨è™šæ‹Ÿæœºå¹¶è¿›è¡Œå®‰è£…</strong></p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¹¶ä» ISO é•œåƒè¿›è¡Œå®‰è£…ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virt-install --name myvm --ram 2048 --vcpus 2 --disk path=/var/lib/libvirt/images/myvm.qcow2,size=20  --os-variant rhel9.4 --network bridge=virbr0 --graphics none --console pty,target_type=serial --cdrom /path/to/your/iso/file.iso</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>virt-install</code>ï¼šå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºã€‚</li><li><code>--name myvm</code>ï¼šæŒ‡å®šè™šæ‹Ÿæœºçš„åç§°ä¸º myvmã€‚è¿™ä¸ªåç§°å°†ç”¨äºç®¡ç†å’Œè¯†åˆ«è¯¥è™šæ‹Ÿæœºã€‚</li><li><code>--ram 2048</code>ï¼šåˆ†é…ç»™è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°ï¼Œä»¥ MB ä¸ºå•ä½ã€‚è¿™æ„å‘³ç€ä¸ºè™šæ‹Ÿæœºåˆ†é…äº† 2048 MBï¼ˆ2 GBï¼‰çš„å†…å­˜ã€‚</li><li><code>--vcpus 2</code>ï¼šæŒ‡å®šè™šæ‹Ÿæœºçš„è™šæ‹Ÿ CPU æ•°é‡ä¸º 2 ä¸ªã€‚è¿™å†³å®šäº†è™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨çš„ CPU æ ¸å¿ƒæ•°ã€‚</li><li><code>--disk path=/var/lib/libvirt/images/arm64vm.qcow2,size=20</code>ï¼špath&#x3D;&#x2F;var&#x2F;lib&#x2F;libvirt&#x2F;images&#x2F;arm64vm.qcow2ï¼šå®šä¹‰è™šæ‹Ÿæœºçš„ç£ç›˜æ˜ åƒæ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åã€‚æ­¤æ–‡ä»¶å°†å­˜å‚¨è™šæ‹Ÿæœºçš„è™šæ‹Ÿç¡¬ç›˜ã€‚</li><li><code>size=20</code>ï¼šä¸ºè™šæ‹Ÿæœºçš„ç£ç›˜åˆ†é… 20 GB çš„å­˜å‚¨ç©ºé—´ã€‚</li><li><code>--os-variant generic</code>ï¼šæŒ‡å®šæ“ä½œç³»ç»Ÿçš„å…·ä½“ç‰ˆæœ¬æˆ–å˜ä½“ä¸º genericï¼Œå³é€šç”¨ç‰ˆæœ¬ã€‚è¿™æ„å‘³ç€è¯¥é…ç½®é€‚ç”¨äºå¤šç§ Linux å‘è¡Œç‰ˆã€‚å¯ä»¥ä½¿ç”¨ osinfo-query os å‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„å…·ä½“æ“ä½œç³»ç»Ÿå˜ä½“ã€‚</li><li><code>--arch aarch64</code>ï¼šæŒ‡å®šè™šæ‹Ÿæœºçš„æ¶æ„ä¸º ARM64ï¼ˆaarch64ï¼‰ã€‚è¿™æ„å‘³ç€è™šæ‹Ÿæœºå°†ä»¿çœŸæˆ–ä½¿ç”¨ ARM64 æ¶æ„çš„ç¡¬ä»¶ã€‚</li><li><code>--machine virt</code>ï¼šæŒ‡å®šè™šæ‹Ÿæœºçš„æœºå™¨ç±»å‹ä¸º virtï¼Œè¿™æ˜¯ QEMU ç”¨äº ARM ä»¿çœŸçš„é€šç”¨æœºå™¨ç±»å‹ï¼Œé€‚ç”¨äºå¤šç§ ARM64 è®¾å¤‡ã€‚</li><li><code>--network bridge=virbr0</code>ï¼šå°†è™šæ‹Ÿæœºè¿æ¥åˆ°åä¸º virbr0 çš„æ¡¥æ¥ç½‘ç»œæ¥å£ã€‚è¿™å…è®¸è™šæ‹Ÿæœºä¸ä¸»æœºåŠç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚</li><li><code>--graphics none</code>ï¼šæŒ‡å®šè™šæ‹Ÿæœºä¸ä½¿ç”¨å›¾å½¢ç•Œé¢ï¼ˆæ— å›¾å½¢è¾“å‡ºï¼‰ï¼Œä»¥çº¯å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œã€‚è¿™é€šå¸¸ç”¨äºæœåŠ¡å™¨æˆ–åµŒå…¥å¼ç³»ç»Ÿçš„è®¾ç½®ã€‚</li><li><code>--console pty,target_type=serial</code>ï¼šè®¾ç½®è™šæ‹Ÿæœºçš„æ§åˆ¶å°ä¸ºä¼ªç»ˆç«¯ï¼ˆPTYï¼‰ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°è™šæ‹Ÿæœºçš„ä¸²è¡Œç«¯å£ã€‚è¿™å…è®¸é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼ç›´æ¥ä¸è™šæ‹Ÿæœºè¿›è¡Œäº¤äº’ã€‚</li><li><code>--cdrom /path/to/your/arm64.iso</code>ï¼šæŒ‡å®šè¦åŠ è½½çš„ ISO æ–‡ä»¶è·¯å¾„ï¼Œè¿™é€šå¸¸æ˜¯æ“ä½œç³»ç»Ÿå®‰è£…é•œåƒçš„è·¯å¾„ã€‚è™šæ‹Ÿæœºå¯åŠ¨æ—¶ä¼šä»è¿™ä¸ª ISO é•œåƒä¸­å¼•å¯¼ï¼Œå¹¶å¼€å§‹å®‰è£…æ“ä½œç³»ç»Ÿã€‚<ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨å›¾å½¢ç•Œé¢<code>virtual machine manager</code>è¿›è¡Œå®‰è£…</li></ul></li></ul></li></ul><p>3.2 <strong>å®‰è£…æ“ä½œç³»ç»Ÿ</strong></p><ul><li>å½“è™šæ‹Ÿæœºå¯åŠ¨åï¼ŒæŒ‰ç…§å±å¹•æç¤ºå®‰è£… RHEL 9.4 æ“ä½œç³»ç»Ÿã€‚å®‰è£…è¿‡ç¨‹ä¸åœ¨ç‰©ç†æœºä¸Šçš„å®‰è£…ç±»ä¼¼ã€‚</li></ul><p>3.3 <strong>å®Œæˆå®‰è£…åï¼Œé‡å¯è™šæ‹Ÿæœº</strong></p><ul><li>å®Œæˆå®‰è£…åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›å…¥è™šæ‹Ÿæœºï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virsh console myvm</span><br></pre></td></tr></table></figure>   å½“æç¤º <code>Escape character is ^]</code> æ—¶ï¼ŒæŒ‰ <code>Enter</code> é”®è¿›å…¥è™šæ‹Ÿæœºçš„å‘½ä»¤è¡Œã€‚å¦‚æœè¦é€€å‡ºæ§åˆ¶å°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>Ctrl + ]</code>ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼šæ­¤å‘½ä»¤çœç•¥äº†å®‰è£… CD-ROM éƒ¨åˆ†ï¼Œä»…ä½¿ç”¨å·²å®‰è£…çš„ç£ç›˜é•œåƒå¯åŠ¨è™šæ‹Ÿæœºã€‚</li></ul><h3 id="4-ç»´æŠ¤ä¸ç®¡ç†-ARM64-è™šæ‹Ÿæœº"><a href="#4-ç»´æŠ¤ä¸ç®¡ç†-ARM64-è™šæ‹Ÿæœº" class="headerlink" title="4. ç»´æŠ¤ä¸ç®¡ç† ARM64 è™šæ‹Ÿæœº"></a>4. <strong>ç»´æŠ¤ä¸ç®¡ç† ARM64 è™šæ‹Ÿæœº</strong></h3><p>4.1 <strong>å¿«ç…§ç®¡ç†</strong></p><ul><li>ä½¿ç”¨ <code>qemu-img</code> ç®¡ç†è™šæ‹Ÿæœºå¿«ç…§ï¼Œä¾¿äºæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qemu-img snapshot -c snap1 rhel9-arm64.qcow2  <span class="comment"># åˆ›å»ºå¿«ç…§</span></span><br><span class="line">qemu-img snapshot -l rhel9-arm64.qcow2        <span class="comment"># åˆ—å‡ºæ‰€æœ‰å¿«ç…§</span></span><br><span class="line">qemu-img snapshot -a snap1 rhel9-arm64.qcow2  <span class="comment"># æ¢å¤åˆ°å¿«ç…§</span></span><br></pre></td></tr></table></figure></li></ul><p>4.2 <strong>å¤‡ä»½è™šæ‹Ÿæœº</strong></p><ul><li>é€šè¿‡å¤åˆ¶ QCOW2 é•œåƒæ–‡ä»¶æ¥å¤‡ä»½è™šæ‹Ÿæœºï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> rhel9-arm64.qcow2 rhel9-arm64-backup.qcow2</span><br></pre></td></tr></table></figure></li></ul><p>4.3 <strong>è°ƒæ•´è™šæ‹Ÿæœºèµ„æº</strong></p><ul><li>åœæ­¢è™šæ‹Ÿæœºåï¼Œå¯ä»¥ç¼–è¾‘å¯åŠ¨å‘½ä»¤æ¥è°ƒæ•´è™šæ‹Ÿæœºçš„ CPU å’Œå†…å­˜åˆ†é…ï¼Œä»¥æ»¡è¶³ä¸åŒçš„æµ‹è¯•éœ€æ±‚ã€‚</li></ul><h3 id="5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="5. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>5. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h3><p>5.1 <strong>è™šæ‹Ÿæœºæ€§èƒ½è¾ƒå·®</strong></p><ul><li>å¦‚æœå‘ç°è™šæ‹Ÿæœºæ€§èƒ½è¾ƒå·®ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ åˆ†é…ç»™è™šæ‹Ÿæœºçš„ CPU æ ¸å¿ƒå’Œå†…å­˜ï¼Œæˆ–å¯ç”¨ KVM åŠ é€Ÿï¼ˆå¦‚æœæ”¯æŒï¼‰ã€‚</li></ul><p>5.2 <strong>æ— æ³•å¯åŠ¨è™šæ‹Ÿæœº</strong></p><ul><li>æ£€æŸ¥å¯åŠ¨å‘½ä»¤ä¸­çš„æ–‡ä»¶è·¯å¾„å’Œå‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ BIOS å’Œç£ç›˜é•œåƒæ–‡ä»¶å­˜åœ¨ä¸”å¯è®¿é—®ã€‚</li></ul><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h2><ul><li><a href="https://www.qemu.org/documentation/">QEMU Documentation</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9">Red Hat Enterprise Linux 9 Documentation</a></li><li><a href="https://libvirt.org/documentation.html">Libvirt Documentation</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> è™šæ‹Ÿæœº </tag>
            
            <tag> VM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€š (Passthrough)</title>
      <link href="/2024/08/14/rhel9.4_mlx_pf/"/>
      <url>/2024/08/14/rhel9.4_mlx_pf/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-ARM64-å¹³å°çš„-RHEL-9-4-ä¸Šé…ç½®-Mellanox-ConnectX-6-ç½‘å¡çš„-PF-ç›´é€š-Passthrough"><a href="#åœ¨-ARM64-å¹³å°çš„-RHEL-9-4-ä¸Šé…ç½®-Mellanox-ConnectX-6-ç½‘å¡çš„-PF-ç›´é€š-Passthrough" class="headerlink" title="åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€š (Passthrough)"></a>åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€š (Passthrough)</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p>åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼ŒMellanox ConnectX-6 ç½‘å¡çš„ç‰©ç†åŠŸèƒ½ (Physical Function, PF) ç›´é€šï¼ˆPassthroughï¼‰é…ç½®å…è®¸å°†æ•´ä¸ªç‰©ç†ç½‘å¡ç›´æ¥åˆ†é…ç»™è™šæ‹Ÿæœºï¼Œä»è€Œè·å¾—æ¥è¿‘è£¸æœºçš„ç½‘ç»œæ€§èƒ½ã€‚æ­¤é…ç½®ç‰¹åˆ«é€‚ç”¨äºé«˜æ€§èƒ½ç½‘ç»œéœ€æ±‚çš„è™šæ‹ŸåŒ–åº”ç”¨åœºæ™¯ã€‚##è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€šã€‚</p><h2 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h2><p>é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜å’Œè™šæ‹ŸåŒ–æŠ€æœ¯äººå‘˜ï¼Œå¸®åŠ©ä»–ä»¬åœ¨ RHEL 9.4 ARM64 ç³»ç»Ÿä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€šåŠŸèƒ½ï¼Œä»¥ä¼˜åŒ–è™šæ‹ŸåŒ–ç¯å¢ƒä¸­çš„ç½‘ç»œæ€§èƒ½ã€‚</p><h2 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼Œä¸”ç³»ç»Ÿç¡¬ä»¶æ”¯æŒ IOMMU å’Œ PF ç›´é€šåŠŸèƒ½ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§##é…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ PF ç›´é€šï¼Œå¹¶ç¡®ä¿å…¶æ­£ç¡®è¿è¡Œã€‚</li></ul><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h2><ul><li>è¿è¡Œ RHEL 9.4 æ“ä½œç³»ç»Ÿçš„ ARM64 æœåŠ¡å™¨ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>Mellanox ConnectX-6 ç½‘å¡ï¼Œå¹¶ç¡®ä¿æœåŠ¡å™¨å›ºä»¶æ”¯æŒ IOMMU å’Œç›´é€šåŠŸèƒ½ã€‚</li></ul><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h2><h3 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h3><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf update -y</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£…å¿…è¦çš„é©±åŠ¨å’Œå·¥å…·</strong></p><ul><li><p>å®‰è£… Mellanox ç½‘å¡çš„é©±åŠ¨ç¨‹åºå’Œç›¸å…³å·¥å…·ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install -y mlnx-ofed-basic</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å®Œæ¯•åï¼Œé‡å¯æœåŠ¡å™¨ä»¥åŠ è½½æ–°å®‰è£…çš„é©±åŠ¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></li></ul><p>1.3 <strong>æ£€æŸ¥ IOMMU æ”¯æŒ</strong></p><ul><li><p>ç¡®ä¿ç³»ç»Ÿçš„å›ºä»¶ï¼ˆFirmware&#x2F;BIOSï¼‰è®¾ç½®ä¸­å·²å¯ç”¨ IOMMU æ”¯æŒã€‚</p></li><li><p>ç¡®è®¤ IOMMU å·²åœ¨å†…æ ¸å¯åŠ¨å‚æ•°ä¸­å¯ç”¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo grubby --update-kernel=ALL --args=<span class="string">&quot;iommu.passthrough=on&quot;</span></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¡®è®¤ IOMMU å·²å¯ç”¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep -i iommu</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-é…ç½®-Mellanox-ConnectX-6-çš„-PF-ç›´é€š"><a href="#2-é…ç½®-Mellanox-ConnectX-6-çš„-PF-ç›´é€š" class="headerlink" title="2. é…ç½® Mellanox ConnectX-6 çš„ PF ç›´é€š"></a>2. <strong>é…ç½® Mellanox ConnectX-6 çš„ PF ç›´é€š</strong></h3><p>2.1 <strong>è¯†åˆ« Mellanox ç½‘å¡</strong></p><ul><li>ä½¿ç”¨ <code>lspci</code> å‘½ä»¤æ‰¾åˆ° Mellanox ConnectX-6 ç½‘å¡çš„ PCI æ€»çº¿åœ°å€ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep Mellanox</span><br></pre></td></tr></table></figure></li><li>è®°ä¸‹ç±»ä¼¼ <code>0000:03:00.0</code> çš„æ€»çº¿åœ°å€ï¼Œè¿™ä¸ªåœ°å€è¡¨ç¤ºç½‘å¡çš„ç‰©ç†åŠŸèƒ½ï¼ˆPFï¼‰ã€‚</li></ul><p>2.2 <strong>è§£é™¤ç½‘å¡ç»‘å®š</strong></p><ul><li>åœ¨å°†ç½‘å¡çš„ PF ç›´é€šç»™è™šæ‹Ÿæœºä¹‹å‰ï¼Œéœ€è¦å°†å…¶ä»ä¸»æœºç³»ç»Ÿä¸­è§£é™¤ç»‘å®šï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:00.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/devices/0000:03:00.0/driver/unbind</span><br></pre></td></tr></table></figure></li></ul><p>2.3 <strong>ç»‘å®šåˆ° VFIO é©±åŠ¨</strong></p><ul><li><p>å°†ç½‘å¡çš„ PF ç»‘å®šåˆ° VFIO é©±åŠ¨ä»¥å¯ç”¨ç›´é€šï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe vfio-pci</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:00.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/vfio-pci/bind</span><br></pre></td></tr></table></figure></li><li><p>ç¡®è®¤ç»‘å®šæˆåŠŸï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -nnk -d 15b3: | grep <span class="string">&quot;Kernel driver in use&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>è¾“å‡ºåº”æ˜¾ç¤º <code>vfio-pci</code> ä½œä¸ºå†…æ ¸é©±åŠ¨ã€‚</p></li></ul><h3 id="3-é…ç½®-PF-ç›´é€šåˆ°è™šæ‹Ÿæœº"><a href="#3-é…ç½®-PF-ç›´é€šåˆ°è™šæ‹Ÿæœº" class="headerlink" title="3. é…ç½® PF ç›´é€šåˆ°è™šæ‹Ÿæœº"></a>3. <strong>é…ç½® PF ç›´é€šåˆ°è™šæ‹Ÿæœº</strong></h3><p>3.1 <strong>ç¼–è¾‘è™šæ‹Ÿæœºé…ç½®</strong></p><ul><li>ä½¿ç”¨ <code>virsh edit</code> æˆ– <code>virt-manager</code> å°† PF è®¾å¤‡ç›´æ¥åˆ†é…ç»™è™šæ‹Ÿæœºã€‚ç¤ºä¾‹ XML é…ç½®ï¼š   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x03&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x05&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>è¯¥é…ç½®å°† Mellanox ç½‘å¡çš„ PF è®¾å¤‡ç›´é€šç»™è™šæ‹Ÿæœºã€‚</li></ul><p>3.2 <strong>å¯ç”¨å¹¶å¯åŠ¨è™šæ‹Ÿæœº</strong></p><ul><li>ç¼–è¾‘å¹¶ä¿å­˜è™šæ‹Ÿæœºé…ç½®åï¼Œå¯åŠ¨è™šæ‹Ÿæœºï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virsh start &lt;vm_name&gt;</span><br></pre></td></tr></table></figure></li><li>åœ¨è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨ <code>ip link show</code> æˆ–ç±»ä¼¼å‘½ä»¤éªŒè¯å·²åˆ†é…çš„ PF ç½‘å¡ã€‚</li></ul><h3 id="4-ç»´æŠ¤ä¸ç®¡ç†"><a href="#4-ç»´æŠ¤ä¸ç®¡ç†" class="headerlink" title="4. ç»´æŠ¤ä¸ç®¡ç†"></a>4. <strong>ç»´æŠ¤ä¸ç®¡ç†</strong></h3><p>4.1 <strong>é‡Šæ”¾ PF èµ„æº</strong></p><ul><li>å¦‚æœéœ€è¦å°† PF èµ„æºä»è™šæ‹Ÿæœºä¸­é‡Šæ”¾å¹¶è¿”å›ä¸»æœºï¼Œå¯ä»¥å…ˆå…³é—­è™šæ‹Ÿæœºå¹¶è§£é™¤ VFIO ç»‘å®šï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virsh shutdown &lt;vm_name&gt;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:00.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/vfio-pci/unbind</span><br></pre></td></tr></table></figure></li></ul><p>4.2 <strong>é‡æ–°ç»‘å®šç½‘å¡åˆ°ä¸»æœº</strong></p><ul><li>å°†ç½‘å¡é‡æ–°ç»‘å®šå›ä¸»æœºæ“ä½œç³»ç»Ÿçš„ Mellanox é©±åŠ¨ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:00.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/mlx5_core/bind</span><br></pre></td></tr></table></figure></li></ul><p>4.3 <strong>å®šæœŸæ›´æ–°é©±åŠ¨</strong></p><ul><li>ç¡®ä¿å®šæœŸæ›´æ–° Mellanox é©±åŠ¨ç¨‹åºå’Œå›ºä»¶ï¼Œä»¥è·å–æœ€æ–°çš„åŠŸèƒ½å’Œæ€§èƒ½æ”¹è¿›ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf upgrade -y mlnx-ofed-basic</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="5. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>5. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h3><p>5.1 <strong>PF æ— æ³•ç»‘å®šåˆ°è™šæ‹Ÿæœº</strong></p><ul><li>æ£€æŸ¥æ˜¯å¦å·²æ­£ç¡®å¯ç”¨ IOMMU å’Œ VFIO é©±åŠ¨ï¼Œç¡®ä¿ PF å·²æˆåŠŸè§£é™¤ç»‘å®šå¹¶åˆ†é…ç»™è™šæ‹Ÿæœºã€‚</li></ul><p>5.2 <strong>è™šæ‹Ÿæœºä¸­æ— æ³•è¯†åˆ« PF ç½‘å¡</strong></p><ul><li>æ£€æŸ¥è™šæ‹Ÿæœºå†…çš„ç½‘ç»œé…ç½®ï¼Œç¡®è®¤ PF æ˜¯å¦å·²æ­£ç¡®åŠ è½½ï¼Œå¹¶å®‰è£…å¿…è¦çš„é©±åŠ¨ç¨‹åºã€‚</li></ul><p>5.3 <strong>æ€§èƒ½é—®é¢˜</strong></p><ul><li>ç¡®ä¿è™šæ‹Ÿæœºé…ç½®ä¸­å¯ç”¨äº† KVM å’Œ VFIO é©±åŠ¨ç¨‹åºï¼Œç¡®ä¿æœ€ä½³æ€§èƒ½ã€‚</li></ul><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h2><ul><li><a href="https://docs.mellanox.com/">Mellanox ConnectX-6 Documentation</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9">Red Hat Enterprise Linux 9 Documentation</a></li><li><a href="https://libvirt.org/formatdomain.html">Libvirt Documentation</a></li><li><a href="https://www.qemu.org/documentation/">QEMU Documentation</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> PF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV VF ç›´é€š (Passthrough)</title>
      <link href="/2024/08/14/rhel9.4_mlx_sriov_vf/"/>
      <url>/2024/08/14/rhel9.4_mlx_sriov_vf/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-ARM64-å¹³å°çš„-RHEL-9-4-ä¸Šé…ç½®-Mellanox-ConnectX-6-ç½‘å¡çš„-SR-IOV-VF-ç›´é€š-Passthrough"><a href="#åœ¨-ARM64-å¹³å°çš„-RHEL-9-4-ä¸Šé…ç½®-Mellanox-ConnectX-6-ç½‘å¡çš„-SR-IOV-VF-ç›´é€š-Passthrough" class="headerlink" title="åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV VF ç›´é€š (Passthrough)"></a>åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV VF ç›´é€š (Passthrough)</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p>åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼ŒMellanox ConnectX-6 ç½‘å¡çš„å•æ ¹è¾“å…¥è¾“å‡ºè™šæ‹ŸåŒ–ï¼ˆSR-IOVï¼‰åŠŸèƒ½å…è®¸å°†ç½‘å¡çš„è™šæ‹ŸåŠŸèƒ½ï¼ˆVirtual Functions, VFsï¼‰åˆ†é…ç»™è™šæ‹Ÿæœºï¼Œä»è€Œå®ç°é«˜æ•ˆçš„ç½‘ç»œæ€§èƒ½å’Œèµ„æºéš”ç¦»ã€‚è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨ ARM64 å¹³å°çš„ RHEL 9.4 ä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV è™šæ‹ŸåŠŸèƒ½ (VF) ç›´é€šã€‚</p><h2 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h2><p>é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜å’Œè™šæ‹ŸåŒ–æŠ€æœ¯äººå‘˜ï¼Œå¸®åŠ©ä»–ä»¬åœ¨ RHEL 9.4 ARM64 ç³»ç»Ÿä¸Šé…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV è™šæ‹ŸåŠŸèƒ½ (VF) ç›´é€šï¼Œä»¥ä¼˜åŒ–è™šæ‹ŸåŒ–ç¯å¢ƒä¸­çš„ç½‘ç»œæ€§èƒ½ã€‚</p><h2 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼Œä¸”ç³»ç»Ÿç¡¬ä»¶æ”¯æŒ IOMMU å’Œ SR-IOV åŠŸèƒ½ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§##é…ç½® Mellanox ConnectX-6 ç½‘å¡çš„ SR-IOV VF ç›´é€šï¼Œå¹¶ç¡®ä¿å…¶æ­£ç¡®è¿è¡Œã€‚</li></ul><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h2><ul><li>è¿è¡Œ RHEL 9.4 æ“ä½œç³»ç»Ÿçš„ ARM64 æœåŠ¡å™¨ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>Mellanox ConnectX-6 ç½‘å¡ï¼Œå¹¶ç¡®ä¿æœåŠ¡å™¨å›ºä»¶æ”¯æŒ IOMMU å’Œ SR-IOV åŠŸèƒ½ã€‚</li></ul><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h2><h3 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h3><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf update -y</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£…å¿…è¦çš„é©±åŠ¨å’Œå·¥å…·</strong></p><ul><li><p>å®‰è£… Mellanox ç½‘å¡çš„é©±åŠ¨ç¨‹åºå’Œç›¸å…³å·¥å…·(å¦‚æœå·²ç»å®‰è£…mlxé©±åŠ¨ç›´æ¥è·³è¿‡)ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install -y mlnx-ofed-basic</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å®Œæ¯•åï¼Œé‡å¯æœåŠ¡å™¨ä»¥åŠ è½½æ–°å®‰è£…çš„é©±åŠ¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></li></ul><p>1.3 <strong>æ£€æŸ¥ IOMMU æ”¯æŒ</strong></p><ul><li><p>ç¡®ä¿ç³»ç»Ÿçš„å›ºä»¶ï¼ˆFirmware&#x2F;BIOSï¼‰è®¾ç½®ä¸­å·²å¯ç”¨ IOMMU æ”¯æŒã€‚</p></li><li><p>ç¡®è®¤ IOMMU å·²åœ¨å†…æ ¸å¯åŠ¨å‚æ•°ä¸­å¯ç”¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo grubby --update-kernel=ALL --args=<span class="string">&quot;iommu.passthrough=on&quot;</span></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¡®è®¤ IOMMU å·²å¯ç”¨ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep -i iommu</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-é…ç½®-Mellanox-ConnectX-6-çš„-SR-IOV"><a href="#2-é…ç½®-Mellanox-ConnectX-6-çš„-SR-IOV" class="headerlink" title="2. é…ç½® Mellanox ConnectX-6 çš„ SR-IOV"></a>2. <strong>é…ç½® Mellanox ConnectX-6 çš„ SR-IOV</strong></h3><p>2.1 <strong>å¯ç”¨ SR-IOV åŠŸèƒ½</strong></p><ul><li><p>ä½¿ç”¨ <code>lspci</code> å‘½ä»¤æ‰¾åˆ° Mellanox ConnectX-6 ç½‘å¡çš„ PCI æ€»çº¿åœ°å€ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep Mellanox</span><br></pre></td></tr></table></figure></li><li><p>è®°ä¸‹ç±»ä¼¼ <code>0000:03:00.0</code> çš„æ€»çº¿åœ°å€ï¼Œè¿™ä¸ªåœ°å€è¡¨ç¤ºç½‘å¡çš„ç‰©ç†åŠŸèƒ½ï¼ˆPFï¼‰ã€‚</p></li><li><p>åœ¨ <code>/sys/class/net/</code> ä¸‹æ‰¾åˆ°å¯¹åº”çš„ç½‘å¡æ¥å£ï¼ˆå¦‚ <code>enp3s0</code>ï¼‰ï¼Œå¹¶é…ç½®å¯ç”¨ SR-IOVï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 8 | sudo <span class="built_in">tee</span> /sys/class/net/enp3s0/device/sriov_numvfs</span><br></pre></td></tr></table></figure></li><li><p>ä»¥ä¸Šå‘½ä»¤å°†åœ¨è¯¥ç½‘å¡ä¸Šå¯ç”¨ 8 ä¸ªè™šæ‹ŸåŠŸèƒ½ï¼ˆVFsï¼‰ã€‚å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´æ•°å­—ã€‚</p></li><li><p>å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥è¯¢æ”¯æŒçš„æœ€å¤§å€¼</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/class/net/enp3s0/device/sriov_totalvfs</span><br><span class="line">16</span><br></pre></td></tr></table></figure><p>2.2 <strong>éªŒè¯ SR-IOV é…ç½®</strong></p></li><li><p>ä½¿ç”¨ <code>ip link show</code> æˆ– <code>lspci | grep Mellanox</code> å‘½ä»¤ï¼Œç¡®è®¤æ˜¯å¦å·²åˆ›å»º VFsï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show enp3s0</span><br></pre></td></tr></table></figure></li><li><p>è¾“å‡ºä¸­åº”åŒ…å« <code>enp3s0</code> åŠå…¶ä¸‹çš„ <code>vf 0</code> è‡³ <code>vf 7</code> ç­‰ä¿¡æ¯ã€‚</p></li></ul><h3 id="3-é…ç½®-SR-IOV-VFs-çš„-Passthrough"><a href="#3-é…ç½®-SR-IOV-VFs-çš„-Passthrough" class="headerlink" title="3. é…ç½® SR-IOV VFs çš„ Passthrough"></a>3. <strong>é…ç½® SR-IOV VFs çš„ Passthrough</strong></h3><p>3.1 <strong>è¯†åˆ«å¹¶ç»‘å®š VF</strong></p><ul><li><p>ä½¿ç”¨ <code>lspci</code> å‘½ä»¤è·å– SR-IOV VF çš„ PCI åœ°å€ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep Virtual</span><br></pre></td></tr></table></figure></li><li><p>å°†å¯¹åº”çš„ VF é€šè¿‡ VFIO é©±åŠ¨ç»‘å®šï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe vfio</span><br><span class="line">sudo modprobe vfio-pci</span><br><span class="line">lspci -nn | grep Virtual <span class="comment">#æŸ¥è¯¢[]ä¸­ç»“æœï¼Œä¾‹å¦‚[15b3:101e]</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:02.0&quot;</span> &gt; /sys/bus/pci/devices/0000\:03\:02.0/driver/unbind</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;15b3 101e&quot;</span> &gt; /sys/bus/pci/drivers/vfio-pci/new_id</span><br></pre></td></tr></table></figure><p>   æˆ–è€…</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe vfio</span><br><span class="line">sudo modprobe vfio-pci</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:02.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/mlx5_core/unbind</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:02.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/vfio-pci/bind</span><br></pre></td></tr></table></figure></li><li><p>ç¡®è®¤ç»‘å®šæˆåŠŸï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -nnk -d 15b3: | grep <span class="string">&quot;Kernel driver in use&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>è¾“å‡ºåº”æ˜¾ç¤º <code>vfio-pci</code> ä½œä¸ºå†…æ ¸é©±åŠ¨ã€‚</p></li></ul><p>3.2 <strong>ç¼–è¾‘è™šæ‹Ÿæœºé…ç½®</strong></p><ul><li>ä½¿ç”¨ <code>virsh nodedev-list</code> æŸ¥æ‰¾æ”¯æŒçš„è®¾å¤‡   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pci_0000_03_02_0</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨ <code>virsh nodedev-dumpxml pci_0000_03_02_0</code> è·å–é…ç½®xml, è®°å½•address   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iommuGroup number=&#x27;62&#x27;&gt;</span><br><span class="line">  &lt;address domain=&#x27;0x0000&#x27; bus=&#x27;0x03&#x27; slot=&#x27;0x02&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">&lt;/iommuGroup&gt;</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨ <code>virsh edit</code> æˆ– <code>virt-manager</code> å°† VF è®¾å¤‡åˆ†é…ç»™è™šæ‹Ÿæœºã€‚ç¤ºä¾‹ XML é…ç½®ï¼š   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x03&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x02&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x05&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>3.3 <strong>å¯ç”¨å¹¶å¯åŠ¨è™šæ‹Ÿæœº</strong></p><ul><li>ç¼–è¾‘å¹¶ä¿å­˜è™šæ‹Ÿæœºé…ç½®åï¼Œå¯åŠ¨è™šæ‹Ÿæœºï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virsh define /etc/libvirt/qemu/&lt;vm_name&gt;.xml</span><br><span class="line">virsh start &lt;vm_name&gt;</span><br></pre></td></tr></table></figure></li><li>åœ¨è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨ <code>ip link show</code> æˆ–ç±»ä¼¼å‘½ä»¤éªŒè¯å·²åˆ†é…çš„ VF ç½‘å¡ã€‚</li></ul><h3 id="4-ç»´æŠ¤ä¸ç®¡ç†"><a href="#4-ç»´æŠ¤ä¸ç®¡ç†" class="headerlink" title="4. ç»´æŠ¤ä¸ç®¡ç†"></a>4. <strong>ç»´æŠ¤ä¸ç®¡ç†</strong></h3><p>4.1 <strong>é‡Šæ”¾ VF èµ„æº</strong></p><ul><li>å¦‚æœéœ€è¦å°† VF èµ„æºä»è™šæ‹Ÿæœºä¸­é‡Šæ”¾å¹¶è¿”å›ä¸»æœºï¼Œå¯ä»¥å…ˆå…³é—­è™šæ‹Ÿæœºå¹¶è§£é™¤ VFIO ç»‘å®šï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">virsh shutdown &lt;vm_name&gt;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:02.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/vfio-pci/unbind</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;0000:03:02.0&quot;</span> | sudo <span class="built_in">tee</span> /sys/bus/pci/drivers/mlx5_core/bind</span><br></pre></td></tr></table></figure></li></ul><p>4.2 <strong>è°ƒæ•´ VF æ•°é‡</strong></p><ul><li>å¦‚æœéœ€è¦æ›´æ”¹å¯ç”¨çš„ VF æ•°é‡ï¼Œå¯ä»¥ç¼–è¾‘å¯¹åº”çš„ SR-IOV é…ç½®ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> &lt;new_number&gt; | sudo <span class="built_in">tee</span> /sys/class/net/enp3s0/device/sriov_numvfs</span><br></pre></td></tr></table></figure></li></ul><p>4.3 <strong>å®šæœŸæ›´æ–°é©±åŠ¨</strong></p><ul><li>ç¡®ä¿å®šæœŸæ›´æ–° Mellanox é©±åŠ¨ç¨‹åºå’Œå›ºä»¶ï¼Œä»¥è·å–æœ€æ–°çš„åŠŸèƒ½å’Œæ€§èƒ½æ”¹è¿›ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf upgrade -y mlnx-ofed-basic</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="5. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>5. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h3><p>5.1 <strong>VF æ— æ³•ç»‘å®šåˆ°è™šæ‹Ÿæœº</strong></p><ul><li>æ£€æŸ¥æ˜¯å¦å·²æ­£ç¡®å¯ç”¨ IOMMU å’Œ SR-IOV åŠŸèƒ½ï¼Œç¡®ä¿ VFs å·²æˆåŠŸåˆ›å»ºå¹¶åˆ†é…ç»™è™šæ‹Ÿæœºã€‚</li></ul><p>5.2 <strong>è™šæ‹Ÿæœºä¸­æ— æ³•è¯†åˆ« VF ç½‘å¡</strong></p><ul><li>æ£€æŸ¥è™šæ‹Ÿæœºå†…çš„ç½‘ç»œé…ç½®ï¼Œç¡®è®¤ VF æ˜¯å¦å·²æ­£ç¡®åŠ è½½ï¼Œå¹¶å®‰è£…å¿…è¦çš„é©±åŠ¨ç¨‹åºã€‚</li></ul><p>5.3 <strong>æ€§èƒ½é—®é¢˜</strong></p><ul><li>ç¡®ä¿è™šæ‹Ÿæœºé…ç½®ä¸­å¯ç”¨äº† KVM å’Œ VFIO é©±åŠ¨ç¨‹åºï¼Œç¡®ä¿æœ€ä½³æ€§èƒ½ã€‚</li></ul><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h2><ul><li><a href="https://docs.mellanox.com/">Mellanox ConnectX-6 Documentation</a></li><li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9">Red Hat Enterprise Linux 9 Documentation</a></li><li><a href="https://libvirt.org/formatdomain.html">Libvirt Documentation</a></li><li><a href="https://www.qemu.org/documentation/">QEMU Documentation</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> SR-IOV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ `stress-ng` è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•</title>
      <link href="/2024/08/14/stress-ng_test/"/>
      <url>/2024/08/14/stress-ng_test/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-stress-ng-è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•"><a href="#ä½¿ç”¨-stress-ng-è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ stress-ng è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•"></a>ä½¿ç”¨ <code>stress-ng</code> è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•</h1><hr><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h4><p><code>stress-ng</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œèƒ½å¤Ÿå¯¹ç³»ç»Ÿçš„ CPUã€å†…å­˜ã€I&#x2F;Oã€ç½‘ç»œã€ç£ç›˜ç­‰å¤šä¸ªå­ç³»ç»Ÿè¿›è¡Œæ·±å…¥æµ‹è¯•ã€‚å®ƒå¯ä»¥å¸®åŠ©è¯†åˆ«ç³»ç»Ÿåœ¨æç«¯æ¡ä»¶ä¸‹çš„ç¨³å®šæ€§é—®é¢˜ï¼Œå¹¶ç”¨äºè¯„ä¼°ç¡¬ä»¶å’Œè½¯ä»¶çš„è€ä¹…æ€§å’Œæ€§èƒ½ã€‚è¯¦ç»†ä»‹ç»äº†åœ¨ Linux ç³»ç»Ÿä¸Šå®‰è£…ã€é…ç½®å¹¶è¿è¡Œ <code>stress-ng</code> å·¥å…·çš„è¿‡ç¨‹ï¼Œä»¥è¿›è¡Œå…¨é¢çš„ç³»ç»Ÿå‹åŠ›æµ‹è¯•ã€‚</p><h4 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h4><p>é€‚ç”¨äºéœ€è¦éªŒè¯ç³»ç»Ÿç¡¬ä»¶å’Œè½¯ä»¶ç¨³å®šæ€§çš„æŠ€æœ¯äººå‘˜ï¼Œå°¤å…¶æ˜¯éœ€è¦æµ‹è¯• CPUã€å†…å­˜ã€I&#x2F;Oã€ç½‘ç»œå’Œç£ç›˜æ€§èƒ½çš„åœºæ™¯ã€‚</p><h4 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h4><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…ï¼Œå¹¶å…·å¤‡æ‰§è¡Œæµ‹è¯•æ‰€éœ€çš„æƒé™ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§æœ¬ SOP æ­£ç¡®æ‰§è¡Œ <code>stress-ng</code> å·¥å…·ï¼Œç¡®ä¿æµ‹è¯•é¡ºåˆ©è¿›è¡Œã€‚</li></ul><h4 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h4><ul><li>è¿è¡Œ Linux æ“ä½œç³»ç»Ÿçš„è®¾å¤‡ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥ä»¥ä¸‹è½½å¿…è¦çš„è½¯ä»¶åŒ…å’Œå·¥å…·ã€‚</li></ul><h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h4><h5 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h5><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£… <code>stress-ng</code> å·¥å…·</strong></p><ul><li><p><strong>åœ¨ Debian&#x2F;Ubuntu ç³»ç»Ÿä¸Šä½¿ç”¨ <code>apt</code> å®‰è£… <code>stress-ng</code>ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install stress-ng</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ RHEL&#x2F;CentOS ç³»ç»Ÿä¸Šä½¿ç”¨ <code>yum</code> å®‰è£… <code>stress-ng</code>ï¼š</strong></p><ul><li>é¦–å…ˆï¼Œå¯ç”¨ EPEL ä»“åº“ï¼ˆå¦‚æœå°šæœªå¯ç”¨ï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li>ç„¶åå®‰è£… <code>stress-ng</code>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install stress-ng</span><br></pre></td></tr></table></figure></li></ul></li></ul><h5 id="2-é…ç½®ä¸è¿è¡Œ-stress-ng"><a href="#2-é…ç½®ä¸è¿è¡Œ-stress-ng" class="headerlink" title="2. é…ç½®ä¸è¿è¡Œ stress-ng"></a>2. <strong>é…ç½®ä¸è¿è¡Œ <code>stress-ng</code></strong></h5><p>2.1 <strong>è¿è¡Œ CPU å‹åŠ›æµ‹è¯•</strong></p><ul><li>ä½¿ç”¨ <code>stress-ng</code> å·¥å…·å¯¹ CPU è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ª CPU å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --cpu 4 --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--cpu 4</code>ï¼šå¯åŠ¨ 4 ä¸ª CPU å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.2 <strong>è¿è¡Œå†…å­˜å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿå†…å­˜è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 2 ä¸ªå†…å­˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªåˆ†é… 256MB å†…å­˜ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --vm 2 --vm-bytes 256M --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--vm 2</code>ï¼šå¯åŠ¨ 2 ä¸ªå†…å­˜å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--vm-bytes 256M</code>ï¼šæ¯ä¸ªçº¿ç¨‹åˆ†é… 256MB å†…å­˜ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.3 <strong>è¿è¡Œ I&#x2F;O å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿçš„ I&#x2F;O æ“ä½œè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ª I&#x2F;O å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --io 4 --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--io 4</code>ï¼šå¯åŠ¨ 4 ä¸ª I&#x2F;O å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.4 <strong>è¿è¡Œç£ç›˜å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿç£ç›˜è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ªç£ç›˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ 10MB çš„å†™æ“ä½œï¼Œå¹¶æŒç»­è¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --hdd 4 --hdd-bytes 10M --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--hdd 4</code>ï¼šå¯åŠ¨ 4 ä¸ªç£ç›˜å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--hdd-bytes 10M</code>ï¼šæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ 10MB çš„å†™æ“ä½œã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.5 <strong>ç»¼åˆå‹åŠ›æµ‹è¯•</strong></p><ul><li>è¿è¡ŒåŒ…å«å¤šä¸ªå­ç³»ç»Ÿçš„ç»¼åˆå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†åŒæ—¶å¯¹ CPUã€å†…å­˜ã€I&#x2F;O å’Œç£ç›˜è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œå¹¶æŒç»­è¿è¡Œ 600 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --cpu 4 --vm 2 --vm-bytes 128M --io 2 --hdd 2 --hdd-bytes 5M --<span class="built_in">timeout</span> 600</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--cpu 4</code>ï¼šå¯åŠ¨ 4 ä¸ª CPU å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--vm 2 --vm-bytes 128M</code>ï¼šå¯åŠ¨ 2 ä¸ªå†…å­˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹åˆ†é… 128MB å†…å­˜ã€‚</li><li><code>--io 2</code>ï¼šå¯åŠ¨ 2 ä¸ª I&#x2F;O å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--hdd 2 --hdd-bytes 5M</code>ï¼šå¯åŠ¨ 2 ä¸ªç£ç›˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ 5MB çš„å†™æ“ä½œã€‚</li><li><code>--timeout 600</code>ï¼šæµ‹è¯•æŒç»­ 600 ç§’ï¼ˆ10 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.6 <strong>ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š</strong></p><ul><li>ä½¿ç”¨ <code>--metrics-brief</code> é€‰é¡¹ç”Ÿæˆä¸€ä¸ªç®€çŸ­çš„æ€§èƒ½æŠ¥å‘Šï¼Œæ˜¾ç¤ºæµ‹è¯•çš„ä¸»è¦ç»“æœï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --cpu 4 --<span class="built_in">timeout</span> 300 --metrics-brief</span><br></pre></td></tr></table></figure></li></ul><h5 id="3-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"><a href="#3-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ" class="headerlink" title="3. ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"></a>3. <strong>ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ</strong></h5><p>3.1 <strong>ç›‘æ§æµ‹è¯•è¿›åº¦</strong></p><ul><li>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨ç»ˆç«¯æŸ¥çœ‹ <code>stress-ng</code> çš„è¾“å‡ºï¼Œç›‘æ§æµ‹è¯•çš„è¿›å±•æƒ…å†µã€‚</li></ul><p>3.2 <strong>åˆ†ææµ‹è¯•ç»“æœ</strong></p><ul><li><code>stress-ng</code> å·¥å…·æœ¬èº«å¯ä»¥ç”Ÿæˆè¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Šï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ†ææŠ¥å‘Šæ¥äº†è§£ç³»ç»Ÿåœ¨å‹åŠ›æµ‹è¯•ä¸‹çš„è¡¨ç°ã€‚</li></ul><p>3.3 <strong>ä¿å­˜æµ‹è¯•æ—¥å¿—</strong></p><ul><li>å¯ä»¥å°†æµ‹è¯•æ—¥å¿—ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åç»­åˆ†æï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --cpu 4 --<span class="built_in">timeout</span> 300 --metrics-brief &gt; stress-ng-log.txt</span><br></pre></td></tr></table></figure></li></ul><h5 id="4-ä¼˜åŒ–ä¸ç»´æŠ¤"><a href="#4-ä¼˜åŒ–ä¸ç»´æŠ¤" class="headerlink" title="4. ä¼˜åŒ–ä¸ç»´æŠ¤"></a>4. <strong>ä¼˜åŒ–ä¸ç»´æŠ¤</strong></h5><p>4.1 <strong>å®šæœŸæµ‹è¯•</strong></p><ul><li>å»ºè®®å®šæœŸè¿è¡Œ <code>stress-ng</code> å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨ç³»ç»Ÿè¿›è¡Œé‡å¤§å˜æ›´ï¼ˆå¦‚ç¡¬ä»¶å‡çº§æˆ–ç³»ç»Ÿæ›´æ–°ï¼‰ä¹‹åï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æŒç»­ç¨³å®šæ€§ã€‚</li></ul><p>4.2 <strong>è°ƒæ•´å‚æ•°</strong></p><ul><li>æ ¹æ®ç³»ç»Ÿçš„å…·ä½“éœ€æ±‚å’Œæµ‹è¯•ç›®æ ‡ï¼Œè°ƒæ•´ <code>stress-ng</code> çš„å‚æ•°ï¼Œä»¥ä¾¿æ›´å¥½åœ°æ£€æµ‹ç³»ç»Ÿæ½œåœ¨é—®é¢˜ã€‚</li></ul><h5 id="5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="5. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>5. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h5><p>5.1 <strong>æµ‹è¯•å¤±è´¥æˆ–ç³»ç»Ÿå´©æºƒ</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ç³»ç»Ÿå´©æºƒæˆ–æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä»¥ç¡®å®šæ•…éšœåŸå› ã€‚å¯èƒ½éœ€è¦é™ä½æµ‹è¯•è´Ÿè·ï¼Œæˆ–æ’æŸ¥ç¡¬ä»¶é—®é¢˜ã€‚</li></ul><p>5.2 <strong>ç³»ç»Ÿèµ„æºä¸è¶³</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°å†…å­˜æˆ– CPU èµ„æºä¸è¶³çš„é”™è¯¯ï¼Œè€ƒè™‘å‡å°‘åˆ†é…ç»™æµ‹è¯•çš„èµ„æºé‡ï¼Œæˆ–è°ƒæ•´ç³»ç»Ÿé…ç½®ã€‚</li></ul><h4 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h4><ul><li><a href="https://github.com/ColinIanKing/stress-ng">stress-ng GitHub Repository</a></li><li><a href="https://linux.die.net/man/1/stress-ng">Linux Performance Tools</a></li><li><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners">Bash Scripting Basics</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> stress-ng </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ `stress` è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•</title>
      <link href="/2024/08/14/stress_test/"/>
      <url>/2024/08/14/stress_test/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-stress-è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•"><a href="#ä½¿ç”¨-stress-è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ stress è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•"></a>ä½¿ç”¨ <code>stress</code> è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•</h1><hr><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h4><p><code>stress</code> æ˜¯ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå¯¹ç³»ç»Ÿçš„ CPUã€å†…å­˜ã€I&#x2F;O å’Œç£ç›˜è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚é€šè¿‡æ–½åŠ é«˜è´Ÿè·ï¼Œå®ƒå¯ä»¥å¸®åŠ©è¯†åˆ«ç³»ç»Ÿåœ¨æç«¯æ¡ä»¶ä¸‹çš„ç¨³å®šæ€§é—®é¢˜ã€‚è¯¦ç»†ä»‹ç»äº†åœ¨ Linux ç³»ç»Ÿä¸Šå®‰è£…ã€é…ç½®å¹¶è¿è¡Œ <code>stress</code> å·¥å…·çš„è¿‡ç¨‹ï¼Œä»¥è¿›è¡Œå…¨é¢çš„ç³»ç»Ÿå‹åŠ›æµ‹è¯•ã€‚</p><h4 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h4><p>é€‚ç”¨äºéœ€è¦éªŒè¯ç³»ç»Ÿç¡¬ä»¶å’Œè½¯ä»¶ç¨³å®šæ€§çš„æŠ€æœ¯äººå‘˜ï¼Œå°¤å…¶æ˜¯åœ¨æµ‹è¯• CPUã€å†…å­˜ã€I&#x2F;O å’Œç£ç›˜æ€§èƒ½æ—¶ä½¿ç”¨ã€‚</p><h4 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h4><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…ï¼Œå¹¶å…·å¤‡æ‰§è¡Œæµ‹è¯•æ‰€éœ€çš„æƒé™ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§æœ¬ SOP æ­£ç¡®æ‰§è¡Œ <code>stress</code> å·¥å…·ï¼Œç¡®ä¿æµ‹è¯•é¡ºåˆ©è¿›è¡Œã€‚</li></ul><h4 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h4><ul><li>è¿è¡Œ Linux æ“ä½œç³»ç»Ÿçš„è®¾å¤‡ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥ä»¥ä¸‹è½½å¿…è¦çš„è½¯ä»¶åŒ…å’Œå·¥å…·ã€‚</li></ul><h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h4><h5 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h5><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£… Stress å·¥å…·</strong></p><ul><li><p><strong>åœ¨ Debian&#x2F;Ubuntu ç³»ç»Ÿä¸Šä½¿ç”¨ <code>apt</code> å®‰è£… <code>stress</code>ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install stress</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ RHEL&#x2F;CentOS ç³»ç»Ÿä¸Šä½¿ç”¨ <code>yum</code> å®‰è£… <code>stress</code>ï¼š</strong></p><ul><li>é¦–å…ˆï¼Œå¯ç”¨ EPEL ä»“åº“ï¼ˆå¦‚æœå°šæœªå¯ç”¨ï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li>ç„¶åå®‰è£… <code>stress</code>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install stress</span><br></pre></td></tr></table></figure></li></ul></li></ul><h5 id="2-é…ç½®ä¸è¿è¡Œ-stress"><a href="#2-é…ç½®ä¸è¿è¡Œ-stress" class="headerlink" title="2. é…ç½®ä¸è¿è¡Œ stress"></a>2. <strong>é…ç½®ä¸è¿è¡Œ <code>stress</code></strong></h5><p>2.1 <strong>è¿è¡Œ CPU å‹åŠ›æµ‹è¯•</strong></p><ul><li>ä½¿ç”¨ <code>stress</code> å·¥å…·å¯¹ CPU è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ª CPU å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress --cpu 4 --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--cpu 4</code>ï¼šå¯åŠ¨ 4 ä¸ª CPU å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.2 <strong>è¿è¡Œå†…å­˜å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿå†…å­˜è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 2 ä¸ªå†…å­˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªåˆ†é… 256MB å†…å­˜ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress --vm 2 --vm-bytes 256M --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--vm 2</code>ï¼šå¯åŠ¨ 2 ä¸ªå†…å­˜å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--vm-bytes 256M</code>ï¼šæ¯ä¸ªçº¿ç¨‹åˆ†é… 256MB å†…å­˜ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.3 <strong>è¿è¡Œ I&#x2F;O å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿçš„ I&#x2F;O æ“ä½œè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ª I&#x2F;O å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä½¿å…¶å„è‡ªè¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress --io 4 --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--io 4</code>ï¼šå¯åŠ¨ 4 ä¸ª I&#x2F;O å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>2.4 <strong>è¿è¡Œç£ç›˜å‹åŠ›æµ‹è¯•</strong></p><ul><li>å¯¹ç³»ç»Ÿç£ç›˜è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°†å¯åŠ¨ 4 ä¸ªç£ç›˜å·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ 10MB çš„å†™æ“ä½œï¼Œå¹¶æŒç»­è¿è¡Œ 300 ç§’ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress --hdd 4 --hdd-bytes 10M --<span class="built_in">timeout</span> 300</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>--hdd 4</code>ï¼šå¯åŠ¨ 4 ä¸ªç£ç›˜å·¥ä½œçº¿ç¨‹ã€‚</li><li><code>--hdd-bytes 10M</code>ï¼šæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ 10MB çš„å†™æ“ä½œã€‚</li><li><code>--timeout 300</code>ï¼šæµ‹è¯•æŒç»­ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><h5 id="3-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"><a href="#3-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ" class="headerlink" title="3. ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"></a>3. <strong>ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ</strong></h5><p>3.1 <strong>ç›‘æ§æµ‹è¯•è¿›åº¦</strong></p><ul><li>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨ç»ˆç«¯æŸ¥çœ‹ <code>stress</code> è¾“å‡ºï¼Œç›‘æ§æµ‹è¯•çš„è¿›å±•æƒ…å†µã€‚</li></ul><p>3.2 <strong>åˆ†ææµ‹è¯•ç»“æœ</strong></p><ul><li><code>stress</code> å·¥å…·æœ¬èº«ä¸ä¼šç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šï¼Œä½†å¯ä»¥é€šè¿‡ç³»ç»Ÿæ—¥å¿—å’Œèµ„æºç›‘æ§å·¥å…·ï¼ˆå¦‚ <code>htop</code> æˆ– <code>dstat</code>ï¼‰æ¥åˆ†æç³»ç»Ÿåœ¨å‹åŠ›æµ‹è¯•ä¸‹çš„è¡¨ç°ã€‚</li></ul><h5 id="4-ä¼˜åŒ–ä¸ç»´æŠ¤"><a href="#4-ä¼˜åŒ–ä¸ç»´æŠ¤" class="headerlink" title="4. ä¼˜åŒ–ä¸ç»´æŠ¤"></a>4. <strong>ä¼˜åŒ–ä¸ç»´æŠ¤</strong></h5><p>4.1 <strong>å®šæœŸæµ‹è¯•</strong></p><ul><li>å»ºè®®å®šæœŸè¿è¡Œ <code>stress</code> å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨ç³»ç»Ÿè¿›è¡Œé‡å¤§å˜æ›´ï¼ˆå¦‚ç¡¬ä»¶å‡çº§æˆ–ç³»ç»Ÿæ›´æ–°ï¼‰ä¹‹åï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æŒç»­ç¨³å®šæ€§ã€‚</li></ul><p>4.2 <strong>è°ƒæ•´å‚æ•°</strong></p><ul><li>æ ¹æ®ç³»ç»Ÿçš„å…·ä½“éœ€æ±‚å’Œæµ‹è¯•ç›®æ ‡ï¼Œè°ƒæ•´ <code>stress</code> çš„å‚æ•°ï¼Œä»¥ä¾¿æ›´å¥½åœ°æ£€æµ‹ç³»ç»Ÿæ½œåœ¨é—®é¢˜ã€‚</li></ul><h5 id="5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#5-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="5. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>5. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h5><p>5.1 <strong>æµ‹è¯•å¤±è´¥æˆ–ç³»ç»Ÿå´©æºƒ</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ç³»ç»Ÿå´©æºƒæˆ–æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä»¥ç¡®å®šæ•…éšœåŸå› ã€‚å¯èƒ½éœ€è¦é™ä½æµ‹è¯•è´Ÿè·ï¼Œæˆ–æ’æŸ¥ç¡¬ä»¶é—®é¢˜ã€‚</li></ul><p>5.2 <strong>ç³»ç»Ÿèµ„æºä¸è¶³</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°å†…å­˜æˆ– CPU èµ„æºä¸è¶³çš„é”™è¯¯ï¼Œè€ƒè™‘å‡å°‘åˆ†é…ç»™æµ‹è¯•çš„èµ„æºé‡ï¼Œæˆ–è°ƒæ•´ç³»ç»Ÿé…ç½®ã€‚</li></ul><h4 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h4><ul><li><a href="https://github.com/stress-ng/stress-ng">Stress GitHub Repository</a></li><li><a href="https://linux.die.net/man/1/stress">Linux Performance Tools</a></li><li><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners">Bash Scripting Basics</a></li></ul><hr><p>æœ¬ SOP æä¾›äº†ä½¿ç”¨ <code>stress</code> å·¥å…·è¿›è¡Œç³»ç»Ÿå‹åŠ›æµ‹è¯•çš„è¯¦ç»†æ­¥éª¤ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·è¯†åˆ«å’Œè§£å†³æ½œåœ¨çš„ç³»ç»Ÿç¨³å®šæ€§é—®é¢˜ã€‚é€šè¿‡è¿™äº›æµ‹è¯•ï¼Œæ‚¨å¯ä»¥ç¡®ä¿ç³»ç»Ÿåœ¨é«˜è´Ÿè·ä¸‹çš„æ€§èƒ½è¡¨ç°ï¼Œå¹¶åŠæ—¶é‡‡å–æªæ–½ä¿®å¤å¯èƒ½çš„æ•…éšœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> stress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPv4 å’Œ IPv6 è·¯ç”±ç®¡ç†</title>
      <link href="/2024/08/07/IPv4_and_IPv6_Routing_Tutorial/"/>
      <url>/2024/08/07/IPv4_and_IPv6_Routing_Tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="IPv4-å’Œ-IPv6-è·¯ç”±ç®¡ç†"><a href="#IPv4-å’Œ-IPv6-è·¯ç”±ç®¡ç†" class="headerlink" title="IPv4 å’Œ IPv6 è·¯ç”±ç®¡ç†"></a>IPv4 å’Œ IPv6 è·¯ç”±ç®¡ç†</h1><hr><p>Linux ç³»ç»Ÿä¸­ IPv4 å’Œ IPv6 è·¯ç”±çš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€æ·»åŠ å’Œåˆ é™¤è·¯ç”±ã€‚</p><h2 id="IPv4-è·¯ç”±"><a href="#IPv4-è·¯ç”±" class="headerlink" title="IPv4 è·¯ç”±"></a>IPv4 è·¯ç”±</h2><h3 id="1-æŸ¥çœ‹-IPv4-è·¯ç”±è¡¨"><a href="#1-æŸ¥çœ‹-IPv4-è·¯ç”±è¡¨" class="headerlink" title="1. æŸ¥çœ‹ IPv4 è·¯ç”±è¡¨"></a>1. æŸ¥çœ‹ IPv4 è·¯ç”±è¡¨</h3><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„ IPv4 è·¯ç”±è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route</span><br></pre></td></tr></table></figure><h3 id="2-æ·»åŠ -IPv4-è·¯ç”±"><a href="#2-æ·»åŠ -IPv4-è·¯ç”±" class="headerlink" title="2. æ·»åŠ  IPv4 è·¯ç”±"></a>2. æ·»åŠ  IPv4 è·¯ç”±</h3><p>æ ¹æ®ç½‘ç»œé…ç½®éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ è·¯ç”±ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route add [ç›®çš„ç½‘ç»œ/æ©ç ] via [ç½‘å…³åœ°å€] dev [ç½‘å¡è®¾å¤‡å]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦æ‰€æœ‰å‘å¾€ <code>192.168.1.0/24</code> ç½‘ç»œçš„æ•°æ®åŒ…éƒ½é€šè¿‡ç½‘å…³ <code>192.168.0.1</code> å’Œç½‘å¡ <code>eth0</code> å‘é€ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route add 192.168.1.0/24 via 192.168.0.1 dev eth0</span><br></pre></td></tr></table></figure><h3 id="3-åˆ é™¤-IPv4-è·¯ç”±"><a href="#3-åˆ é™¤-IPv4-è·¯ç”±" class="headerlink" title="3. åˆ é™¤ IPv4 è·¯ç”±"></a>3. åˆ é™¤ IPv4 è·¯ç”±</h3><p>ä»è·¯ç”±è¡¨ä¸­åˆ é™¤ä¸€æ¡è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route del [ç›®çš„ç½‘ç»œ/æ©ç ]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œåˆ é™¤ä¹‹å‰æ·»åŠ çš„è·¯ç”±ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip route del 192.168.1.0/24</span><br></pre></td></tr></table></figure><h2 id="IPv6-è·¯ç”±"><a href="#IPv6-è·¯ç”±" class="headerlink" title="IPv6 è·¯ç”±"></a>IPv6 è·¯ç”±</h2><h3 id="1-æŸ¥çœ‹-IPv6-è·¯ç”±è¡¨"><a href="#1-æŸ¥çœ‹-IPv6-è·¯ç”±è¡¨" class="headerlink" title="1. æŸ¥çœ‹ IPv6 è·¯ç”±è¡¨"></a>1. æŸ¥çœ‹ IPv6 è·¯ç”±è¡¨</h3><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„ IPv6 è·¯ç”±è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -6 route</span><br></pre></td></tr></table></figure><h3 id="2-æ·»åŠ -IPv6-è·¯ç”±"><a href="#2-æ·»åŠ -IPv6-è·¯ç”±" class="headerlink" title="2. æ·»åŠ  IPv6 è·¯ç”±"></a>2. æ·»åŠ  IPv6 è·¯ç”±</h3><p>æ ¹æ®ç½‘ç»œé…ç½®éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ è·¯ç”±ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip -6 route add [ç›®çš„åœ°å€/å‰ç¼€] via [ç½‘å…³åœ°å€] dev [ç½‘å¡è®¾å¤‡å]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦æ‰€æœ‰å‘å¾€ <code>2001:db8::/32</code> ç½‘ç»œçš„æ•°æ®åŒ…éƒ½é€šè¿‡ç½‘å…³ <code>fe80::1</code> å’Œç½‘å¡ <code>eth0</code> å‘é€ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip -6 route add 2001:db8::/32 via fe80::1 dev eth0</span><br></pre></td></tr></table></figure><h3 id="3-åˆ é™¤-IPv6-è·¯ç”±"><a href="#3-åˆ é™¤-IPv6-è·¯ç”±" class="headerlink" title="3. åˆ é™¤ IPv6 è·¯ç”±"></a>3. åˆ é™¤ IPv6 è·¯ç”±</h3><p>ä»è·¯ç”±è¡¨ä¸­åˆ é™¤ä¸€æ¡è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip -6 route del [ç›®çš„åœ°å€/å‰ç¼€]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œåˆ é™¤ä¹‹å‰æ·»åŠ çš„è·¯ç”±ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ip -6 route del 2001:db8::/32</span><br></pre></td></tr></table></figure><h2 id="æŒä¹…åŒ–è·¯ç”±è®¾ç½®"><a href="#æŒä¹…åŒ–è·¯ç”±è®¾ç½®" class="headerlink" title="æŒä¹…åŒ–è·¯ç”±è®¾ç½®"></a>æŒä¹…åŒ–è·¯ç”±è®¾ç½®</h2><p>ä¸ºäº†ä½¿è·¯ç”±è®¾ç½®åœ¨ç³»ç»Ÿé‡å¯åä¾ç„¶ç”Ÿæ•ˆï¼Œå¯ä»¥å°†å‘½ä»¤æ·»åŠ åˆ°å¯åŠ¨è„šæœ¬ä¸­ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚è¿™å…·ä½“ä¾èµ–äºä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆã€‚</p><h2 id="è°ƒè¯•å’Œæ•…éšœæ’æŸ¥"><a href="#è°ƒè¯•å’Œæ•…éšœæ’æŸ¥" class="headerlink" title="è°ƒè¯•å’Œæ•…éšœæ’æŸ¥"></a>è°ƒè¯•å’Œæ•…éšœæ’æŸ¥</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥å¸®åŠ©è°ƒè¯•å’Œç¡®è®¤è·¯ç”±è®¾ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br><span class="line">ip -6 route show</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½¿ç”¨ <code>ping</code> æˆ– <code>ping6</code> æµ‹è¯•ç½‘ç»œè¿é€šæ€§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping [IPv4åœ°å€]</span><br><span class="line">ping6 [IPv6åœ°å€]</span><br></pre></td></tr></table></figure><p>ç¡®ä¿æœ‰é€‚å½“çš„æƒé™æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ <code>sudo</code> æ¥è·å–å¿…è¦çš„ç®¡ç†å‘˜æƒé™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¦å®½å’Œå­˜å‚¨å•ä½è½¬æ¢</title>
      <link href="/2024/08/07/bandwidth_storage_convert/"/>
      <url>/2024/08/07/bandwidth_storage_convert/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¦å®½å’Œå­˜å‚¨å•ä½è½¬æ¢"><a href="#å¸¦å®½å’Œå­˜å‚¨å•ä½è½¬æ¢" class="headerlink" title="å¸¦å®½å’Œå­˜å‚¨å•ä½è½¬æ¢"></a>å¸¦å®½å’Œå­˜å‚¨å•ä½è½¬æ¢</h1><h2 id="å¸¦å®½å•ä½è½¬æ¢ï¼ˆåŸºäºåè¿›åˆ¶ï¼‰"><a href="#å¸¦å®½å•ä½è½¬æ¢ï¼ˆåŸºäºåè¿›åˆ¶ï¼‰" class="headerlink" title="å¸¦å®½å•ä½è½¬æ¢ï¼ˆåŸºäºåè¿›åˆ¶ï¼‰"></a>å¸¦å®½å•ä½è½¬æ¢ï¼ˆåŸºäºåè¿›åˆ¶ï¼‰</h2><ol><li><strong>1 å­—èŠ‚ (B) &#x3D; 8 æ¯”ç‰¹ (b)</strong></li><li><strong>1 åƒæ¯”ç‰¹ (Kb) &#x3D; 1000 æ¯”ç‰¹ (b)</strong></li><li><strong>1 å…†æ¯”ç‰¹ (Mb) &#x3D; 1000 åƒæ¯”ç‰¹ (Kb)</strong></li><li><strong>1 å‰æ¯”ç‰¹ (Gb) &#x3D; 1000 å…†æ¯”ç‰¹ (Mb)</strong></li><li><strong>1 å¤ªæ¯”ç‰¹ (Tb) &#x3D; 1000 å‰æ¯”ç‰¹ (Gb)</strong></li></ol><h2 id="å­˜å‚¨å•ä½è½¬æ¢ï¼ˆåŸºäºäºŒè¿›åˆ¶ï¼‰"><a href="#å­˜å‚¨å•ä½è½¬æ¢ï¼ˆåŸºäºäºŒè¿›åˆ¶ï¼‰" class="headerlink" title="å­˜å‚¨å•ä½è½¬æ¢ï¼ˆåŸºäºäºŒè¿›åˆ¶ï¼‰"></a>å­˜å‚¨å•ä½è½¬æ¢ï¼ˆåŸºäºäºŒè¿›åˆ¶ï¼‰</h2><ol><li><strong>1 åƒå­—èŠ‚ (KiB) &#x3D; 1024 å­—èŠ‚ (B)</strong></li><li><strong>1 å…†å­—èŠ‚ (MiB) &#x3D; 1024 åƒå­—èŠ‚ (KiB)</strong></li><li><strong>1 å‰å­—èŠ‚ (GiB) &#x3D; 1024 å…†å­—èŠ‚ (MiB)</strong></li><li><strong>1 å¤ªå­—èŠ‚ (TiB) &#x3D; 1024 å‰å­—èŠ‚ (GiB)</strong></li></ol><h2 id="å¸¦å®½å’Œå­˜å‚¨çš„ç›¸äº’è½¬æ¢"><a href="#å¸¦å®½å’Œå­˜å‚¨çš„ç›¸äº’è½¬æ¢" class="headerlink" title="å¸¦å®½å’Œå­˜å‚¨çš„ç›¸äº’è½¬æ¢"></a>å¸¦å®½å’Œå­˜å‚¨çš„ç›¸äº’è½¬æ¢</h2><h3 id="ç¤ºä¾‹1ï¼šå¸¦å®½è½¬å­˜å‚¨"><a href="#ç¤ºä¾‹1ï¼šå¸¦å®½è½¬å­˜å‚¨" class="headerlink" title="ç¤ºä¾‹1ï¼šå¸¦å®½è½¬å­˜å‚¨"></a>ç¤ºä¾‹1ï¼šå¸¦å®½è½¬å­˜å‚¨</h3><p>å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶å¤§å°ä¸º100 MiBï¼Œä¸‹è½½é€Ÿåº¦ä¸º20 Mbpsï¼Œéœ€è¦å¤šé•¿æ—¶é—´ä¸‹è½½å®Œè¿™ä¸ªæ–‡ä»¶ï¼Ÿ</p><ol><li><p><strong>è½¬æ¢æ–‡ä»¶å¤§å°ä¸ºæ¯”ç‰¹</strong>ï¼š</p><ul><li>100 MiB &#x3D; 100 Ã— 1024 Ã— 1024 Ã— 8 &#x3D; 838,860,800 æ¯”ç‰¹ (b)</li></ul></li><li><p><strong>è®¡ç®—ä¸‹è½½æ—¶é—´</strong>ï¼š</p><ul><li>æ—¶é—´ (ç§’) &#x3D; æ–‡ä»¶å¤§å° (æ¯”ç‰¹) &#x2F; å¸¦å®½ (æ¯”ç‰¹æ¯ç§’)</li><li>æ—¶é—´ &#x3D; 838,860,800 b &#x2F; 20,000,000 bps &#x3D; 41.94 ç§’</li></ul></li></ol><h3 id="ç¤ºä¾‹2ï¼šå­˜å‚¨è½¬å¸¦å®½"><a href="#ç¤ºä¾‹2ï¼šå­˜å‚¨è½¬å¸¦å®½" class="headerlink" title="ç¤ºä¾‹2ï¼šå­˜å‚¨è½¬å¸¦å®½"></a>ç¤ºä¾‹2ï¼šå­˜å‚¨è½¬å¸¦å®½</h3><p>å‡è®¾æœ‰ä¸€ä¸ªç½‘ç»œå¸¦å®½ä¸º50 Mbpsï¼Œæ¯ç§’èƒ½å¤Ÿä¼ è¾“å¤šå°‘ GiB çš„æ•°æ®ï¼Ÿ</p><ol><li><p><strong>è½¬æ¢å¸¦å®½ä¸ºå­—èŠ‚æ¯ç§’</strong>ï¼š</p><ul><li>50 Mbps &#x3D; 50 Ã— 1000 Ã— 1000 &#x2F; 8 &#x3D; 6,250,000 å­—èŠ‚æ¯ç§’ (Bps)</li></ul></li><li><p><strong>è½¬æ¢ä¸ºGiBæ¯ç§’</strong>ï¼š</p><ul><li>6,250,000 Bps &#x3D; 6,250,000 &#x2F; 1024 &#x2F; 1024 &#x2F; 1024 &#x3D; 0.0058 GiB æ¯ç§’</li></ul></li></ol><p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œå¸¦å®½å’Œå­˜å‚¨å•ä½å¯ä»¥é€šè¿‡å­—èŠ‚å’Œæ¯”ç‰¹ä¹‹é—´çš„è½¬æ¢è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>numactl æ“ä½œæµç¨‹</title>
      <link href="/2024/08/07/numactl_sop/"/>
      <url>/2024/08/07/numactl_sop/</url>
      
        <content type="html"><![CDATA[<h1 id="numactl-æ“ä½œæµç¨‹"><a href="#numactl-æ“ä½œæµç¨‹" class="headerlink" title="numactl æ“ä½œæµç¨‹"></a><code>numactl</code> æ“ä½œæµç¨‹</h1><hr><h2 id="1-æ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯"><a href="#1-æ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="1. æ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯"></a>1. æ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯</h2><p>åœ¨è¿›è¡Œä»»ä½•ç»‘å®šæ“ä½œä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ç³»ç»Ÿçš„NUMAèŠ‚ç‚¹ä¿¡æ¯ï¼Œä»¥äº†è§£å¯ç”¨çš„CPUå’Œå†…å­˜èŠ‚ç‚¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --hardware</span><br></pre></td></tr></table></figure><p>è®°å½•è¾“å‡ºä¿¡æ¯ï¼Œç¡®ä¿äº†è§£ç³»ç»Ÿä¸­æ‰€æœ‰NUMAèŠ‚ç‚¹åŠå…¶CPUæ ¸å¿ƒåˆ†å¸ƒã€‚</p><h2 id="2-ç¡®å®šéœ€è¦ç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹"><a href="#2-ç¡®å®šéœ€è¦ç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹" class="headerlink" title="2. ç¡®å®šéœ€è¦ç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹"></a>2. ç¡®å®šéœ€è¦ç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹</h2><p>æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚å’Œç³»ç»Ÿçš„NUMAèŠ‚ç‚¹åˆ†å¸ƒï¼Œç¡®å®šéœ€è¦ç»‘å®šçš„CPUæ ¸å¿ƒå’Œå†…å­˜èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œå‡è®¾éœ€è¦ç»‘å®šåˆ°CPU 2å’Œ3ï¼Œå¹¶ä½¿ç”¨NUMAèŠ‚ç‚¹0ä¸Šçš„å†…å­˜ã€‚</p><h2 id="3-ç»‘å®šCPUæ ¸å¿ƒ"><a href="#3-ç»‘å®šCPUæ ¸å¿ƒ" class="headerlink" title="3. ç»‘å®šCPUæ ¸å¿ƒ"></a>3. ç»‘å®šCPUæ ¸å¿ƒ</h2><p>å°†åº”ç”¨ç¨‹åºç»‘å®šåˆ°ç‰¹å®šçš„CPUæ ¸å¿ƒï¼Œä»¥æé«˜CPUåˆ©ç”¨ç‡å’Œæ€§èƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --physcpubind=2,3 your_command</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¿è¡Œåä¸º <code>my_program</code> çš„åº”ç”¨ç¨‹åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --physcpubind=2,3 ./my_program</span><br></pre></td></tr></table></figure><h2 id="4-ç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜"><a href="#4-ç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜" class="headerlink" title="4. ç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜"></a>4. ç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜</h2><p>å¦‚æœè¿˜éœ€è¦ç»‘å®šåˆ°ç‰¹å®šçš„NUMAèŠ‚ç‚¹å†…å­˜ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --membind=0 your_command</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¿è¡Œåä¸º <code>my_program</code> çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ç»‘å®šåˆ°NUMAèŠ‚ç‚¹0çš„å†…å­˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --physcpubind=2,3 --membind=0 ./my_program</span><br></pre></td></tr></table></figure><h2 id="5-éªŒè¯ç»‘å®šç»“æœ"><a href="#5-éªŒè¯ç»‘å®šç»“æœ" class="headerlink" title="5. éªŒè¯ç»‘å®šç»“æœ"></a>5. éªŒè¯ç»‘å®šç»“æœ</h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥è¿›ç¨‹çš„CPUå’Œå†…å­˜ç»‘å®šæƒ…å†µï¼Œç¡®ä¿ç»‘å®šæˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --show</span><br></pre></td></tr></table></figure><h2 id="6-æµ‹è¯•å’Œç›‘æ§"><a href="#6-æµ‹è¯•å’Œç›‘æ§" class="headerlink" title="6. æµ‹è¯•å’Œç›‘æ§"></a>6. æµ‹è¯•å’Œç›‘æ§</h2><p>è¿è¡Œåº”ç”¨ç¨‹åºåï¼Œç›‘æ§å…¶æ€§èƒ½å’Œèµ„æºä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿ç»‘å®šæ“ä½œè¾¾åˆ°äº†é¢„æœŸæ•ˆæœã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œç›‘æ§ï¼š</p><ul><li><code>top</code></li><li><code>htop</code></li><li><code>numastat</code></li><li><code>perf</code></li></ul><h1 id="ç¤ºä¾‹SOP"><a href="#ç¤ºä¾‹SOP" class="headerlink" title="ç¤ºä¾‹SOP"></a>ç¤ºä¾‹SOP</h1><h2 id="æ­¥éª¤1ï¼šæ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯"><a href="#æ­¥éª¤1ï¼šæ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="æ­¥éª¤1ï¼šæ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯"></a>æ­¥éª¤1ï¼šæ£€æŸ¥NUMAèŠ‚ç‚¹ä¿¡æ¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --hardware</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">available: 2 nodes (0-1)</span><br><span class="line">node 0 cpus: 0 1 2 3</span><br><span class="line">node 0 size: 32632 MB</span><br><span class="line">node 0 free: 12345 MB</span><br><span class="line">node 1 cpus: 4 5 6 7</span><br><span class="line">node 1 size: 32768 MB</span><br><span class="line">node 1 free: 23456 MB</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤2ï¼šç¡®å®šç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹"><a href="#æ­¥éª¤2ï¼šç¡®å®šç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹" class="headerlink" title="æ­¥éª¤2ï¼šç¡®å®šç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹"></a>æ­¥éª¤2ï¼šç¡®å®šç»‘å®šçš„CPUæ ¸å¿ƒå’ŒNUMAèŠ‚ç‚¹</h2><p>å‡è®¾éœ€è¦ç»‘å®šåˆ°CPU 2å’Œ3ï¼Œå¹¶ä½¿ç”¨NUMAèŠ‚ç‚¹0ä¸Šçš„å†…å­˜ã€‚</p><h2 id="æ­¥éª¤3ï¼šç»‘å®šCPUæ ¸å¿ƒ"><a href="#æ­¥éª¤3ï¼šç»‘å®šCPUæ ¸å¿ƒ" class="headerlink" title="æ­¥éª¤3ï¼šç»‘å®šCPUæ ¸å¿ƒ"></a>æ­¥éª¤3ï¼šç»‘å®šCPUæ ¸å¿ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --physcpubind=2,3 ./my_program</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤4ï¼šç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜"><a href="#æ­¥éª¤4ï¼šç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜" class="headerlink" title="æ­¥éª¤4ï¼šç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜"></a>æ­¥éª¤4ï¼šç»‘å®šNUMAèŠ‚ç‚¹å†…å­˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --physcpubind=2,3 --membind=0 ./my_program</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤5ï¼šéªŒè¯ç»‘å®šç»“æœ"><a href="#æ­¥éª¤5ï¼šéªŒè¯ç»‘å®šç»“æœ" class="headerlink" title="æ­¥éª¤5ï¼šéªŒè¯ç»‘å®šç»“æœ"></a>æ­¥éª¤5ï¼šéªŒè¯ç»‘å®šç»“æœ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numactl --show</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">policy: default</span><br><span class="line">physcpubind: 2 3 </span><br><span class="line">cpubind: 0 </span><br><span class="line">membind: 0 </span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤6ï¼šæµ‹è¯•å’Œç›‘æ§"><a href="#æ­¥éª¤6ï¼šæµ‹è¯•å’Œç›‘æ§" class="headerlink" title="æ­¥éª¤6ï¼šæµ‹è¯•å’Œç›‘æ§"></a>æ­¥éª¤6ï¼šæµ‹è¯•å’Œç›‘æ§</h2><p>ä½¿ç”¨ <code>htop</code> æˆ– <code>numastat</code> ç­‰å·¥å…·ç›‘æ§åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œèµ„æºä½¿ç”¨æƒ…å†µã€‚</p><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå¯ä»¥ç¡®ä¿åº”ç”¨ç¨‹åºåœ¨NUMAç³»ç»Ÿä¸Šå¾—åˆ°ä¼˜åŒ–è¿è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Numactl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸­è¿›å…¥ S0ã€S1ã€S2ã€S3ã€S4 å’Œ S5 æ¨¡å¼</title>
      <link href="/2024/08/06/linux_power_state_mode/"/>
      <url>/2024/08/06/linux_power_state_mode/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•åœ¨-Linux-ç³»ç»Ÿä¸­è¿›å…¥-S0ã€S1ã€S2ã€S3ã€S4-å’Œ-S5-æ¨¡å¼"><a href="#å¦‚ä½•åœ¨-Linux-ç³»ç»Ÿä¸­è¿›å…¥-S0ã€S1ã€S2ã€S3ã€S4-å’Œ-S5-æ¨¡å¼" class="headerlink" title="å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸­è¿›å…¥ S0ã€S1ã€S2ã€S3ã€S4 å’Œ S5 æ¨¡å¼"></a>å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸­è¿›å…¥ S0ã€S1ã€S2ã€S3ã€S4 å’Œ S5 æ¨¡å¼</h1><hr><h2 id="æ£€æŸ¥ç³»ç»Ÿæ”¯æŒçš„ç”µæºæ¨¡å¼"><a href="#æ£€æŸ¥ç³»ç»Ÿæ”¯æŒçš„ç”µæºæ¨¡å¼" class="headerlink" title="æ£€æŸ¥ç³»ç»Ÿæ”¯æŒçš„ç”µæºæ¨¡å¼"></a>æ£€æŸ¥ç³»ç»Ÿæ”¯æŒçš„ç”µæºæ¨¡å¼</h2><p>åœ¨è¿›å…¥è¿™äº›æ¨¡å¼ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ç³»ç»Ÿæ”¯æŒå“ªäº›ç”µæºçŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/power/state</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤çš„è¾“å‡ºå¯èƒ½åŒ…æ‹¬ï¼š</p><ul><li><code>freeze</code>ï¼šå†»ç»“å½“å‰ä»»åŠ¡ï¼Œä¸å…³é—­ä»»ä½•è®¾å¤‡ã€‚</li><li><code>standby</code>ï¼šè¿›å…¥ S1 æ¨¡å¼ã€‚</li><li><code>mem</code>ï¼šè¿›å…¥ S3 æ¨¡å¼ã€‚</li><li><code>disk</code>ï¼šè¿›å…¥ S4 æ¨¡å¼ï¼Œå³ä¼‘çœ ï¼Œå°†å†…å­˜å†…å®¹ä¿å­˜åˆ°ç£ç›˜ã€‚</li></ul><h2 id="å„ç”µæºæ¨¡å¼ç®€ä»‹"><a href="#å„ç”µæºæ¨¡å¼ç®€ä»‹" class="headerlink" title="å„ç”µæºæ¨¡å¼ç®€ä»‹"></a>å„ç”µæºæ¨¡å¼ç®€ä»‹</h2><ul><li>S0ï¼ˆå·¥ä½œçŠ¶æ€ï¼‰ï¼šç³»ç»Ÿå¤„äºå®Œå…¨å¼€æœºçŠ¶æ€ï¼Œæ‰€æœ‰éƒ¨ä»¶éƒ½åœ¨è¿è¡Œã€‚</li><li>S1ï¼ˆå¾…æœºï¼‰ï¼šCPU åœæ­¢æ‰§è¡ŒæŒ‡ä»¤ï¼Œä½†å†…å­˜å’Œå…¶ä»–å…³é”®éƒ¨ä»¶ä¿æŒä¾›ç”µã€‚</li><li>S2ï¼ˆå¾…æœºï¼‰ï¼šCPU å’Œç³»ç»Ÿç¼“å­˜åœæ­¢ä¾›ç”µï¼Œä½†å†…å­˜ä¿æŒä¾›ç”µã€‚</li><li>S3ï¼ˆæŒ‚èµ·åˆ°å†…å­˜ï¼‰ï¼šç³»ç»ŸçŠ¶æ€ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œé™¤å†…å­˜å¤–çš„æ‰€æœ‰éƒ¨ä»¶éƒ½æ–­ç”µã€‚</li><li>S4ï¼ˆä¼‘çœ ï¼‰ï¼šç³»ç»ŸçŠ¶æ€ä¿å­˜åˆ°ç¡¬ç›˜ï¼Œæ‰€æœ‰éƒ¨ä»¶æ–­ç”µã€‚ç³»ç»Ÿæ¢å¤æ—¶ä»ç¡¬ç›˜è¯»å–çŠ¶æ€ã€‚</li><li>S5ï¼ˆè½¯å…³æœºï¼‰ï¼šç³»ç»Ÿå®Œå…¨å…³æœºï¼Œä½†ç”µæºä»ç„¶ä¾›ç”µï¼Œå¯ä»¥é€šè¿‡ç”µæºæŒ‰é’®å¯åŠ¨ã€‚</li></ul><h2 id="è¿›å…¥å„ç”µæºæ¨¡å¼çš„å‘½ä»¤"><a href="#è¿›å…¥å„ç”µæºæ¨¡å¼çš„å‘½ä»¤" class="headerlink" title="è¿›å…¥å„ç”µæºæ¨¡å¼çš„å‘½ä»¤"></a>è¿›å…¥å„ç”µæºæ¨¡å¼çš„å‘½ä»¤</h2><ul><li><p>S0 æ¨¡å¼ï¼ˆå·¥ä½œçŠ¶æ€ï¼‰<br>æ— éœ€ç‰¹æ®Šå‘½ä»¤ï¼Œç³»ç»Ÿå¼€æœºæ—¶å³å¤„äº S0 æ¨¡å¼ã€‚</p></li><li><p>S1 æ¨¡å¼ï¼ˆStandbyï¼‰<br>ä½¿ç”¨ echo å‘½ä»¤ï¼š</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> standby | sudo <span class="built_in">tee</span> /sys/power/state</span><br></pre></td></tr></table></figure><ul><li>S2 æ¨¡å¼ï¼ˆå¾…æœºï¼‰<br>è¯·æ³¨æ„ï¼ŒS2 æ¨¡å¼åœ¨å¾ˆå¤šç³»ç»Ÿä¸Šå¹¶ä¸å¸¸ç”¨æˆ–ä¸è¢«æ”¯æŒã€‚å¦‚æœç³»ç»Ÿæ”¯æŒï¼Œå¯ä»¥å°è¯•ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> standby | sudo <span class="built_in">tee</span> /sys/power/state</span><br></pre></td></tr></table></figure><ul><li>S3 æ¨¡å¼ï¼ˆSuspend-to-RAMï¼‰</li></ul><p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ systemctl å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">suspend</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨ echo å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> mem | sudo <span class="built_in">tee</span> /sys/power/state</span><br></pre></td></tr></table></figure><ul><li>S4 æ¨¡å¼ï¼ˆä¼‘çœ ï¼‰<br>ä½¿ç”¨ systemctl å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl hibernate</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ echo å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> disk | sudo <span class="built_in">tee</span> /sys/power/state</span><br></pre></td></tr></table></figure><ul><li>S5 æ¨¡å¼ï¼ˆè½¯å…³æœºï¼‰<br>ä½¿ç”¨ systemctl å‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl poweroff</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹æ“ä½œ"><a href="#ç¤ºä¾‹æ“ä½œ" class="headerlink" title="ç¤ºä¾‹æ“ä½œ"></a>ç¤ºä¾‹æ“ä½œ</h2><p><strong>1. æ£€æŸ¥ç³»ç»Ÿæ”¯æŒçš„ç”µæºæ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /sys/power/state</span><br><span class="line">freeze standby mem disk</span><br></pre></td></tr></table></figure><p><strong>2. è¿›å…¥ S1 æ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> standby | sudo <span class="built_in">tee</span> /sys/power/state</span><br></pre></td></tr></table></figure><p><strong>3. è¿›å…¥ S3 æ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">suspend</span></span><br></pre></td></tr></table></figure><p><strong>4. è¿›å…¥ S4 æ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl hibernate</span><br></pre></td></tr></table></figure><p><strong>5. è¿›å…¥ S5 æ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl poweroff</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>ç¡¬ä»¶æ”¯æŒï¼šç¡®ä¿ä½ çš„ç¡¬ä»¶æ”¯æŒç›¸åº”çš„ç”µæºæ¨¡å¼ã€‚</p><p>æ•°æ®ä¿å­˜ï¼šè¿›å…¥è¿™äº›æ¨¡å¼å‰ä¿å­˜æ‰€æœ‰æœªä¿å­˜çš„å·¥ä½œï¼Œä»¥é¿å…æ•°æ®ä¸¢å¤±ã€‚</p><p>é©±åŠ¨æ”¯æŒï¼šæœ‰äº›ç³»ç»Ÿå’Œè®¾å¤‡é©±åŠ¨å¯èƒ½å¯¹æŸäº›ç”µæºæ¨¡å¼æ”¯æŒä¸å®Œå–„ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¢å¤æ—¶å‡ºç°é—®é¢˜ã€‚ </p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux è¿æ¥ USB ä¸²å£æ•™ç¨‹</title>
      <link href="/2024/08/05/Linux_USB_Serial_Tutorial/"/>
      <url>/2024/08/05/Linux_USB_Serial_Tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-è¿æ¥-USB-ä¸²å£æ•™ç¨‹"><a href="#Linux-è¿æ¥-USB-ä¸²å£æ•™ç¨‹" class="headerlink" title="Linux è¿æ¥ USB ä¸²å£æ•™ç¨‹"></a>Linux è¿æ¥ USB ä¸²å£æ•™ç¨‹</h1><hr><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿æ¥USBä¸²å£è®¾å¤‡é€šå¸¸éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><h2 id="1-ç¡®è®¤ç³»ç»Ÿè¯†åˆ«åˆ°USBä¸²å£è®¾å¤‡"><a href="#1-ç¡®è®¤ç³»ç»Ÿè¯†åˆ«åˆ°USBä¸²å£è®¾å¤‡" class="headerlink" title="1. ç¡®è®¤ç³»ç»Ÿè¯†åˆ«åˆ°USBä¸²å£è®¾å¤‡"></a>1. ç¡®è®¤ç³»ç»Ÿè¯†åˆ«åˆ°USBä¸²å£è®¾å¤‡</h2><p>æ’å…¥USBä¸²å£è®¾å¤‡åï¼Œå¯ä»¥ä½¿ç”¨ <code>dmesg</code> å‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦è¯†åˆ«åˆ°è¯¥è®¾å¤‡ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep ttyUSB</span><br></pre></td></tr></table></figure><p>åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[12345.678901] usb 1-1: cp210x converter now attached to ttyUSB0</span><br></pre></td></tr></table></figure><p>è¿™è¡¨ç¤ºç³»ç»Ÿå·²å°†USBä¸²å£è®¾å¤‡è¯†åˆ«ä¸º <code>/dev/ttyUSB0</code>ã€‚</p><h2 id="2-å®‰è£…å¿…è¦çš„è½¯ä»¶"><a href="#2-å®‰è£…å¿…è¦çš„è½¯ä»¶" class="headerlink" title="2. å®‰è£…å¿…è¦çš„è½¯ä»¶"></a>2. å®‰è£…å¿…è¦çš„è½¯ä»¶</h2><p>ä½¿ç”¨USBä¸²å£è®¾å¤‡é€šå¸¸éœ€è¦å®‰è£… <code>screen</code> æˆ– <code>minicom</code> ç­‰ç»ˆç«¯ä»¿çœŸè½¯ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install screen</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install minicom</span><br></pre></td></tr></table></figure><h2 id="3-è¿æ¥åˆ°USBä¸²å£è®¾å¤‡"><a href="#3-è¿æ¥åˆ°USBä¸²å£è®¾å¤‡" class="headerlink" title="3. è¿æ¥åˆ°USBä¸²å£è®¾å¤‡"></a>3. è¿æ¥åˆ°USBä¸²å£è®¾å¤‡</h2><h3 id="ä½¿ç”¨-screen"><a href="#ä½¿ç”¨-screen" class="headerlink" title="ä½¿ç”¨ screen"></a>ä½¿ç”¨ screen</h3><p>å¯ä»¥ä½¿ç”¨ <code>screen</code> å‘½ä»¤è¿æ¥åˆ°USBä¸²å£è®¾å¤‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾å¤‡è¢«è¯†åˆ«ä¸º <code>/dev/ttyUSB0</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen /dev/ttyUSB0 115200</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>115200</code> æ˜¯æ³¢ç‰¹ç‡ï¼Œæ ¹æ®ä½ çš„è®¾å¤‡é…ç½®è¿›è¡Œè°ƒæ•´ã€‚</p><h3 id="ä½¿ç”¨-minicom"><a href="#ä½¿ç”¨-minicom" class="headerlink" title="ä½¿ç”¨ minicom"></a>ä½¿ç”¨ minicom</h3><p>é¦–å…ˆï¼Œé…ç½® <code>minicom</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo minicom -s</span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®ç•Œé¢ä¸­ï¼Œé€‰æ‹©â€œä¸²å£è®¾ç½®â€ï¼Œç„¶åè®¾ç½®ä¸²å£è®¾å¤‡ä¸º <code>/dev/ttyUSB0</code>ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„æ³¢ç‰¹ç‡ã€‚</p><p>é…ç½®å®Œæˆåï¼Œé€‰æ‹©â€œä¿å­˜å¹¶é€€å‡ºâ€ã€‚ç„¶åå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minicom</span><br></pre></td></tr></table></figure><h2 id="4-é€€å‡ºè¿æ¥"><a href="#4-é€€å‡ºè¿æ¥" class="headerlink" title="4. é€€å‡ºè¿æ¥"></a>4. é€€å‡ºè¿æ¥</h2><h3 id="ä½¿ç”¨-screen-1"><a href="#ä½¿ç”¨-screen-1" class="headerlink" title="ä½¿ç”¨ screen"></a>ä½¿ç”¨ screen</h3><p>è¦é€€å‡º <code>screen</code> ä¼šè¯ï¼ŒæŒ‰ <code>Ctrl-a</code> ç„¶åæŒ‰ <code>k</code>ï¼Œå†æŒ‰ <code>y</code> ç¡®è®¤ã€‚</p><h3 id="ä½¿ç”¨-minicom-1"><a href="#ä½¿ç”¨-minicom-1" class="headerlink" title="ä½¿ç”¨ minicom"></a>ä½¿ç”¨ minicom</h3><p>è¦é€€å‡º <code>minicom</code>ï¼ŒæŒ‰ <code>Ctrl-a</code> ç„¶åæŒ‰ <code>q</code>ï¼Œå†é€‰æ‹©â€œæ˜¯â€ç¡®è®¤é€€å‡ºã€‚</p><hr><p>ä»¥ä¸Šå°±æ˜¯åœ¨Linuxç³»ç»Ÿä¸­è¿æ¥USBä¸²å£è®¾å¤‡çš„åŸºæœ¬æ­¥éª¤ã€‚</p><h2 id="DB9-ä¸²å£çº¿åº"><a href="#DB9-ä¸²å£çº¿åº" class="headerlink" title="DB9 ä¸²å£çº¿åº"></a>DB9 ä¸²å£çº¿åº</h2><h3 id="DB9å…¬å¤´ï¼ˆMaleï¼‰é’ˆè„šæ’åˆ—"><a href="#DB9å…¬å¤´ï¼ˆMaleï¼‰é’ˆè„šæ’åˆ—" class="headerlink" title="DB9å…¬å¤´ï¼ˆMaleï¼‰é’ˆè„šæ’åˆ—"></a>DB9å…¬å¤´ï¼ˆMaleï¼‰é’ˆè„šæ’åˆ—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5  4  3  2  1</span><br><span class="line"> â—  â—  â—  â—  â—</span><br><span class="line">  9  8  7  6</span><br><span class="line"> â—  â—  â—  â— </span><br></pre></td></tr></table></figure><h3 id="DB9æ¯å¤´ï¼ˆFemaleï¼‰é’ˆè„šæ’åˆ—"><a href="#DB9æ¯å¤´ï¼ˆFemaleï¼‰é’ˆè„šæ’åˆ—" class="headerlink" title="DB9æ¯å¤´ï¼ˆFemaleï¼‰é’ˆè„šæ’åˆ—"></a>DB9æ¯å¤´ï¼ˆFemaleï¼‰é’ˆè„šæ’åˆ—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1  2  3  4  5</span><br><span class="line"> â—  â—  â—  â—  â—</span><br><span class="line">  6  7  8  9</span><br><span class="line"> â—  â—  â—  â— </span><br></pre></td></tr></table></figure><h3 id="é’ˆè„šå®šä¹‰"><a href="#é’ˆè„šå®šä¹‰" class="headerlink" title="é’ˆè„šå®šä¹‰"></a>é’ˆè„šå®šä¹‰</h3><table><thead><tr><th>é’ˆè„šç¼–å·</th><th>ä¿¡å·åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>1</td><td>DCD (Data Carrier Detect)</td><td>æ•°æ®è½½æ³¢æ£€æµ‹</td></tr><tr><td>2</td><td>RXD (Receive Data)</td><td>æ¥æ”¶æ•°æ®</td></tr><tr><td>3</td><td>TXD (Transmit Data)</td><td>å‘é€æ•°æ®</td></tr><tr><td>4</td><td>DTR (Data Terminal Ready)</td><td>æ•°æ®ç»ˆç«¯å‡†å¤‡å¥½</td></tr><tr><td>5</td><td>GND (Ground)</td><td>ä¿¡å·åœ°</td></tr><tr><td>6</td><td>DSR (Data Set Ready)</td><td>æ•°æ®è®¾ç½®å‡†å¤‡å¥½</td></tr><tr><td>7</td><td>RTS (Request to Send)</td><td>è¯·æ±‚å‘é€</td></tr><tr><td>8</td><td>CTS (Clear to Send)</td><td>æ¸…é™¤å‘é€</td></tr><tr><td>9</td><td>RI (Ring Indicator)</td><td>æŒ¯é“ƒæŒ‡ç¤º</td></tr></tbody></table><h3 id="å¸¸ç”¨è¿æ¥"><a href="#å¸¸ç”¨è¿æ¥" class="headerlink" title="å¸¸ç”¨è¿æ¥"></a>å¸¸ç”¨è¿æ¥</h3><h4 id="1-ç›´è¿çº¿ï¼ˆä¹Ÿç§°ä¸ºç›´é€šçº¿ï¼‰"><a href="#1-ç›´è¿çº¿ï¼ˆä¹Ÿç§°ä¸ºç›´é€šçº¿ï¼‰" class="headerlink" title="1. ç›´è¿çº¿ï¼ˆä¹Ÿç§°ä¸ºç›´é€šçº¿ï¼‰"></a>1. ç›´è¿çº¿ï¼ˆä¹Ÿç§°ä¸ºç›´é€šçº¿ï¼‰</h4><ul><li>è¿™ç§è¿æ¥æ–¹å¼é€šå¸¸ç”¨äºPCä¸è°ƒåˆ¶è§£è°ƒå™¨ï¼ˆModemï¼‰ä¹‹é—´çš„è¿æ¥ã€‚</li><li>ç›´è¿çº¿çš„é’ˆè„šå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DB9å…¬å¤´ (Male)       DB9æ¯å¤´ (Female)</span><br><span class="line">2 (RXD)  &lt;--------&gt;  2 (RXD)</span><br><span class="line">3 (TXD)  &lt;--------&gt;  3 (TXD)</span><br><span class="line">5 (GND)  &lt;--------&gt;  5 (GND)</span><br><span class="line">7 (RTS)  &lt;--------&gt;  7 (RTS)</span><br><span class="line">8 (CTS)  &lt;--------&gt;  8 (CTS)</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-äº¤å‰çº¿ï¼ˆä¹Ÿç§°ä¸ºnull-modemçº¿ï¼‰"><a href="#2-äº¤å‰çº¿ï¼ˆä¹Ÿç§°ä¸ºnull-modemçº¿ï¼‰" class="headerlink" title="2. äº¤å‰çº¿ï¼ˆä¹Ÿç§°ä¸ºnull modemçº¿ï¼‰"></a>2. äº¤å‰çº¿ï¼ˆä¹Ÿç§°ä¸ºnull modemçº¿ï¼‰</h4><ul><li>è¿™ç§è¿æ¥æ–¹å¼ç”¨äºPCä¸PCä¹‹é—´ï¼Œæˆ–PCä¸ä¸²å£è®¾å¤‡ä¹‹é—´çš„ç›´æ¥é€šä¿¡ã€‚</li><li>äº¤å‰çº¿çš„é’ˆè„šå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DB9å…¬å¤´ (Male)       DB9å…¬å¤´ (Male)</span><br><span class="line">2 (RXD)  &lt;--------&gt;  3 (TXD)</span><br><span class="line">3 (TXD)  &lt;--------&gt;  2 (RXD)</span><br><span class="line">5 (GND)  &lt;--------&gt;  5 (GND)</span><br><span class="line">7 (RTS)  &lt;--------&gt;  8 (CTS)</span><br><span class="line">8 (CTS)  &lt;--------&gt;  7 (RTS)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> Serial </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RHEL9 ç½‘ç»œé…ç½®</title>
      <link href="/2024/07/29/RHEL9_network_config/"/>
      <url>/2024/07/29/RHEL9_network_config/</url>
      
        <content type="html"><![CDATA[<h1 id="RHEL9-ç½‘ç»œé…ç½®"><a href="#RHEL9-ç½‘ç»œé…ç½®" class="headerlink" title="RHEL9 ç½‘ç»œé…ç½®"></a>RHEL9 ç½‘ç»œé…ç½®</h1><hr><h2 id="å¼€å…³interfaceå’Œprofile"><a href="#å¼€å…³interfaceå’Œprofile" class="headerlink" title="å¼€å…³interfaceå’Œprofile"></a>å¼€å…³interfaceå’Œprofile</h2><ol><li><p><strong>è·å–ç½‘ç»œçŠ¶æ€</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection</span><br><span class="line">NAME           UUID                                  TYPE      DEVICE</span><br><span class="line">Profile 2      21906cd8-c04d-45fd-9b7f-e6e85c43f891  ethernet  enP21p1s0f1np1</span><br><span class="line">enP21s17f1np1  f9ed821f-f3db-46ea-90fd-13dd74dc5587  ethernet  --</span><br></pre></td></tr></table></figure></li><li><p><strong>ifdown profile</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ifdown &quot;Profile 2&quot;</span><br><span class="line">Connection &#x27;Profile 2&#x27; successfully deactivated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/7)</span><br></pre></td></tr></table></figure></li><li><p><strong>link down interface</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ip link set enP21p1s0f1np1 down</span><br></pre></td></tr></table></figure></li><li><p><strong>link up interface</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ip link set enP21p1s0f1np1 up</span><br></pre></td></tr></table></figure></li><li><p><strong>ifup interface</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ifup &quot;Profile 2&quot;</span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/8)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>/etc/fstab æ–‡ä»¶é…ç½®æ•™ç¨‹</title>
      <link href="/2024/07/28/fstab_config/"/>
      <url>/2024/07/28/fstab_config/</url>
      
        <content type="html"><![CDATA[<h1 id="etc-fstab-æ–‡ä»¶é…ç½®æ•™ç¨‹"><a href="#etc-fstab-æ–‡ä»¶é…ç½®æ•™ç¨‹" class="headerlink" title="/etc/fstab æ–‡ä»¶é…ç½®æ•™ç¨‹"></a><code>/etc/fstab</code> æ–‡ä»¶é…ç½®æ•™ç¨‹</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><code>/etc/fstab</code> æ–‡ä»¶ç”¨äºå®šä¹‰ç³»ç»Ÿåœ¨å¯åŠ¨æ—¶å¦‚ä½•è‡ªåŠ¨æŒ‚è½½å„ç§æ–‡ä»¶ç³»ç»Ÿã€‚è¿™ä¸ªæ–‡ä»¶åœ¨ Linux ç³»ç»Ÿä¸­éå¸¸é‡è¦ï¼Œå®ƒå†³å®šäº†ç³»ç»Ÿå¯åŠ¨æ—¶å“ªäº›è®¾å¤‡å°†è¢«æŒ‚è½½åˆ°å“ªäº›æŒ‚è½½ç‚¹ã€‚</p><h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><p><code>/etc/fstab</code> æ–‡ä»¶çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½é…ç½®ï¼Œæ¯è¡ŒåŒ…å«å…­ä¸ªå­—æ®µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;æ–‡ä»¶ç³»ç»Ÿ&gt; &lt;æŒ‚è½½ç‚¹&gt; &lt;ç±»å‹&gt; &lt;é€‰é¡¹&gt; &lt;è½¬å‚¨&gt; &lt;è‡ªæ£€&gt;</span><br></pre></td></tr></table></figure><h3 id="å­—æ®µè§£é‡Š"><a href="#å­—æ®µè§£é‡Š" class="headerlink" title="å­—æ®µè§£é‡Š"></a>å­—æ®µè§£é‡Š</h3><ol><li><p><strong>æ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰ï¼š</strong></p><ul><li>è®¾å¤‡æ–‡ä»¶æˆ–åˆ†åŒºã€‚ä¾‹å¦‚ï¼š<code>/dev/sda1</code>ï¼Œ<code>UUID=xxxx-xxxx</code>ï¼Œ<code>LABEL=home</code>ã€‚</li></ul></li><li><p><strong>æŒ‚è½½ç‚¹ï¼ˆMount Pointï¼‰ï¼š</strong></p><ul><li>æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°çš„ç›®å½•ã€‚ä¾‹å¦‚ï¼š<code>/</code>ï¼Œ<code>/home</code>ï¼Œ<code>/mnt/backup</code>ã€‚</li></ul></li><li><p><strong>æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆFilesystem Typeï¼‰ï¼š</strong></p><ul><li>æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚ä¾‹å¦‚ï¼š<code>ext4</code>ï¼Œ<code>ntfs</code>ï¼Œ<code>vfat</code>ã€‚</li></ul></li><li><p><strong>æŒ‚è½½é€‰é¡¹ï¼ˆMount Optionsï¼‰ï¼š</strong></p><ul><li>æŒ‚è½½æ—¶çš„é€‰é¡¹ï¼Œå¤šä¸ªé€‰é¡¹ä½¿ç”¨é€—å·åˆ†éš”ã€‚ä¾‹å¦‚ï¼š<code>defaults</code>ï¼Œ<code>ro</code>ï¼ˆåªè¯»ï¼‰ï¼Œ<code>noexec</code>ï¼ˆä¸å¯æ‰§è¡Œï¼‰ã€‚</li></ul></li><li><p><strong>è½¬å‚¨é¢‘ç‡ï¼ˆDump Frequencyï¼‰ï¼š</strong></p><ul><li>æ•°å­—ï¼Œè¡¨ç¤ºæ˜¯å¦éœ€è¦å¤‡ä»½ã€‚é€šå¸¸ä¸º <code>0</code>ï¼ˆä¸å¤‡ä»½ï¼‰æˆ– <code>1</code>ï¼ˆå¤‡ä»½ï¼‰ã€‚</li></ul></li><li><p><strong>è‡ªæ£€é¡ºåºï¼ˆFsck Orderï¼‰ï¼š</strong></p><ul><li>æ•°å­—ï¼Œè¡¨ç¤ºå¯åŠ¨æ—¶æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥çš„é¡ºåºã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿé€šå¸¸ä¸º <code>1</code>ï¼Œå…¶ä»–ä¸º <code>2</code>ï¼Œä¸æ£€æŸ¥åˆ™ä¸º <code>0</code>ã€‚</li></ul></li></ol><h2 id="ç¤ºä¾‹é…ç½®"><a href="#ç¤ºä¾‹é…ç½®" class="headerlink" title="ç¤ºä¾‹é…ç½®"></a>ç¤ºä¾‹é…ç½®</h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„ <code>/etc/fstab</code> æ–‡ä»¶ç¤ºä¾‹ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># &lt;æ–‡ä»¶ç³»ç»Ÿ&gt;  &lt;æŒ‚è½½ç‚¹&gt;    &lt;ç±»å‹&gt; &lt;é€‰é¡¹&gt;     &lt;è½¬å‚¨&gt; &lt;è‡ªæ£€&gt;</span></span><br><span class="line">/dev/sda1     /           ext4   defaults    1      1</span><br><span class="line">/dev/sda2     /home       ext4   defaults    1      2</span><br><span class="line">/dev/sdb1     /mnt/backup ntfs   defaults    0      0</span><br><span class="line">UUID=xxxx-xxxx /mnt/data  ext4   defaults    0      2</span><br><span class="line">LABEL=usbdrv  /mnt/usb    vfat   noauto,user 0      0</span><br></pre></td></tr></table></figure><h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><ul><li><code>/dev/sda1</code> æŒ‚è½½åˆ°æ ¹ç›®å½• <code>/</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º <code>ext4</code>ï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼Œè½¬å‚¨é¢‘ç‡ä¸º <code>1</code>ï¼Œè‡ªæ£€é¡ºåºä¸º <code>1</code>ã€‚</li><li><code>/dev/sda2</code> æŒ‚è½½åˆ° <code>/home</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º <code>ext4</code>ï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼Œè½¬å‚¨é¢‘ç‡ä¸º <code>1</code>ï¼Œè‡ªæ£€é¡ºåºä¸º <code>2</code>ã€‚</li><li><code>/dev/sdb1</code> æŒ‚è½½åˆ° <code>/mnt/backup</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º <code>ntfs</code>ï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼Œä¸è¿›è¡Œè½¬å‚¨å’Œè‡ªæ£€ã€‚</li><li>ä½¿ç”¨ <code>UUID=xxxx-xxxx</code> æŒ‡å®šçš„åˆ†åŒºæŒ‚è½½åˆ° <code>/mnt/data</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º <code>ext4</code>ï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼Œä¸è¿›è¡Œè½¬å‚¨ï¼Œè‡ªæ£€é¡ºåºä¸º <code>2</code>ã€‚</li><li>ä½¿ç”¨ <code>LABEL=usbdrv</code> æŒ‡å®šçš„è®¾å¤‡æŒ‚è½½åˆ° <code>/mnt/usb</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º <code>vfat</code>ï¼Œä¸è‡ªåŠ¨æŒ‚è½½ï¼Œå…è®¸ç”¨æˆ·æŒ‚è½½ï¼Œä¸è¿›è¡Œè½¬å‚¨å’Œè‡ªæ£€ã€‚</li></ul><h2 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h2><h3 id="æ­¥éª¤-1ï¼šå¤‡ä»½ç°æœ‰çš„-etc-fstab"><a href="#æ­¥éª¤-1ï¼šå¤‡ä»½ç°æœ‰çš„-etc-fstab" class="headerlink" title="æ­¥éª¤ 1ï¼šå¤‡ä»½ç°æœ‰çš„ /etc/fstab"></a>æ­¥éª¤ 1ï¼šå¤‡ä»½ç°æœ‰çš„ <code>/etc/fstab</code></h3><p>åœ¨ä¿®æ”¹ä¹‹å‰ï¼Œå¤‡ä»½ç°æœ‰çš„ <code>/etc/fstab</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /etc/fstab /etc/fstab.bak</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-2ï¼šç¼–è¾‘-etc-fstab"><a href="#æ­¥éª¤-2ï¼šç¼–è¾‘-etc-fstab" class="headerlink" title="æ­¥éª¤ 2ï¼šç¼–è¾‘ /etc/fstab"></a>æ­¥éª¤ 2ï¼šç¼–è¾‘ <code>/etc/fstab</code></h3><p>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ <code>/etc/fstab</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/fstab</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-3ï¼šæ·»åŠ æ–°çš„æŒ‚è½½æ¡ç›®"><a href="#æ­¥éª¤-3ï¼šæ·»åŠ æ–°çš„æŒ‚è½½æ¡ç›®" class="headerlink" title="æ­¥éª¤ 3ï¼šæ·»åŠ æ–°çš„æŒ‚è½½æ¡ç›®"></a>æ­¥éª¤ 3ï¼šæ·»åŠ æ–°çš„æŒ‚è½½æ¡ç›®</h3><p>æ ¹æ®éœ€è¦æ·»åŠ æ–°çš„æŒ‚è½½æ¡ç›®ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=xxxx-xxxx /mnt/data  ext4   defaults    0      2</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-4ï¼šä¿å­˜å¹¶é€€å‡º"><a href="#æ­¥éª¤-4ï¼šä¿å­˜å¹¶é€€å‡º" class="headerlink" title="æ­¥éª¤ 4ï¼šä¿å­˜å¹¶é€€å‡º"></a>æ­¥éª¤ 4ï¼šä¿å­˜å¹¶é€€å‡º</h3><p>ç¼–è¾‘å®Œæˆåï¼Œä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚å¯¹äº <code>nano</code> ç¼–è¾‘å™¨ï¼ŒæŒ‰ <code>Ctrl+O</code> ä¿å­˜æ–‡ä»¶ï¼Œç„¶åæŒ‰ <code>Ctrl+X</code> é€€å‡ºã€‚</p><h3 id="æ­¥éª¤-5ï¼šéªŒè¯é…ç½®"><a href="#æ­¥éª¤-5ï¼šéªŒè¯é…ç½®" class="headerlink" title="æ­¥éª¤ 5ï¼šéªŒè¯é…ç½®"></a>æ­¥éª¤ 5ï¼šéªŒè¯é…ç½®</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ <code>fstab</code> æ–‡ä»¶çš„é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -a</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰é”™è¯¯ä¿¡æ¯ï¼Œè¯´æ˜é…ç½®æ­£ç¡®ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul><li>ç¡®ä¿æ¯ä¸ªå­—æ®µä¹‹é—´ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦åˆ†éš”ã€‚</li><li>ä½¿ç”¨ <code>UUID</code> æˆ– <code>LABEL</code> å¯ä»¥é¿å…è®¾å¤‡åç§°å˜åŒ–å¸¦æ¥çš„é—®é¢˜ã€‚</li><li>é”™è¯¯çš„ <code>fstab</code> é…ç½®å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ï¼Œä¿®æ”¹å‰åŠ¡å¿…å¤‡ä»½ã€‚</li></ul><h2 id="å¸¸è§æŒ‚è½½é€‰é¡¹"><a href="#å¸¸è§æŒ‚è½½é€‰é¡¹" class="headerlink" title="å¸¸è§æŒ‚è½½é€‰é¡¹"></a>å¸¸è§æŒ‚è½½é€‰é¡¹</h2><ul><li><code>defaults</code>ï¼šä½¿ç”¨é»˜è®¤æŒ‚è½½é€‰é¡¹ <code>rw, suid, dev, exec, auto, nouser, async</code>ã€‚</li><li><code>ro</code>ï¼šåªè¯»æŒ‚è½½ã€‚</li><li><code>rw</code>ï¼šè¯»å†™æŒ‚è½½ã€‚</li><li><code>noauto</code>ï¼šä¸è‡ªåŠ¨æŒ‚è½½ã€‚</li><li><code>user</code>ï¼šå…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½ã€‚</li><li><code>nouser</code>ï¼šåªå…è®¸ root ç”¨æˆ·æŒ‚è½½ã€‚</li><li><code>noexec</code>ï¼šç¦æ­¢æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li></ul><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><code>man fstab</code>ï¼šæŸ¥çœ‹ <code>fstab</code> çš„æ‰‹å†Œé¡µã€‚</li><li><code>man mount</code>ï¼šæŸ¥çœ‹ <code>mount</code> å‘½ä»¤çš„æ‰‹å†Œé¡µã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Iperf/Iperf3 è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•</title>
      <link href="/2024/07/21/iperf_network_test/"/>
      <url>/2024/07/21/iperf_network_test/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Iperf-Iperf3-è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•"><a href="#ä½¿ç”¨-Iperf-Iperf3-è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ Iperf&#x2F;Iperf3 è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•"></a>ä½¿ç”¨ Iperf&#x2F;Iperf3 è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Iperfæˆ–Iperf3å·¥å…·è¿›è¡Œç½‘ç»œæ€§èƒ½æµ‹è¯•ã€‚Iperfæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„ç½‘ç»œæµ‹è¯•å·¥å…·ï¼Œèƒ½å¤Ÿæµ‹é‡ç½‘ç»œçš„å¸¦å®½ã€å»¶è¿Ÿã€æŠ–åŠ¨å’Œæ•°æ®åŒ…ä¸¢å¤±ç­‰å…³é”®æŒ‡æ ‡ã€‚æœ¬æ–‡å°†åŒ…æ‹¬Iperf&#x2F;Iperf3çš„å®‰è£…ã€å‚æ•°ä»‹ç»ã€å®é™…ä½¿ç”¨æ¡ˆä¾‹ä»¥åŠæµ‹è¯•ç»“æœçš„è§£è¯»ã€‚</p><h2 id="2-é€‚ç”¨èŒƒå›´"><a href="#2-é€‚ç”¨èŒƒå›´" class="headerlink" title="2. é€‚ç”¨èŒƒå›´"></a>2. é€‚ç”¨èŒƒå›´</h2><p>é€‚ç”¨äºç½‘ç»œç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜ï¼Œä»–ä»¬éœ€è¦å¯¹å±€åŸŸç½‘(LAN)ã€å¹¿åŸŸç½‘(WAN)æˆ–å…¶ä»–ç½‘ç»œç¯å¢ƒçš„æ€§èƒ½è¿›è¡Œæ·±å…¥è¯„ä¼°ã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ç½‘ç»œç®¡ç†å‘˜</strong>: è´Ÿè´£å®‰è£…å’Œé…ç½®Iperf&#x2F;Iperf3å·¥å…·ï¼Œå¹¶ç¡®ä¿æµ‹è¯•ç¯å¢ƒçš„ç¨³å®šæ€§ã€‚</li><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>: é…ç½®å¹¶ç›‘æ§æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•ã€‚</li><li><strong>å¼€å‘äººå‘˜</strong>: åˆ©ç”¨Iperf&#x2F;Iperf3ç”Ÿæˆçš„ç½‘ç»œæ€§èƒ½æ•°æ®ï¼Œä¼˜åŒ–åº”ç”¨ç¨‹åºçš„ç½‘ç»œä½¿ç”¨æ•ˆç‡ã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>å®‰è£…äº†Iperfæˆ–Iperf3çš„ç³»ç»Ÿï¼ˆåŒ…æ‹¬æµ‹è¯•æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼‰ã€‚</li><li>ç›®æ ‡ç½‘ç»œçš„å®Œå…¨è®¿é—®æƒé™ã€‚</li><li>å…·å¤‡åŸºæœ¬çš„ç½‘ç»œçŸ¥è¯†ï¼Œç†è§£TCP&#x2F;IPåè®®ã€å¸¦å®½ã€å»¶è¿Ÿç­‰æ¦‚å¿µã€‚</li><li>å…·å¤‡é€‚å½“çš„æƒé™è¿›è¡Œç½‘ç»œæµ‹è¯•ï¼Œä»¥é¿å…å½±å“ç”Ÿäº§ç½‘ç»œã€‚</li></ul><h2 id="5-å‚æ•°ä»‹ç»ä¸ä½¿ç”¨ç¤ºä¾‹"><a href="#5-å‚æ•°ä»‹ç»ä¸ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="5. å‚æ•°ä»‹ç»ä¸ä½¿ç”¨ç¤ºä¾‹"></a>5. å‚æ•°ä»‹ç»ä¸ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="5-1-å¸¸ç”¨å‚æ•°è¯¦è§£"><a href="#5-1-å¸¸ç”¨å‚æ•°è¯¦è§£" class="headerlink" title="5.1 å¸¸ç”¨å‚æ•°è¯¦è§£"></a>5.1 å¸¸ç”¨å‚æ•°è¯¦è§£</h3><ul><li><strong><code>-s</code></strong>: å¯åŠ¨Iperfä½œä¸ºæœåŠ¡å™¨æ¨¡å¼ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚è¯¥æ¨¡å¼ä¸‹çš„Iperfä¸ä¼šå‘é€æ•°æ®ï¼Œåªè´Ÿè´£æ¥æ”¶å¹¶æŠ¥å‘Šç»“æœã€‚</li><li><strong><code>-c &lt;æœåŠ¡å™¨IPåœ°å€&gt;</code></strong>: å¯åŠ¨Iperfä½œä¸ºå®¢æˆ·ç«¯ï¼Œè¿æ¥åˆ°æŒ‡å®šçš„æœåŠ¡å™¨IPåœ°å€ã€‚</li><li><strong><code>-u</code></strong>: ä½¿ç”¨UDPåè®®è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœæœªæŒ‡å®šè¯¥é€‰é¡¹ï¼ŒIperfé»˜è®¤ä½¿ç”¨TCPã€‚</li><li><strong><code>-b &lt;å¸¦å®½&gt;</code></strong>: è®¾å®šUDPæµ‹è¯•çš„ç›®æ ‡å¸¦å®½ï¼Œä¾‹å¦‚<code>-b 100M</code>è¡¨ç¤ºç›®æ ‡å¸¦å®½ä¸º100Mbpsã€‚å¯¹äºTCPï¼Œè¯¥å‚æ•°ä¼šé™åˆ¶å‘é€é€Ÿç‡ã€‚</li><li><strong><code>-P &lt;å¹¶å‘æ•°&gt;</code></strong>: æŒ‡å®šåŒæ—¶è¿è¡Œçš„å¹¶å‘æµæ•°ï¼Œé€šå¸¸ç”¨äºæµ‹è¯•å¤šçº¿ç¨‹æˆ–å¤šè¿æ¥çš„ç½‘ç»œæ€§èƒ½ã€‚</li><li><strong><code>-t &lt;æ—¶é—´&gt;</code></strong>: æŒ‡å®šæµ‹è¯•æŒç»­çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤å€¼ä¸º10ç§’ã€‚</li><li><strong><code>-i &lt;é—´éš”æ—¶é—´&gt;</code></strong>: è®¾ç½®æŠ¥å‘Šè¾“å‡ºçš„é—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚ä¾‹å¦‚ï¼Œ<code>-i 1</code>è¡¨ç¤ºæ¯ç§’è¾“å‡ºä¸€æ¬¡ä¸­é—´ç»“æœã€‚</li><li><strong><code>--logfile &lt;æ–‡ä»¶å&gt;</code></strong>: å°†æµ‹è¯•ç»“æœä¿å­˜åˆ°æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œä¾¿äºåç»­åˆ†æã€‚</li><li><strong><code>--json</code></strong>: ä»¥JSONæ ¼å¼è¾“å‡ºæµ‹è¯•ç»“æœï¼Œä¾¿äºé›†æˆåˆ°è‡ªåŠ¨åŒ–å·¥å…·æˆ–åˆ†æç³»ç»Ÿä¸­ã€‚</li></ul><h3 id="5-2-å®‰è£…-Iperf-Iperf3"><a href="#5-2-å®‰è£…-Iperf-Iperf3" class="headerlink" title="5.2 å®‰è£… Iperf&#x2F;Iperf3"></a>5.2 å®‰è£… Iperf&#x2F;Iperf3</h3><ol><li><p><strong>åœ¨Linuxä¸Šå®‰è£…Iperf&#x2F;Iperf3</strong>:</p><ul><li>Iperfå’ŒIperf3å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…ï¼š<ul><li><strong>Iperf</strong>:<ul><li><strong>Debian&#x2F;Ubuntu</strong>: <code>sudo apt-get install iperf</code></li><li><strong>CentOS&#x2F;RHEL</strong>: <code>sudo yum install iperf</code></li></ul></li><li><strong>Iperf3</strong>:<ul><li><strong>Debian&#x2F;Ubuntu</strong>: <code>sudo apt-get install iperf3</code></li><li><strong>CentOS&#x2F;RHEL</strong>: <code>sudo yum install iperf3</code></li></ul></li></ul></li></ul></li><li><p><strong>éªŒè¯å®‰è£…</strong>:</p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š<ul><li><strong>Iperf</strong>: <code>iperf --version</code></li><li><strong>Iperf3</strong>: <code>iperf3 --version</code></li></ul></li></ul></li></ol><h3 id="5-3-åŸºæœ¬å¸¦å®½æµ‹è¯•"><a href="#5-3-åŸºæœ¬å¸¦å®½æµ‹è¯•" class="headerlink" title="5.3 åŸºæœ¬å¸¦å®½æµ‹è¯•"></a>5.3 åŸºæœ¬å¸¦å®½æµ‹è¯•</h3><ol><li><p><strong>ä½¿ç”¨Iperfæµ‹è¯•TCPå¸¦å®½</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹é‡ä¸¤å°è®¾å¤‡ä¹‹é—´çš„æœ€å¤§TCPå¸¦å®½ã€‚</li><li><strong>æ­¥éª¤</strong>:<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -s</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -c &lt;æœåŠ¡å™¨IPåœ°å€&gt;</span><br></pre></td></tr></table></figure></li></ol></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>æµ‹è¯•ç»“æœæ˜¾ç¤ºå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„TCPå¸¦å®½ï¼Œä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[  3]  0.0-10.0 sec  1.12 GBytes  961 Mbits/sec</span><br></pre></td></tr></table></figure></li><li><code>961 Mbits/sec</code> è¡¨ç¤ºåœ¨10ç§’å†…å¹³å‡å¸¦å®½ä¸º961 Mbpsã€‚</li></ul></li></ul></li><li><p><strong>ä½¿ç”¨Iperf3æµ‹è¯•TCPå¸¦å®½</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹é‡ä¸¤å°è®¾å¤‡ä¹‹é—´çš„æœ€å¤§TCPå¸¦å®½ï¼Œç±»ä¼¼äºIperfï¼Œä½†Iperf3æä¾›äº†æ›´å¤šçš„é€‰é¡¹å’Œæ›´è¯¦ç»†çš„æŠ¥å‘Šã€‚</li><li><strong>æ­¥éª¤</strong>:<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;æœåŠ¡å™¨IPåœ°å€&gt;</span><br></pre></td></tr></table></figure></li></ol></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>ç»“æœä¼šæ˜¾ç¤ºæ›´å¤šç»†èŠ‚ï¼ŒåŒ…æ‹¬æ¯ç§’çš„å¸¦å®½ã€é‡ä¼ ç­‰ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ ID] Interval           Transfer     Bandwidth       Retr</span><br><span class="line">[  5]   0.00-10.00  sec  1.11 GBytes  952 Mbits/sec  12   sender</span><br><span class="line">[  5]   0.00-10.00  sec  1.11 GBytes  952 Mbits/sec          receiver</span><br></pre></td></tr></table></figure></li><li><code>952 Mbits/sec</code> è¡¨ç¤ºTCPå¸¦å®½ï¼Œ<code>12 Retr</code> è¡¨ç¤ºå‘ç”Ÿäº†12æ¬¡é‡ä¼ ã€‚</li></ul></li></ul></li></ol><h3 id="5-4-UDPæ€§èƒ½æµ‹è¯•"><a href="#5-4-UDPæ€§èƒ½æµ‹è¯•" class="headerlink" title="5.4 UDPæ€§èƒ½æµ‹è¯•"></a>5.4 UDPæ€§èƒ½æµ‹è¯•</h3><ol><li><p><strong>ä½¿ç”¨Iperfæµ‹è¯•UDPå¸¦å®½å’ŒæŠ–åŠ¨</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹é‡UDPå¸¦å®½ã€æŠ–åŠ¨å’Œä¸¢åŒ…ç‡ï¼Œè¿™å¯¹äºå®æ—¶åº”ç”¨ï¼ˆå¦‚VoIPï¼‰å°¤ä¸ºé‡è¦ã€‚</li><li><strong>æ­¥éª¤</strong>:<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -s -u</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -c &lt;æœåŠ¡å™¨IPåœ°å€&gt; -u -b 100M</span><br></pre></td></tr></table></figure></li></ol><ul><li><code>-b 100M</code> è¡¨ç¤ºå‘é€100Mbpsçš„UDPæµé‡ã€‚</li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>æµ‹è¯•ç»“æœæ˜¾ç¤ºUDPå¸¦å®½ã€æŠ–åŠ¨å’Œä¸¢åŒ…ç‡ï¼Œä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[  3]  0.0-10.0 sec  119 MBytes  100 Mbits/sec  0.025 ms  0/8501 (0%)</span><br></pre></td></tr></table></figure></li><li><code>0.025 ms</code> æ˜¯æŠ–åŠ¨å€¼ï¼Œ<code>0/8501 (0%)</code> è¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿä¸¢åŒ…ã€‚</li></ul></li></ul></li><li><p><strong>ä½¿ç”¨Iperf3æµ‹è¯•UDPæ€§èƒ½</strong></p><ul><li><strong>ç›®çš„</strong>: ç±»ä¼¼äºIperfçš„UDPæµ‹è¯•ï¼Œä½†Iperf3æä¾›äº†æ›´è¯¦ç»†çš„æŠ¥å‘Šå’Œæ§åˆ¶ã€‚</li><li><strong>æ­¥éª¤</strong>:<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;æœåŠ¡å™¨IPåœ°å€&gt; -u -b 50M</span><br></pre></td></tr></table></figure></li></ol><ul><li><code>-b 50M</code> è¡¨ç¤ºå‘é€50Mbpsçš„UDPæµé‡ã€‚</li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>ç»“æœæ˜¾ç¤ºäº†æ›´è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬UDPæµé‡çš„ä¸¢åŒ…ç‡å’ŒæŠ–åŠ¨ï¼Œä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ ID] Interval           Transfer     Bandwidth       Total Datagrams</span><br><span class="line">[  5]   0.00-10.00  sec  59.4 MBytes  49.8 Mbits/sec  7601</span><br><span class="line">[  5] Sent 7601 datagrams</span><br><span class="line">[  5] Server Report:</span><br><span class="line">[ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams</span><br><span class="line">[  5]   0.00-10.00  sec  59.4 MBytes  49.8 Mbits/sec  0.043 ms  1/7601 (0.013%)</span><br></pre></td></tr></table></figure></li><li><code>0.043 ms</code> æ˜¯æŠ–åŠ¨å€¼ï¼Œ<code>1/7601 (0.013%)</code> è¡¨ç¤ºä¸¢å¤±äº†1ä¸ªæ•°æ®åŒ…ï¼Œä¸¢åŒ…ç‡ä¸º0.013%ã€‚</li></ul></li></ul></li></ol><h3 id="5-5-å¹¶å‘æµ‹è¯•"><a href="#5-5-å¹¶å‘æµ‹è¯•" class="headerlink" title="5.5 å¹¶å‘æµ‹è¯•"></a>5.5 å¹¶å‘æµ‹è¯•</h3><ol><li><strong>åŒæ—¶æµ‹è¯•å¤šä¸ªå¹¶å‘æµ</strong><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•å¤šä¸ªå¹¶å‘TCPæˆ–UDPæµå¯¹ç½‘ç»œæ€§èƒ½çš„å½±å“ï¼Œæ¨¡æ‹Ÿå¤šç”¨æˆ·æˆ–å¤šåº”ç”¨ç¨‹åºåŒæ—¶ä½¿ç”¨ç½‘ç»œçš„æƒ…å†µã€‚</li><li><strong>æ­¥éª¤</strong>:<ul><li><strong>TCPå¹¶å‘æµ‹è¯•</strong>ï¼š<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;æœåŠ¡å™¨IPåœ°å€&gt; -P 5</span><br></pre></td></tr></table></figure></li></ol><ul><li><code>-P 5</code> è¡¨ç¤ºåŒæ—¶å¯åŠ¨5ä¸ªå¹¶å‘æµã€‚</li></ul></li><li><strong>UDPå¹¶å‘æµ‹è¯•</strong>ï¼š<ol><li>åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s</span><br></pre></td></tr></table></figure></li><li>åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;æœåŠ¡å™¨IPåœ°å€&gt; -u -b 50M -P 5</span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>æ¯ä¸ªæµçš„å¸¦å®½</li></ul></li></ul></li></ol><p>ã€æŠ–åŠ¨å’Œä¸¢åŒ…ç‡éƒ½ä¼šè¢«å•ç‹¬æŠ¥å‘Šï¼Œåˆ†ææ€»å¸¦å®½å’Œæ¯ä¸ªæµçš„æ€§èƒ½å¯ä»¥å¸®åŠ©ç†è§£ç½‘ç»œåœ¨å¹¶å‘åœºæ™¯ä¸‹çš„è¡¨ç°ã€‚<br>     - ä¾‹å¦‚ï¼š<br>       <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams</span><br><span class="line">[SUM]   0.00-10.00  sec  298 MBytes  250 Mbits/sec  0.090 ms  0/14900 (0%)</span><br></pre></td></tr></table></figure></p><h3 id="5-6-é«˜çº§æµ‹è¯•ç¤ºä¾‹"><a href="#5-6-é«˜çº§æµ‹è¯•ç¤ºä¾‹" class="headerlink" title="5.6 é«˜çº§æµ‹è¯•ç¤ºä¾‹"></a>5.6 é«˜çº§æµ‹è¯•ç¤ºä¾‹</h3><ol><li><p><strong>è·¨å¤šä¸ªå­ç½‘çš„æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: æµ‹è¯•è·¨å¤šä¸ªå­ç½‘çš„ç½‘ç»œæ€§èƒ½ï¼Œè¯„ä¼°è·¯ç”±å™¨æˆ–é˜²ç«å¢™çš„æ€§èƒ½ã€‚</li><li><strong>æ­¥éª¤</strong>:<ul><li>åœ¨ä¸åŒå­ç½‘ä¸­çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åˆ†åˆ«è¿è¡ŒIperf3æˆ–Iperfã€‚</li><li>ä¾‹å¦‚ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;è·¨å­ç½‘çš„æœåŠ¡å™¨IPåœ°å€&gt; -P 5 -t 30</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>é€šè¿‡åˆ†æå»¶è¿Ÿã€å¸¦å®½å’Œä¸¢åŒ…ç‡ï¼Œäº†è§£ç½‘ç»œè®¾å¤‡åœ¨è·¨å­ç½‘ç¯å¢ƒä¸‹çš„è¡¨ç°ã€‚</li></ul></li></ul></li><li><p><strong>é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•</strong></p><ul><li><strong>ç›®çš„</strong>: è¿›è¡Œé•¿æ—¶é—´çš„ç½‘ç»œæ€§èƒ½æµ‹è¯•ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥çš„ç¨³å®šæ€§å’Œé•¿æœŸè¡¨ç°ã€‚</li><li><strong>æ­¥éª¤</strong>:<ul><li>è¿è¡Œé•¿è¾¾æ•°å°æ—¶ç”šè‡³æ•°å¤©çš„Iperf3æµ‹è¯•ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c &lt;æœåŠ¡å™¨IPåœ°å€&gt; -t 3600</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>é•¿æ—¶é—´æµ‹è¯•ç»“æœæœ‰åŠ©äºè¯†åˆ«ç½‘ç»œä¸­çš„é—´æ­‡æ€§é—®é¢˜ï¼Œå¦‚å¶å‘çš„ä¸¢åŒ…æˆ–å¸¦å®½æ³¢åŠ¨ã€‚</li></ul></li></ul></li></ol><h2 id="6-å‚è€ƒæ–‡çŒ®"><a href="#6-å‚è€ƒæ–‡çŒ®" class="headerlink" title="6. å‚è€ƒæ–‡çŒ®"></a>6. å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="https://iperf.fr/">Iperfå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/esnet/iperf">Iperf3 GitHubä»“åº“</a></li><li><a href="https://www.redhat.com/en/topics/virtualization/network-performance">ç½‘ç»œæ€§èƒ½æµ‹è¯•æŒ‡å—</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux Proxy è®¾ç½®</title>
      <link href="/2024/07/21/linux_proxy_config/"/>
      <url>/2024/07/21/linux_proxy_config/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-Proxy-è®¾ç½®"><a href="#Linux-Proxy-è®¾ç½®" class="headerlink" title="Linux Proxy è®¾ç½®"></a>Linux Proxy è®¾ç½®</h1><hr><h2 id="Terminal-å…¨å±€-http-proxy-åªåœ¨å½“å‰Sessionç”Ÿæ•ˆ"><a href="#Terminal-å…¨å±€-http-proxy-åªåœ¨å½“å‰Sessionç”Ÿæ•ˆ" class="headerlink" title="Terminal å…¨å±€ http proxy (åªåœ¨å½“å‰Sessionç”Ÿæ•ˆ)"></a>Terminal å…¨å±€ http proxy (åªåœ¨å½“å‰Sessionç”Ÿæ•ˆ)</h2><h3 id="å¯ç”¨"><a href="#å¯ç”¨" class="headerlink" title="å¯ç”¨"></a>å¯ç”¨</h3>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">&quot;http://&lt;ip address&gt;:&lt;port&gt;&quot;</span></span><br><span class="line"><span class="built_in">export</span> https_proxy=<span class="string">&quot;http://&lt;ip address&gt;:&lt;port&gt;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ç¦ç”¨"><a href="#ç¦ç”¨" class="headerlink" title="ç¦ç”¨"></a>ç¦ç”¨</h3>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> http_proxy</span><br><span class="line"><span class="built_in">unset</span> https_proxy</span><br></pre></td></tr></table></figure><h2 id="Proxychains"><a href="#Proxychains" class="headerlink" title="Proxychains"></a>Proxychains</h2><h3 id="å®‰è£…-é¢„å…ˆæ‰‹åŠ¨é…ç½®Terminal-proxy"><a href="#å®‰è£…-é¢„å…ˆæ‰‹åŠ¨é…ç½®Terminal-proxy" class="headerlink" title="å®‰è£… (é¢„å…ˆæ‰‹åŠ¨é…ç½®Terminal proxy)"></a>å®‰è£… (é¢„å…ˆæ‰‹åŠ¨é…ç½®Terminal proxy)</h3><ol><li><p>Debian</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install proxychains</span><br></pre></td></tr></table></figure></li><li><p>RHEL9</p><p><strong>x86_64</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install https://dl.fedoraproject.org/pub/epel/9/Everything/aarch64/Packages/p/proxychains-ng-4.17-1.el9.x86_64.rpm</span><br></pre></td></tr></table></figure><p><strong>ARM64</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install https://dl.fedoraproject.org/pub/epel/9/Everything/aarch64/Packages/p/proxychains-ng-4.17-1.el9.aarch64.rpm</span><br></pre></td></tr></table></figure></li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ol><li>ç¼–è¾‘ &#x2F;etc&#x2F;proxychains.conf</li><li>æ‰¾åˆ°quiet_modeï¼Œå»æ‰å‰é¢çš„#<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Quiet mode (no output from library)</span><br><span class="line">quiet_mode</span><br></pre></td></tr></table></figure></li><li>æ»šåŠ¨åˆ°æœ€ä¸‹ï¼Œæ³¨é‡ŠåŸæœ‰çš„sock4<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ProxyList]</span><br><span class="line"># add proxy here ...</span><br><span class="line"># meanwile</span><br><span class="line"># defaults set to &quot;tor&quot;</span><br><span class="line">#socks4         127.0.0.1 9050</span><br></pre></td></tr></table></figure></li><li>å¢åŠ è¦ä½¿ç”¨çš„ä»£ç†<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ProxyList]</span><br><span class="line">http         192.168.1.147 58080</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ol><li>åœ¨è¦è¿æ¥ç½‘ç»œçš„å‘½ä»¤æˆ–è€…è„šæœ¬åä¹‹å‰åŠ ä¸Šproxychainså³å¯<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains apt update</span><br><span class="line">proxychains apt install ipmitool</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Red Hat Enterprise Linux 9 YUM æœ¬åœ°æºé…ç½®</title>
      <link href="/2024/07/16/rhel9_yum_repo/"/>
      <url>/2024/07/16/rhel9_yum_repo/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡†å¤‡å®‰è£…ISOå’ŒæŒ‚è½½"><a href="#å‡†å¤‡å®‰è£…ISOå’ŒæŒ‚è½½" class="headerlink" title="å‡†å¤‡å®‰è£…ISOå’ŒæŒ‚è½½"></a>å‡†å¤‡å®‰è£…ISOå’ŒæŒ‚è½½</h1><h2 id="Mount-RHEL9-iso"><a href="#Mount-RHEL9-iso" class="headerlink" title="Mount RHEL9.iso"></a>Mount RHEL9.iso</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount RHEL9.iso /mnt</span><br></pre></td></tr></table></figure><h1 id="åˆ›å»ºrepo"><a href="#åˆ›å»ºrepo" class="headerlink" title="åˆ›å»ºrepo"></a>åˆ›å»ºrepo</h1><h2 id="å¢åŠ ä¸€ä¸ªiso-repoåˆ°-etc-yum-repos-d-ä¿®æ”¹baseurlè·¯å¾„ä¸ºiso-mountçš„æ–‡ä»¶å¤¹"><a href="#å¢åŠ ä¸€ä¸ªiso-repoåˆ°-etc-yum-repos-d-ä¿®æ”¹baseurlè·¯å¾„ä¸ºiso-mountçš„æ–‡ä»¶å¤¹" class="headerlink" title="å¢åŠ ä¸€ä¸ªiso.repoåˆ°&#x2F;etc&#x2F;yum.repos.d, ä¿®æ”¹baseurlè·¯å¾„ä¸ºiso mountçš„æ–‡ä»¶å¤¹."></a>å¢åŠ ä¸€ä¸ªiso.repoåˆ°&#x2F;etc&#x2F;yum.repos.d, ä¿®æ”¹baseurlè·¯å¾„ä¸ºiso mountçš„æ–‡ä»¶å¤¹.</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/yum.repos.d/iso.repo</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[BaseOS]</span><br><span class="line">name=BaseOS Packages Red Hat Enterprise Linux 9</span><br><span class="line">metadata_expire=-1</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">baseurl=file:///mnt/BaseOS/</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[AppStream]</span><br><span class="line">name=AppStream Packages Red Hat Enterprise Linux 9</span><br><span class="line">metadata_expire=-1</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">baseurl=file:///mnt/AppStream/</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release</span><br></pre></td></tr></table></figure><h1 id="YUM-æ›´æ–°å’Œå®‰è£…"><a href="#YUM-æ›´æ–°å’Œå®‰è£…" class="headerlink" title="YUM æ›´æ–°å’Œå®‰è£…"></a>YUM æ›´æ–°å’Œå®‰è£…</h1><h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ipmitool</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> RHEL </tag>
            
            <tag> YUM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ ARM å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å’Œè¿è¡Œ Mlucas å¹¶è¿›è¡Œ FFTs æµ‹è¯•</title>
      <link href="/2024/07/03/ARM_FFTs_test/"/>
      <url>/2024/07/03/ARM_FFTs_test/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-ARM-å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å’Œè¿è¡Œ-Mlucas-å¹¶è¿›è¡Œ-FFTs-æµ‹è¯•"><a href="#åœ¨-ARM-å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å’Œè¿è¡Œ-Mlucas-å¹¶è¿›è¡Œ-FFTs-æµ‹è¯•" class="headerlink" title="åœ¨ ARM å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å’Œè¿è¡Œ Mlucas å¹¶è¿›è¡Œ FFTs æµ‹è¯•"></a>åœ¨ ARM å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å’Œè¿è¡Œ Mlucas å¹¶è¿›è¡Œ FFTs æµ‹è¯•</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p>Mlucas æ˜¯ä¸€ä¸ªç”¨ C ç¼–å†™çš„å¼€æºè½¯ä»¶ï¼Œä¸“é—¨ç”¨äºå¤šå¹³å°æ¶æ„çš„é«˜æ€§èƒ½æ¢…æ£®æ•°ç´ æ€§æµ‹è¯•ã€‚åœ¨ ARM å¹³å°ä¸Šï¼Œç”±äº prime95&#x2F;mprime ä»…æ”¯æŒ x86 æ¶æ„ï¼ŒMlucas æˆä¸ºç†æƒ³çš„æ›¿ä»£æ–¹æ¡ˆã€‚è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨ ARM å¹³å°ä¸Šå®‰è£…ã€ç¼–è¯‘å¹¶è¿è¡Œ Mlucasï¼ŒåŒ…æ‹¬å¯¹å„ç±»å‚æ•°çš„æ·±å…¥ä»‹ç»ä¸ç¤ºä¾‹ï¼Œå¹¶ç»“åˆç¡¬ä»¶èµ„æºä¼˜åŒ–è¿›è¡Œäº†è¯¦ç»†çš„é…ç½®æ­¥éª¤ã€‚</p><h2 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h2><p>é€‚ç”¨äºå¸Œæœ›åœ¨ ARM å¹³å°ä¸Šæ‰§è¡Œ FFTs æµ‹è¯•å¹¶ä¼˜åŒ–ç¡¬ä»¶æ€§èƒ½çš„æŠ€æœ¯äººå‘˜ã€‚æœ¬æ–‡ä¸»è¦é’ˆå¯¹è¿è¡Œ Debian ç³»ç»Ÿçš„ ARM64 è®¾å¤‡ï¼Œä½†åŒæ ·é€‚ç”¨äºå…¶ä»– Linux å‘è¡Œç‰ˆï¼Œæ­¥éª¤å¯èƒ½ç•¥æœ‰ä¸åŒã€‚</p><h2 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ ARM å¹³å°ä¸Šæ‰€éœ€çš„è½¯ä»¶å’Œåº“å‡å·²æ­£ç¡®å®‰è£…ï¼Œå…·å¤‡ç³»ç»Ÿç®¡ç†æƒé™ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šä¸¥æ ¼æŒ‰ç…§æœ¬ SOP è¿›è¡Œ Mlucas çš„å®‰è£…ã€ç¼–è¯‘ã€è°ƒä¼˜å’Œè¿è¡Œã€‚</li></ul><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h2><ul><li>ARM64 æ¶æ„çš„è®¾å¤‡ï¼Œè¿è¡Œ Linux æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Debian æˆ– RHEL9ï¼‰ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥ä»¥ä¸‹è½½å¿…è¦çš„è½¯ä»¶åŒ…å’Œæºç ã€‚</li></ul><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h2><h3 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h3><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…</strong></p><ul><li><p><strong>Debian</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential libgmp-dev libhwloc-dev git clang</span><br></pre></td></tr></table></figure></li><li><p><strong>RHEL9</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf group install <span class="string">&quot;Development Tools&quot;</span></span><br><span class="line">sudo dnf install gmp-devel hwloc-devel clang git</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-ä¸‹è½½å’Œå‡†å¤‡-Mlucas"><a href="#2-ä¸‹è½½å’Œå‡†å¤‡-Mlucas" class="headerlink" title="2. ä¸‹è½½å’Œå‡†å¤‡ Mlucas"></a>2. <strong>ä¸‹è½½å’Œå‡†å¤‡ Mlucas</strong></h3><p>2.1 <strong>ä» GitHub å…‹éš† Mlucas æºç </strong></p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…‹éš† Mlucas é¡¹ç›®åˆ°æœ¬åœ°ç›®å½•ã€‚ä¹Ÿå¯ä»¥ä» <a href="https://github.com/primesearch/Mlucas/releases">Release é¡µé¢</a> ä¸‹è½½æºç åŒ…ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/primesearch/Mlucas.git</span><br></pre></td></tr></table></figure></li></ul><p>2.2 <strong>è¿›å…¥ Mlucas é¡¹ç›®ç›®å½•</strong><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Mlucas</span><br></pre></td></tr></table></figure></p><h3 id="3-ç¼–è¯‘-Mlucas"><a href="#3-ç¼–è¯‘-Mlucas" class="headerlink" title="3. ç¼–è¯‘ Mlucas"></a>3. <strong>ç¼–è¯‘ Mlucas</strong></h3><p>3.1 <strong>è®¾ç½®ç¼–è¯‘å™¨</strong></p><ul><li>å°†ç¼–è¯‘å™¨è®¾ç½®ä¸º <code>clang</code> ä»¥ä¼˜åŒ–ç¼–è¯‘è¿‡ç¨‹ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CC=clang</span><br></pre></td></tr></table></figure></li></ul><p>3.2 <strong>ä½¿ç”¨ makemake.sh è„šæœ¬ç¼–è¯‘ Mlucas</strong></p><ul><li>æ‰§è¡Œ <code>makemake.sh</code> è„šæœ¬ï¼Œç¡®ä¿å¯ç”¨ <code>hwloc</code> æ”¯æŒï¼Œä»¥ä¼˜åŒ– CPU ç»‘å®šå’Œå†…å­˜è®¿é—®æ€§èƒ½ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash makemake.sh use_hwloc</span><br></pre></td></tr></table></figure></li></ul><p>3.3 <strong>ç¡®è®¤ç¼–è¯‘æˆåŠŸ</strong></p><ul><li>ç¼–è¯‘å®Œæˆåï¼Œç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å°†ä½äº <code>obj</code> ç›®å½•ä¸­ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> obj</span><br></pre></td></tr></table></figure></li><li>ç”Ÿæˆçš„æ–‡ä»¶åå¯èƒ½ä¼šå› ç¼–è¯‘é€‰é¡¹çš„ä¸åŒè€Œå˜åŒ–ï¼Œå¦‚ <code>Mlucas</code>.</li></ul><h3 id="4-æ€§èƒ½è°ƒä¼˜ï¼šä¸ºæ‚¨çš„æœºå™¨è¿›è¡Œä¼˜åŒ–"><a href="#4-æ€§èƒ½è°ƒä¼˜ï¼šä¸ºæ‚¨çš„æœºå™¨è¿›è¡Œä¼˜åŒ–" class="headerlink" title="4. æ€§èƒ½è°ƒä¼˜ï¼šä¸ºæ‚¨çš„æœºå™¨è¿›è¡Œä¼˜åŒ–"></a>4. <strong>æ€§èƒ½è°ƒä¼˜ï¼šä¸ºæ‚¨çš„æœºå™¨è¿›è¡Œä¼˜åŒ–</strong></h3><p><strong>STEP 2 âˆ’ PERFORMANCE-TUNE FOR YOUR MACHINE</strong></p><p>åœ¨ Mlucas ç¼–è¯‘å®Œæˆåï¼Œé‡è¦çš„æ˜¯å¯¹è½¯ä»¶è¿›è¡Œè°ƒä¼˜ï¼Œä»¥ä¾¿å……åˆ†åˆ©ç”¨æ‚¨çš„ç¡¬ä»¶èµ„æºã€‚è¿™ä¸€æ­¥éª¤æ¶‰åŠè¿è¡Œä¸€ç³»åˆ—æµ‹è¯•ï¼Œä»¥ç¡®å®šé€‚åˆæ‚¨æœºå™¨çš„æœ€ä½³ FFT é•¿åº¦å’Œ CPU ç»‘å®šé…ç½®ã€‚</p><p>4.1 <strong>è¿è¡Œè‡ªæ£€</strong></p><ul><li><p>è‡ªæ£€æµ‹è¯•å°†è¯„ä¼°æ‚¨çš„ç¡¬ä»¶æ€§èƒ½ï¼Œå¹¶ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå¸®åŠ©ç¡®å®šé€‚åˆçš„ FFT é•¿åº¦å’Œå…¶ä»–å‚æ•°ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Mlucas -s</span><br></pre></td></tr></table></figure></li><li><p>è¯¥å‘½ä»¤å°†æµ‹è¯•å¤šä¸ª FFT é•¿åº¦å’Œ CPU é…ç½®ï¼Œä»¥ç¡®å®šæœ€ä½³é…ç½®ã€‚æµ‹è¯•ç»“æœå°†å­˜å‚¨åœ¨ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p></li></ul><p>4.2 <strong>åˆ†æè‡ªæ£€ç»“æœ</strong></p><ul><li><p>è‡ªæ£€å®Œæˆåï¼Œæ‰“å¼€å¹¶åˆ†æç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ <code>mlucas.cfg</code> æˆ–å…¶ä»–è¾“å‡ºæ–‡ä»¶ï¼‰ï¼ŒæŸ¥çœ‹ä¸åŒ FFT é•¿åº¦ä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> mlucas.cfg</span><br></pre></td></tr></table></figure></li><li><p>è¯¥æ–‡ä»¶ä¼šåˆ—å‡ºæ¯ä¸ª FFT é•¿åº¦çš„å¹³å‡è¿­ä»£æ—¶é—´ã€‚è¾ƒçŸ­çš„æ—¶é—´æ„å‘³ç€æ›´ä¼˜çš„æ€§èƒ½ã€‚é€‰æ‹©é‚£äº›å…·æœ‰æœ€çŸ­è¿­ä»£æ—¶é—´çš„ FFT é•¿åº¦å’Œé…ç½®ã€‚</p></li></ul><p>4.3 <strong>é…ç½® Mlucas</strong></p><ul><li>æ ¹æ®è‡ªæ£€ç»“æœï¼Œæ‰‹åŠ¨ç¼–è¾‘ <code>mlucas.cfg</code> æ–‡ä»¶ï¼Œä»¥ä½¿ç”¨æœ€ä½³é…ç½®è¿›è¡Œå®é™…æµ‹è¯•ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®åˆé€‚çš„ FFT é•¿åº¦å’Œ CPU ç»‘å®šã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano mlucas.cfg</span><br></pre></td></tr></table></figure></li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæœ€ä½³ FFT é•¿åº¦å’Œ CPU æ ¸å¿ƒåˆ†é…ï¼Œå¦‚ï¼š   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FFTlength=2048K</span><br><span class="line">CPU=0-7</span><br></pre></td></tr></table></figure></li></ul><p>4.4 <strong>å†æ¬¡æµ‹è¯•å¹¶éªŒè¯</strong></p><ul><li>ä½¿ç”¨ä¼˜åŒ–åçš„é…ç½®é‡æ–°è¿è¡Œ Mlucasï¼Œå¹¶é€šè¿‡æ—¥å¿—æ–‡ä»¶éªŒè¯æ€§èƒ½æ˜¯å¦æœ‰æ‰€æå‡ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Mlucas -s m -logfile optimized_test.log</span><br></pre></td></tr></table></figure></li><li>å®æ—¶æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä»¥ç¡®è®¤æµ‹è¯•æ­£åœ¨æŒ‰é¢„æœŸçš„é…ç½®è¿›è¡Œï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f optimized_test.log</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-Mlucas-å‚æ•°è®¾ç½®ä¸æ‰§è¡Œ-FFTs-æµ‹è¯•"><a href="#5-Mlucas-å‚æ•°è®¾ç½®ä¸æ‰§è¡Œ-FFTs-æµ‹è¯•" class="headerlink" title="5. Mlucas å‚æ•°è®¾ç½®ä¸æ‰§è¡Œ FFTs æµ‹è¯•"></a>5. <strong>Mlucas å‚æ•°è®¾ç½®ä¸æ‰§è¡Œ FFTs æµ‹è¯•</strong></h3><p>5.1 <strong>è·å–ç³»ç»Ÿçš„ CPU ä¿¡æ¯</strong></p><ul><li>åœ¨æ‰§è¡Œæµ‹è¯•ä¹‹å‰ï¼Œè·å–å¹¶äº†è§£æµ‹è¯•æœºå™¨çš„ CPU é…ç½®æƒ…å†µã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lscpu</span><br></pre></td></tr></table></figure></li><li>ä¾‹å¦‚ï¼Œè¾“å‡ºç»“æœå¯èƒ½ä¸ºï¼š   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CPU(s):              32</span><br><span class="line">Thread(s) per core:  1</span><br><span class="line">NUMA node0 CPU(s):   0-15</span><br><span class="line">NUMA node1 CPU(s):   16-31</span><br></pre></td></tr></table></figure></li></ul><p>5.2 <strong>Mlucas å¸¸ç”¨å‚æ•°ä»‹ç»</strong></p><ul><li><code>-s</code>ï¼šæŒ‡å®šè‡ªæ£€æˆ–ç‰¹å®šç´ æ€§æµ‹è¯•æ¨¡å¼ã€‚å¸¸è§å€¼åŒ…æ‹¬ï¼š<ul><li><code>-s</code>ï¼šè‡ªæ£€æ¨¡å¼ï¼Œæµ‹è¯•ç³»ç»Ÿæ€§èƒ½å¹¶ç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚</li><li><code>-s m</code>ï¼šå¯åŠ¨æ¢…æ£®æ•°çš„å¿«é€Ÿæµ‹è¯•ã€‚</li><li><code>-s q</code>ï¼šå¯åŠ¨å¿«é€Ÿç´ æ•°æµ‹è¯•ï¼ˆä¾‹å¦‚ Fermat æµ‹è¯•ï¼‰ã€‚</li></ul></li><li><code>-cpu</code>ï¼šæŒ‡å®šä½¿ç”¨çš„ CPU æ ¸å¿ƒèŒƒå›´ã€‚æ ¼å¼ä¸º <code>-cpu start:end</code>ï¼Œä¾‹å¦‚ <code>-cpu 0:15</code> è¡¨ç¤ºä½¿ç”¨ CPU 0 åˆ° 15 å·æ ¸å¿ƒã€‚</li><li><code>-fftlen</code>ï¼šè®¾ç½® FFT é•¿åº¦ã€‚FFT é•¿åº¦å†³å®šäº†å¯å¤„ç†çš„æœ€å¤§æ•°å­—å¤§å°ã€‚å¸¸è§å€¼ä¸º 1024K, 2048K, 4096K ç­‰ã€‚</li><li><code>-iters</code>ï¼šè®¾ç½®æ¯ä¸ªæµ‹è¯•çš„è¿­ä»£æ¬¡æ•°ã€‚æ›´é«˜çš„è¿­ä»£æ¬¡æ•°å¯æä¾›æ›´ç²¾ç¡®çš„ç»“æœï¼Œä½†éœ€è¦æ›´å¤šæ—¶é—´ã€‚</li><li><code>-logfile</code>ï¼šæŒ‡å®šæ—¥å¿—æ–‡ä»¶è·¯å¾„ã€‚é»˜è®¤å€¼ä¸º <code>mlucas.log</code>ã€‚</li></ul><p>5.3 <strong>FFT æµ‹è¯•çš„å‚æ•°ç¤ºä¾‹</strong></p><ul><li>è‡ªæ£€æ¨¡å¼ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Mlucas -s</span><br></pre></td></tr></table></figure></li><li>è¿è¡Œ FFTs æµ‹è¯•å¹¶æŒ‡å®š CPU æ ¸å¿ƒèŒƒå›´ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Mlucas -s m -cpu 0:3 -fftlen 2048K -iters 10000 -logfile fft_test.log</span><br></pre></td></tr></table></figure></li><li>å¯¹ä¸åŒæ ¸å¿ƒç»„è¿è¡Œ FFTs æµ‹è¯•ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./Mlucas -s m -cpu 0:3</span><br><span class="line">./Mlucas -s m -cpu 4:7</span><br><span class="line">./Mlucas -s m -cpu 8:11</span><br><span class="line">./Mlucas -s m -cpu 12:15</span><br><span class="line">./Mlucas -s m -cpu 16:19</span><br><span class="line">./Mlucas -s m -cpu 20:23</span><br><span class="line">./Mlucas -s m -cpu 24:27</span><br><span class="line">./Mlucas -s m -cpu 28:31</span><br></pre></td></tr></table></figure></li></ul><p>5.4 <strong>ç›‘æ§æµ‹è¯•è¿›åº¦</strong></p><ul><li>Mlucas è¿è¡Œè¿‡ç¨‹ä¸­ä¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®æ—¶æŸ¥çœ‹æ—¥å¿—ä»¥ç›‘æ§æµ‹è¯•è¿›åº¦å’Œæ€§èƒ½è¡¨ç°ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f mlucas.log</span><br></pre></td></tr></table></figure></li></ul><p>5.5 <strong>å¸¸è§ä¼˜åŒ–å»ºè®®</strong></p><ul><li><strong>è°ƒæ•´ FFT é•¿åº¦</strong>ï¼šæ ¹æ®ç¡¬ä»¶é…ç½®å’Œæµ‹è¯•ç›®æ ‡ï¼Œé€‰æ‹©é€‚åˆçš„ FFT é•¿åº¦ã€‚è¾ƒå¤§çš„ FFT é•¿åº¦é€šå¸¸é€‚ç”¨äºå¤„ç†æ›´å¤§çš„æ•°å­—ï¼Œä½†å¯èƒ½ä¼šå¢åŠ è®¡ç®—æ—¶é—´ã€‚</li><li><strong>æ ¸å¿ƒç»‘å®š</strong>ï¼šé€šè¿‡ <code>-cpu</code> å‚æ•°ç»‘å®šç‰¹å®šæ ¸å¿ƒç»„ï¼Œä»¥é¿å…ä¸åŒè¿›ç¨‹äº‰å¤ºç›¸åŒçš„ CPU èµ„æºï¼Œä»è€Œæå‡æ€§èƒ½ã€‚</li></ul><h3 id="6-ä¼˜åŒ–ä¸ç»´æŠ¤"><a href="#6-ä¼˜åŒ–ä¸ç»´æŠ¤" class="headerlink" title="6. ä¼˜åŒ–ä¸ç»´æŠ¤"></a>6. <strong>ä¼˜åŒ–ä¸ç»´æŠ¤</strong></h3><p>6.1 <strong>ä¼˜åŒ– CPU ç»‘å®š</strong></p><ul><li>æ ¹æ®æµ‹è¯•éœ€æ±‚å’Œç³»ç»Ÿèµ„æºï¼Œè°ƒæ•´ <code>-cpu</code> å‚æ•°ä¸­çš„æ ¸å¿ƒèŒƒå›´ï¼Œä»¥è¿›ä¸€æ­¥ä¼˜åŒ–è®¡ç®—æ€§èƒ½ã€‚</li></ul><p>6.2 <strong>å®šæœŸæ›´æ–°</strong></p><ul><li>é€šè¿‡å®šæœŸä» GitHub ä»“åº“è·å–æœ€æ–°çš„æºç ï¼Œå¹¶é‡æ–°ç¼–è¯‘ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆçš„ Mlucas å¹¶è·å¾—æœ€æ–°çš„æ€§èƒ½ä¼˜åŒ–ã€‚</li></ul><h3 id="7-è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬"><a href="#7-è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬" class="headerlink" title="7. è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬"></a>7. <strong>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</strong></h3><p>7.1 <strong>ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</strong></p><ul><li>ä»¥ä¸‹æ˜¯ Bash è„šæœ¬<code>run_mlucas.sh</code>çš„è¯¦ç»†è¯´æ˜ï¼Œç”¨äºè‡ªåŠ¨åŒ– Mlucas çš„æµ‹è¯•è¿‡ç¨‹ã€‚è¯¥è„šæœ¬æ”¯æŒä¸¤ç§ FFT æ¨¡å¼ (<code>small</code> å’Œ <code>large</code>)ï¼Œæ ¹æ® CPU æ ¸å¿ƒæ•°é‡è‡ªåŠ¨åˆ†é…æ ¸å¿ƒç»„ï¼Œå¹¶å¹¶è¡Œè¿è¡Œå¤šä¸ª Mlucas å®ä¾‹ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ FFT æ¨¡å¼å’Œå…¶ä»–å…³é”®å‚æ•°</span></span><br><span class="line">fft_mode=<span class="string">&quot;small&quot;</span>  <span class="comment"># é»˜è®¤æ¨¡å¼ä¸º smallï¼Œå¯ä»¥é€šè¿‡ä¼ å…¥å‚æ•°ä¿®æ”¹</span></span><br><span class="line">fft_mode=<span class="variable">$1</span>  <span class="comment"># æ¥æ”¶ä¼ å…¥çš„ FFT æ¨¡å¼å‚æ•°</span></span><br><span class="line">mlucas_dir=<span class="string">&quot;/Mlucas&quot;</span>  <span class="comment"># å®šä¹‰ Mlucas ç›®å½•è·¯å¾„</span></span><br><span class="line">s_mode=<span class="string">&quot;l&quot;</span></span><br><span class="line">duration=60  <span class="comment"># å®šä¹‰æµ‹è¯•æŒç»­æ—¶é—´</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$mlucas_dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰é…ç½®æ–‡ä»¶å’Œæ ¸å¿ƒåˆ†é…ç­–ç•¥</span></span><br><span class="line">small_cfg_file=<span class="string">&quot;mlucas_small.cfg&quot;</span></span><br><span class="line">large_cfg_file=<span class="string">&quot;mlucas_large.cfg&quot;</span></span><br><span class="line">cores_per_group=2  <span class="comment"># æ¯ç»„åˆ†é…çš„æ ¸å¿ƒæ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ—§çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">rm</span> mlucas.cfg -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å¹¶åˆå§‹åŒ– small FFT é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="string">&quot;<span class="variable">$small_cfg_file</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Basic testing - small FFTs...&quot;</span></span><br><span class="line">    ./obj_asimd/Mlucas -s small -cpu 0:$((cores_per_group-<span class="number">1</span>)) &gt;&amp; small_test.log</span><br><span class="line">    <span class="built_in">mv</span> mlucas.cfg mlucas_small.cfg</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Initialized mlucas_small.cfg.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å¹¶åˆå§‹åŒ– large FFT é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="string">&quot;<span class="variable">$large_cfg_file</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Basic testing - large FFTs, this will take a long time...&quot;</span></span><br><span class="line">    ./obj_asimd/Mlucas -s large -cpu 0:$((cores_per_group-<span class="number">1</span>)) &gt;&amp; large_test.log</span><br><span class="line">    <span class="built_in">mv</span> mlucas.cfg mlucas_large.cfg</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Initialized mlucas_large.cfg.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½å­˜åœ¨ï¼Œæå–ç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$small_cfg_file</span>&quot;</span> ] &amp;&amp; [ -f <span class="string">&quot;<span class="variable">$large_cfg_file</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$small_cfg_file</span> and <span class="variable">$large_cfg_file</span> are existed.&quot;</span></span><br><span class="line">    small_fft=$(<span class="built_in">tail</span> -n 1 mlucas_small.cfg | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    small_fft_radix=$(<span class="built_in">tail</span> -n 1 mlucas_small.cfg | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $11&#125;&#x27;</span>)</span><br><span class="line">    small_fft_time=$(<span class="built_in">tail</span> -n 1 mlucas_small.cfg | awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    large_fft=$(<span class="built_in">tail</span> -n 1 mlucas_large.cfg | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    large_fft_radix=$(<span class="built_in">tail</span> -n 1 mlucas_large.cfg | awk -F <span class="string">&quot; &quot;</span> <span class="string">&#x27;&#123;print $11&#125;&#x27;</span>)</span><br><span class="line">    large_fft_time=$(<span class="built_in">tail</span> -n 1 mlucas_large.cfg | awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    small_fft_iter=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$small_fft_time</span> 1000 <span class="variable">$duration</span>&quot;</span> | awk <span class="string">&#x27;&#123;printf &quot;%.0f\n&quot;, $3 / ($1 / $2)/ 2&#125;&#x27;</span>)</span><br><span class="line">    large_fft_iter=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$large_fft_time</span> 1000 <span class="variable">$duration</span>&quot;</span> | awk <span class="string">&#x27;&#123;printf &quot;%.0f\n&quot;, $3 / ($1 / $2)/ 2&#125;&#x27;</span>)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®æ¨¡å¼è®¾ç½®é“¾æ¥å’Œå‚æ•°</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$fft_mode</span>&quot;</span> = <span class="string">&quot;large&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    instance_count=1</span><br><span class="line">    <span class="built_in">ln</span> -s mlucas_large.cfg mlucas.cfg</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    instance_count=2</span><br><span class="line">    <span class="built_in">ln</span> -s mlucas_small.cfg mlucas.cfg</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®æ¨¡å¼é€‰æ‹© FFT é…ç½®</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$fft_mode</span>&quot;</span> = <span class="string">&quot;large&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    fft=<span class="variable">$large_fft</span></span><br><span class="line">    fft_radix=<span class="variable">$large_fft_radix</span></span><br><span class="line">    iter=<span class="variable">$large_fft_iter</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    fft=<span class="variable">$small_fft</span></span><br><span class="line">    fft_radix=<span class="variable">$small_fft_radix</span></span><br><span class="line">    iter=<span class="variable">$small_fft_iter</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> fft: <span class="variable">$fft</span> fft_radix: <span class="variable">$fft_radix</span> iter: <span class="variable">$iter</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿è¡Œç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Creating env...&quot;</span></span><br><span class="line"><span class="built_in">rm</span> <span class="variable">$mlucas_dir</span>/runset -rf</span><br><span class="line"><span class="built_in">rm</span> <span class="variable">$mlucas_dir</span>/jobs.sh -f</span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$mlucas_dir</span>/runset</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#!/bin/bash&quot;</span> &gt;&gt; jobs.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– CPU æ ¸å¿ƒæ•°é‡</span></span><br><span class="line">cores=$(<span class="built_in">cat</span> /proc/cpuinfo | grep processor | <span class="built_in">wc</span> -l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ€»å…±éœ€è¦å¤šå°‘ç»„</span></span><br><span class="line">num_groups=$((cores / cores_per_group))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯è¾“å‡ºæ¯ç»„çš„æ ¸å¿ƒèŒƒå›´å¹¶ç”Ÿæˆä»»åŠ¡è„šæœ¬</span></span><br><span class="line"><span class="keyword">for</span> ((i = <span class="number">0</span>; i &lt; num_groups; i++)); <span class="keyword">do</span></span><br><span class="line">    start=$((i * cores_per_group))</span><br><span class="line">    end=$((start + cores_per_group - <span class="number">1</span>))</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Group <span class="variable">$i</span>: <span class="variable">$start</span>:<span class="variable">$end</span>&quot;</span></span><br><span class="line">    <span class="built_in">mkdir</span> <span class="variable">$mlucas_dir</span>/runset/run<span class="variable">$i</span></span><br><span class="line">    <span class="keyword">for</span> ((j = <span class="number">0</span>; j &lt; instance_count; j++)); <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;cd <span class="variable">$mlucas_dir</span>/runset/run<span class="variable">$i</span> &amp;&amp; nohup ../../obj_asimd/Mlucas -fft <span class="variable">$fft</span> -iters <span class="variable">$iter</span> -maxalloc 50 -cpu <span class="variable">$start</span>:<span class="variable">$end</span> -radset 1 &gt;&gt; <span class="variable">$mlucas_dir</span>/runset/run<span class="variable">$i</span>/test<span class="variable">$j</span>.log 2&gt;&amp;1 &amp;&quot;</span> &gt;&gt; jobs.sh</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç”Ÿæˆçš„ä»»åŠ¡è„šæœ¬</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Running jobs.sh...&quot;</span></span><br><span class="line">bash jobs.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;jobs.sh running in background.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&#x27;pkill -x Mlucas&#x27; to end testing.&quot;</span></span><br></pre></td></tr></table></figure><p>7.2 <strong>è„šæœ¬è¿è¡Œè¯´æ˜</strong></p><ul><li>è¯¥è„šæœ¬åœ¨å¯åŠ¨æ—¶ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°é€‰æ‹© FFT æ¨¡å¼ï¼ˆsmall æˆ– largeï¼‰ï¼Œå¹¶è‡ªåŠ¨åˆå§‹åŒ–ç›¸åº”çš„é…ç½®æ–‡ä»¶ã€‚</li><li>è„šæœ¬è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸­çš„ CPU æ ¸å¿ƒæ•°é‡ï¼Œå¹¶å°†æ ¸å¿ƒåˆ’åˆ†ä¸ºå¤šä¸ªç»„ï¼Œæ¯ç»„è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª Mlucas å®ä¾‹ã€‚</li><li>ç”Ÿæˆçš„ä»»åŠ¡è„šæœ¬ <code>jobs.sh</code> ä¼šåœ¨åå°å¯åŠ¨æ‰€æœ‰çš„ Mlucas å®ä¾‹ï¼Œå¹¶è®°å½•æµ‹è¯•æ—¥å¿—ã€‚</li></ul><p>7.3 <strong>æ‰§è¡Œè„šæœ¬</strong></p><ul><li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œè„šæœ¬ï¼Œä¼ å…¥æ‰€éœ€çš„ FFT æ¨¡å¼ï¼ˆå¦‚ <code>small</code> æˆ– <code>large</code>ï¼‰ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash run_mlucas.sh small</span><br></pre></td></tr></table></figure></li></ul><p>7.4 <strong>ç›‘æ§æ—¥å¿—</strong></p><ul><li>è„šæœ¬å°†æµ‹è¯•æ—¥å¿—è®°å½•åœ¨æ¯ä¸ªæ ¸å¿ƒç»„çš„ <code>test.log</code> æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®æ—¶ç›‘æ§æ—¥å¿—ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f /Mlucas/runset/run0/test0.<span class="built_in">log</span></span><br></pre></td></tr></table></figure></li></ul><p>7.5 <strong>åœæ­¢æµ‹è¯•</strong></p><ul><li>å¦‚æœéœ€è¦ç»ˆæ­¢æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»ˆæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ Mlucas å®ä¾‹ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -x Mlucas</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h2><ul><li><a href="https://www.mersenneforum.org/mayer/README.html">Mlucas README</a></li><li><a href="https://github.com/primesearch/Mlucas">Mlucas GitHub Repository</a></li><li><a href="https://www.arm.com/resources/developer/guide">ARM64 Linux Compilation Guides</a></li><li><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners">Bash Scripting Basics</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Memtester è¿›è¡Œå†…å­˜æµ‹è¯•</title>
      <link href="/2024/07/03/memtester_test/"/>
      <url>/2024/07/03/memtester_test/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Memtester-è¿›è¡Œå†…å­˜æµ‹è¯•"><a href="#ä½¿ç”¨-Memtester-è¿›è¡Œå†…å­˜æµ‹è¯•" class="headerlink" title="ä½¿ç”¨ Memtester è¿›è¡Œå†…å­˜æµ‹è¯•"></a>ä½¿ç”¨ Memtester è¿›è¡Œå†…å­˜æµ‹è¯•</h1><hr><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Memtester å·¥å…·è¿›è¡Œå†…å­˜çš„ç¨³å®šæ€§å’Œå¥åº·æ£€æŸ¥ã€‚Memtester æ˜¯ä¸€ä¸ªå†…å­˜æµ‹è¯•å·¥å…·ï¼Œå®ƒé€šè¿‡å¯¹å†…å­˜æ‰§è¡Œå„ç§è¯»å†™æ“ä½œæ¥æ£€æµ‹å¯èƒ½å­˜åœ¨çš„å†…å­˜é”™è¯¯ã€‚å®ƒå¯ä»¥åœ¨æ“ä½œç³»ç»Ÿè¿è¡Œæ—¶å¯¹å†…å­˜è¿›è¡Œæµ‹è¯•ï¼Œæ˜¯è¯Šæ–­å†…å­˜æ•…éšœçš„æœ‰æ•ˆå·¥å…·ã€‚</p><h2 id="2-é€‚ç”¨èŒƒå›´"><a href="#2-é€‚ç”¨èŒƒå›´" class="headerlink" title="2. é€‚ç”¨èŒƒå›´"></a>2. é€‚ç”¨èŒƒå›´</h2><p>é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜ã€ç¡¬ä»¶æŠ€æœ¯äººå‘˜å’Œå…¶ä»–éœ€è¦æ£€æµ‹å’Œè¯Šæ–­å†…å­˜é—®é¢˜çš„ç”¨æˆ·ï¼Œå°¤å…¶æ˜¯åœ¨Linuxå’Œç±»Unixæ“ä½œç³»ç»Ÿç¯å¢ƒä¸­ã€‚</p><h2 id="3-èŒè´£"><a href="#3-èŒè´£" class="headerlink" title="3. èŒè´£"></a>3. èŒè´£</h2><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>: è´Ÿè´£å®‰è£…å’Œè¿è¡Œ Memtester å·¥å…·ï¼Œå¹¶æ ¹æ®æµ‹è¯•ç»“æœé‡‡å–å¿…è¦çš„ç»´æŠ¤æˆ–æ›´æ¢æ“ä½œã€‚</li><li><strong>ç¡¬ä»¶æŠ€æœ¯äººå‘˜</strong>: è¯„ä¼°å†…å­˜çš„ç‰©ç†å¥åº·çŠ¶å†µï¼Œå°¤å…¶æ˜¯åœ¨å‘ç”Ÿç³»ç»Ÿå´©æºƒæˆ–ä¸ç¨³å®šæ€§æ—¶ã€‚</li><li><strong>å¼€å‘äººå‘˜</strong>: åœ¨å¼€å‘é«˜è´Ÿè½½åº”ç”¨ç¨‹åºæ—¶ï¼Œåˆ©ç”¨ Memtester æµ‹è¯•å†…å­˜çš„ç¨³å®šæ€§ã€‚</li></ul><h2 id="4-è¦æ±‚"><a href="#4-è¦æ±‚" class="headerlink" title="4. è¦æ±‚"></a>4. è¦æ±‚</h2><ul><li>å…·æœ‰ root æˆ– sudo æƒé™çš„ç³»ç»Ÿè´¦æˆ·ã€‚</li><li>ç³»ç»Ÿå†…å­˜çš„è¶³å¤Ÿå¯ç”¨ç©ºé—´ä»¥è¿›è¡Œæµ‹è¯•ï¼ˆé€šå¸¸å»ºè®®è‡³å°‘æœ‰ä¸€åŠä»¥ä¸Šçš„ç©ºé—²å†…å­˜ï¼‰ã€‚</li><li>ç³»ç»Ÿå¯¹ Memtester å·¥å…·çš„æ”¯æŒå’Œå®‰è£…ï¼ˆé€šå¸¸åœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å™¨ä¸­å¯ç”¨ï¼‰ã€‚</li></ul><h2 id="5-æµç¨‹å’Œç¤ºä¾‹"><a href="#5-æµç¨‹å’Œç¤ºä¾‹" class="headerlink" title="5. æµç¨‹å’Œç¤ºä¾‹"></a>5. æµç¨‹å’Œç¤ºä¾‹</h2><h3 id="5-1-å®‰è£…-Memtester"><a href="#5-1-å®‰è£…-Memtester" class="headerlink" title="5.1 å®‰è£… Memtester"></a>5.1 å®‰è£… Memtester</h3><ol><li><strong>åœ¨Linuxä¸Šå®‰è£…Memtester</strong>:<ul><li>Memtester å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…ï¼š<ul><li><strong>Debian&#x2F;Ubuntu</strong>: <code>sudo apt-get install memtester</code></li><li><strong>CentOS&#x2F;RHEL</strong>: <code>sudo yum install memtester</code></li><li><strong>Fedora</strong>: <code>sudo dnf install memtester</code></li></ul></li><li>ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘source code:<ul><li>To build: download, unpack, and type <code>make</code>. Thatâ€™s all.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://pyropus.ca./software/memtester/old-versions/memtester-4.6.0.tar.gz</span><br><span class="line">tar zxvf memtester-4.6.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> memtester-4.6.0</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><strong>éªŒè¯å®‰è£…</strong>:<ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">memtester --version</span><br></pre></td></tr></table></figure></li><li>å¦‚æœæˆåŠŸå®‰è£…ï¼ŒMemtester ä¼šè¿”å›ç‰ˆæœ¬å·ä¿¡æ¯ã€‚</li></ul></li></ol><h3 id="5-2-åŸºæœ¬å†…å­˜æµ‹è¯•"><a href="#5-2-åŸºæœ¬å†…å­˜æµ‹è¯•" class="headerlink" title="5.2 åŸºæœ¬å†…å­˜æµ‹è¯•"></a>5.2 åŸºæœ¬å†…å­˜æµ‹è¯•</h3><ol><li><strong>è¿è¡ŒMemtester</strong>:<ul><li><strong>ç›®çš„</strong>: æµ‹è¯•æŒ‡å®šå¤§å°çš„å†…å­˜å—ä»¥æ£€æµ‹æ½œåœ¨çš„å†…å­˜é”™è¯¯ã€‚</li><li><strong>æ­¥éª¤</strong>:<ol><li>ä»¥ root æˆ–å…·æœ‰ sudo æƒé™çš„ç”¨æˆ·è¿è¡Œ Memtesterï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo memtester &lt;æµ‹è¯•å†…å­˜å¤§å°&gt; &lt;æµ‹è¯•æ¬¡æ•°&gt;</span><br></pre></td></tr></table></figure></li></ol><ul><li>ä¾‹å¦‚ï¼Œè¦æµ‹è¯• 1 GB çš„å†…å­˜å¹¶è¿è¡Œ 5 æ¬¡æµ‹è¯•å¾ªç¯ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo memtester 1G 5</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>Memtester ä¼šæ˜¾ç¤ºå†…å­˜æµ‹è¯•çš„è¯¦ç»†è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ¯æ¬¡æµ‹è¯•çš„ç»“æœå’Œé€šè¿‡æˆ–å¤±è´¥çš„æ ‡å¿—ã€‚</li><li>è¾“å‡ºç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">memtester version 4.3.0 (64-bit)</span><br><span class="line">Copyright (C) 2004 Charles Cazabon.</span><br><span class="line">Licensed under the GNU General Public License version 2 (only).</span><br><span class="line"></span><br><span class="line">pagesize is 4096</span><br><span class="line">pagesizemask is 0xfffffffffffff000</span><br><span class="line">want 1024MB (1073741824 bytes)</span><br><span class="line">got  1024MB (1073741824 bytes), trying mlock ...locked.</span><br><span class="line">Loop 1/5:</span><br><span class="line">Stuck Address       : ok</span><br><span class="line">Random Value        : ok</span><br><span class="line">Compare XOR         : ok</span><br><span class="line">Compare SUB         : ok</span><br><span class="line">Compare MUL         : ok</span><br><span class="line">Compare DIV         : ok</span><br><span class="line">Compare OR          : ok</span><br><span class="line">Compare AND         : ok</span><br><span class="line">Sequential Increment: ok</span><br><span class="line">Solid Bits          : ok</span><br><span class="line">Block Sequential    : ok</span><br><span class="line">Checkerboard        : ok</span><br><span class="line">Bit Spread          : ok</span><br><span class="line">Bit Flip            : ok</span><br><span class="line">Walking Ones        : ok</span><br><span class="line">Walking Zeroes      : ok</span><br><span class="line">8-bit Writes        : ok</span><br><span class="line">16-bit Writes       : ok</span><br></pre></td></tr></table></figure></li><li><code>ok</code> è¡¨ç¤ºè¯¥æµ‹è¯•é¡¹é€šè¿‡ã€‚å¦‚æœæœ‰ä»»ä½•æµ‹è¯•æœªé€šè¿‡ï¼ŒMemtester ä¼šåœ¨è¾“å‡ºä¸­æ ‡è®°é”™è¯¯ã€‚</li></ul></li></ul></li></ol><h3 id="5-3-é«˜çº§å†…å­˜æµ‹è¯•"><a href="#5-3-é«˜çº§å†…å­˜æµ‹è¯•" class="headerlink" title="5.3 é«˜çº§å†…å­˜æµ‹è¯•"></a>5.3 é«˜çº§å†…å­˜æµ‹è¯•</h3><ol><li><p><strong>æµ‹è¯•æ‰€æœ‰å¯ç”¨å†…å­˜</strong>:</p><ul><li><strong>ç›®çš„</strong>: åœ¨ä¸æŒ‡å®šå†…å­˜å¤§å°çš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•ç³»ç»Ÿä¸­æ‰€æœ‰å¯ç”¨çš„ç©ºé—²å†…å­˜ã€‚</li><li><strong>æ­¥éª¤</strong>:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo memtester $(free -m | grep -oP <span class="string">&#x27;\\d+&#x27;</span> | <span class="built_in">head</span> -n 1)M 1</span><br></pre></td></tr></table></figure></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ç³»ç»Ÿçš„æ‰€æœ‰å¯ç”¨å†…å­˜è¿›è¡Œæµ‹è¯•ã€‚</li><li>å¦‚æœåœ¨æµ‹è¯•æœŸé—´æ£€æµ‹åˆ°é”™è¯¯ï¼ŒMemtester ä¼šæŠ¥å‘Šå¹¶å»ºè®®è¿›ä¸€æ­¥çš„ç‰©ç†æ£€æŸ¥æˆ–æ›´æ¢å†…å­˜æ¨¡å—ã€‚</li></ul></li></ul></li><li><p><strong>è¿ç»­è¿è¡Œå†…å­˜æµ‹è¯•ä»¥æ£€æµ‹é—´æ­‡æ€§é”™è¯¯</strong>:</p><ul><li><strong>ç›®çš„</strong>: é•¿æ—¶é—´è¿ç»­è¿è¡Œå†…å­˜æµ‹è¯•ä»¥æ•è·é—´æ­‡æ€§æˆ–å¶å‘çš„å†…å­˜é”™è¯¯ã€‚</li><li><strong>æ­¥éª¤</strong>:<ul><li>ä½¿ç”¨è¾ƒå¤§å†…å­˜å—å’Œæ›´å¤šçš„æµ‹è¯•å¾ªç¯ï¼Œä¾‹å¦‚ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo memtester 2G 50</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>é€šè¿‡è¿ç»­çš„æµ‹è¯•å¾ªç¯ï¼ŒMemtester èƒ½å¤Ÿæ£€æµ‹åˆ°ç”±äºçƒ­èƒ€å†·ç¼©æˆ–ç”µæ°”å¹²æ‰°å¯¼è‡´çš„é—´æ­‡æ€§é”™è¯¯ã€‚</li><li>å¦‚æœå‘ç°ä»»ä½•é”™è¯¯ï¼Œå»ºè®®æ£€æŸ¥ç‰©ç†å†…å­˜æ¨¡å—ï¼Œå¹¶è€ƒè™‘åœ¨ä¸åŒçš„æ’æ§½ä¸­è¿›è¡Œæµ‹è¯•ã€‚</li></ul></li></ul></li></ol><h3 id="5-4-å¤šä»»åŠ¡ç¯å¢ƒä¸­çš„å†…å­˜æµ‹è¯•"><a href="#5-4-å¤šä»»åŠ¡ç¯å¢ƒä¸­çš„å†…å­˜æµ‹è¯•" class="headerlink" title="5.4 å¤šä»»åŠ¡ç¯å¢ƒä¸­çš„å†…å­˜æµ‹è¯•"></a>5.4 å¤šä»»åŠ¡ç¯å¢ƒä¸­çš„å†…å­˜æµ‹è¯•</h3><ol><li><strong>åœ¨å¤šä»»åŠ¡ç³»ç»Ÿä¸­è¿è¡ŒMemtester</strong>:<ul><li><strong>ç›®çš„</strong>: åœ¨å¤šä»»åŠ¡è´Ÿè½½ä¸‹æµ‹è¯•å†…å­˜çš„ç¨³å®šæ€§ã€‚</li><li><strong>æ­¥éª¤</strong>:<ul><li>åœ¨è¿›è¡Œå†…å­˜æµ‹è¯•æ—¶ï¼Œå¯ä»¥è®©ç³»ç»Ÿç»§ç»­è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo memtester 512M 10 &amp;</span><br><span class="line">stress --cpu 4 --<span class="built_in">timeout</span> 600</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>ç»“æœåˆ†æ</strong>:<ul><li>Memtester ä¸å…¶ä»–é«˜è´Ÿè½½ä»»åŠ¡ï¼ˆå¦‚ CPU å‹åŠ›æµ‹è¯•ï¼‰åŒæ—¶è¿è¡Œï¼Œå¯ä»¥æœ‰æ•ˆæ£€æµ‹å†…å­˜æ¨¡å—åœ¨é«˜å‹åŠ›ä¸‹çš„å¯é æ€§ã€‚</li><li>å¦‚æœ Memtester æŠ¥å‘Šé”™è¯¯æˆ–ç³»ç»Ÿå´©æºƒï¼Œè¡¨æ˜å¯èƒ½å­˜åœ¨å†…å­˜ä¸ç¨³å®šçš„æƒ…å†µã€‚</li></ul></li></ul></li></ol><h2 id="6-å‚è€ƒæ–‡çŒ®"><a href="#6-å‚è€ƒæ–‡çŒ®" class="headerlink" title="6. å‚è€ƒæ–‡çŒ®"></a>6. å‚è€ƒæ–‡çŒ®</h2><ul><li><a href="https://pyropus.ca/software/memtester/">Memtester å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.memtest86.com/troubleshooting.htm">å†…å­˜æµ‹è¯•ä¸è¯Šæ–­æŒ‡å—</a></li><li><a href="https://www.redhat.com/en/topics/linux/hardware-diagnostics">ç³»ç»Ÿç¡¬ä»¶è¯Šæ–­æœ€ä½³å®è·µ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Memtester </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stressapptest æµ‹è¯•</title>
      <link href="/2024/07/03/stressapptest_test/"/>
      <url>/2024/07/03/stressapptest_test/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨-ARM-å¹³å°ä¸Šä½¿ç”¨-Stressapptest-è¿›è¡Œå‹åŠ›æµ‹è¯•"><a href="#åœ¨-ARM-å¹³å°ä¸Šä½¿ç”¨-Stressapptest-è¿›è¡Œå‹åŠ›æµ‹è¯•" class="headerlink" title="åœ¨ ARM å¹³å°ä¸Šä½¿ç”¨ Stressapptest è¿›è¡Œå‹åŠ›æµ‹è¯•"></a>åœ¨ ARM å¹³å°ä¸Šä½¿ç”¨ Stressapptest è¿›è¡Œå‹åŠ›æµ‹è¯•</h1><hr><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h4><p>Stressapptest æ˜¯ä¸€æ¬¾ä¸“é—¨ç”¨äºå†…å­˜å’Œ I&#x2F;O å­ç³»ç»Ÿå‹åŠ›æµ‹è¯•çš„å·¥å…·ã€‚å®ƒé€šè¿‡åœ¨ç³»ç»Ÿä¸Šæ–½åŠ é«˜è´Ÿè·æ¥å‘ç°ç¡¬ä»¶é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å†…å­˜å’Œç¼“å­˜æ–¹é¢çš„æ½œåœ¨æ•…éšœã€‚<br>è¯¦ç»†ä»‹ç»äº†åœ¨ ARM å¹³å°ä¸Šå®‰è£…ã€é…ç½®å¹¶è¿è¡Œ Stressapptest è¿›è¡Œç³»ç»Ÿç¨³å®šæ€§å’Œæ€§èƒ½æµ‹è¯•çš„è¿‡ç¨‹ã€‚</p><h4 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a><strong>èŒƒå›´</strong></h4><p>é€‚ç”¨äºå¸Œæœ›åœ¨å¹³å°ä¸ŠéªŒè¯ç¡¬ä»¶ç¨³å®šæ€§å’Œæ€§èƒ½çš„æŠ€æœ¯äººå‘˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å†…å­˜å’Œ I&#x2F;O æ–¹é¢çš„æµ‹è¯•ã€‚</p><h4 id="èŒè´£"><a href="#èŒè´£" class="headerlink" title="èŒè´£"></a><strong>èŒè´£</strong></h4><ul><li><strong>ç³»ç»Ÿç®¡ç†å‘˜</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…ï¼Œå¹¶å…·å¤‡æ‰§è¡Œæµ‹è¯•æ‰€éœ€çš„æƒé™ã€‚</li><li><strong>æ“ä½œå‘˜</strong>ï¼šæŒ‰ç…§æœ¬ SOP æ­£ç¡®æ‰§è¡Œ Stressapptestï¼Œç¡®ä¿æµ‹è¯•é¡ºåˆ©è¿›è¡Œã€‚</li></ul><h4 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a><strong>è¦æ±‚</strong></h4><ul><li>è¿è¡Œ Linux æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Debian æˆ– RHEL9ï¼‰ã€‚</li><li>åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†ã€‚</li><li>å…·å¤‡ sudo æˆ– root æƒé™ã€‚</li><li>æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥ä»¥ä¸‹è½½å¿…è¦çš„è½¯ä»¶åŒ…å’Œå·¥å…·ã€‚</li></ul><h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a><strong>è¿‡ç¨‹</strong></h4><h5 id="1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"><a href="#1-ç³»ç»Ÿç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç³»ç»Ÿç¯å¢ƒå‡†å¤‡"></a>1. <strong>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</strong></h5><p>1.1 <strong>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨</strong></p><ul><li>åœ¨è¿›è¡Œè½¯ä»¶å®‰è£…å‰ï¼Œå…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></li></ul><p>1.2 <strong>å®‰è£… Stressapptest</strong></p><ul><li><p><strong>åœ¨ Debian&#x2F;Ubuntu ç³»ç»Ÿä¸Šä½¿ç”¨ <code>apt</code> å®‰è£… Stressapptestï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install stressapptest</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ RHEL&#x2F;CentOS ç³»ç»Ÿä¸Šä½¿ç”¨ <code>yum</code> å®‰è£… Stressapptestï¼š</strong></p><ul><li>é¦–å…ˆï¼Œå¯ç”¨ EPEL ä»“åº“ï¼ˆå¦‚æœå°šæœªå¯ç”¨ï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li>ç„¶åå®‰è£… Stressapptestï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install stressapptest</span><br></pre></td></tr></table></figure></li></ul></li></ul><h5 id="2-æ‰‹åŠ¨ä¸‹è½½å¹¶ç¼–è¯‘-Stressapptest"><a href="#2-æ‰‹åŠ¨ä¸‹è½½å¹¶ç¼–è¯‘-Stressapptest" class="headerlink" title="2. æ‰‹åŠ¨ä¸‹è½½å¹¶ç¼–è¯‘ Stressapptest"></a>2. <strong>æ‰‹åŠ¨ä¸‹è½½å¹¶ç¼–è¯‘ Stressapptest</strong></h5><blockquote><p>æ³¨æ„ï¼šå¦‚æœé€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£… Stressapptest ä¸å¯è¡Œæˆ–éœ€è¦æœ€æ–°ç‰ˆï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨ç¼–è¯‘å®‰è£…ã€‚</p></blockquote><p>2.1 <strong>ä» GitHub å…‹éš† Stressapptest æºç </strong></p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä» GitHub å…‹éš† Stressapptest é¡¹ç›®åˆ°æœ¬åœ°ç›®å½•ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/stressapptest/stressapptest.git</span><br></pre></td></tr></table></figure></li></ul><p>2.2 <strong>è¿›å…¥é¡¹ç›®ç›®å½•</strong><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> stressapptest</span><br></pre></td></tr></table></figure></p><p>2.3 <strong>ç¼–è¯‘ Stressapptest</strong></p><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ Stressapptestã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br></pre></td></tr></table></figure></li></ul><p>2.4 <strong>å®‰è£… Stressapptest</strong></p><ul><li>ç¼–è¯‘å®Œæˆåï¼Œå¯ä»¥é€‰æ‹©å°†å…¶å®‰è£…åˆ°ç³»ç»Ÿä¸­ï¼Œä¾¿äºå…¨å±€ä½¿ç”¨ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure></li></ul><h5 id="3-é…ç½®ä¸è¿è¡Œ-Stressapptest"><a href="#3-é…ç½®ä¸è¿è¡Œ-Stressapptest" class="headerlink" title="3. é…ç½®ä¸è¿è¡Œ Stressapptest"></a>3. <strong>é…ç½®ä¸è¿è¡Œ Stressapptest</strong></h5><p>3.1 <strong>è¿è¡ŒåŸºæœ¬æµ‹è¯•</strong></p><ul><li>åœ¨é»˜è®¤é…ç½®ä¸‹è¿è¡Œ Stressapptestã€‚æ­¤å‘½ä»¤å°†åœ¨é»˜è®¤è®¾ç½®ä¸‹è¿è¡Œä¸€ä¸ª 20 åˆ†é’Ÿçš„å‹åŠ›æµ‹è¯•ï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stressapptest -s 1200 -M 1024 -W</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>-s 1200</code>ï¼šæŒ‡å®šæµ‹è¯•æ—¶é•¿ä¸º 1200 ç§’ï¼ˆå³ 20 åˆ†é’Ÿï¼‰ã€‚</li><li><code>-M 1024</code>ï¼šä½¿ç”¨ 1024 MB å†…å­˜è¿›è¡Œæµ‹è¯•ã€‚</li><li><code>-W</code>ï¼šä½¿æµ‹è¯•è¿‡ç¨‹çš„ I&#x2F;O æ“ä½œæ›´å…·æŒ‘æˆ˜æ€§ã€‚</li></ul></li></ul><p>3.2 <strong>æµ‹è¯•æ‰€æœ‰å¯ç”¨å†…å­˜</strong></p><ul><li>ä¸ºäº†æµ‹è¯•ç³»ç»Ÿçš„æ‰€æœ‰å¯ç”¨å†…å­˜ï¼Œä½¿ç”¨ <code>-m</code> é€‰é¡¹æŒ‡å®šæµ‹è¯•å†…å­˜çš„ç™¾åˆ†æ¯”ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stressapptest -s 1800 -m 90</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>-m 90</code>ï¼šä½¿ç”¨ 90% çš„ç³»ç»Ÿå†…å­˜è¿›è¡Œæµ‹è¯•ã€‚</li><li><code>-s 1800</code>ï¼šæµ‹è¯•æ—¶é•¿ä¸º 1800 ç§’ï¼ˆå³ 30 åˆ†é’Ÿï¼‰ã€‚</li></ul></li></ul><p>3.3 <strong>å¹¶è¡Œè¿è¡Œå¤šä¸ªæµ‹è¯•å®ä¾‹</strong></p><ul><li>åœ¨å¤šæ ¸ç³»ç»Ÿä¸Šï¼Œå¯ä»¥å¹¶è¡Œè¿è¡Œå¤šä¸ªæµ‹è¯•å®ä¾‹ï¼Œä»¥åŠ å¤§æµ‹è¯•è´Ÿè·ã€‚   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stressapptest -s 3600 -M 512 -m 80 -C 16</span><br></pre></td></tr></table></figure></li><li>è§£é‡Šï¼š<ul><li><code>-C 16</code>ï¼šä½¿ç”¨ 16 ä¸ª CPU æ ¸å¿ƒè¿›è¡Œæµ‹è¯•ã€‚</li><li><code>-M 512</code>ï¼šæ¯ä¸ªæµ‹è¯•å®ä¾‹ä½¿ç”¨ 512 MB å†…å­˜ã€‚</li></ul></li></ul><h5 id="4-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"><a href="#4-ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ" class="headerlink" title="4. ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ"></a>4. <strong>ç›‘æ§ä¸åˆ†ææµ‹è¯•ç»“æœ</strong></h5><p>4.1 <strong>ç›‘æ§æµ‹è¯•è¿›åº¦</strong></p><ul><li>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹è¾“å‡ºï¼Œäº†è§£æµ‹è¯•è¿›åº¦å’Œå½“å‰çš„ç³»ç»ŸçŠ¶æ€ã€‚</li></ul><p>4.2 <strong>åˆ†ææµ‹è¯•ç»“æœ</strong></p><ul><li>æµ‹è¯•å®Œæˆåï¼ŒStressapptest å°†ç”Ÿæˆä¸€ä»½æµ‹è¯•æŠ¥å‘Šï¼Œæ˜¾ç¤ºä»»ä½•æ£€æµ‹åˆ°çš„å†…å­˜é”™è¯¯æˆ– I&#x2F;O é”™è¯¯ã€‚æ£€æŸ¥è¾“å‡ºä¸­çš„é”™è¯¯æŠ¥å‘Šï¼Œä»¥ç¡®å®šæ˜¯å¦å­˜åœ¨ç¡¬ä»¶é—®é¢˜ã€‚</li></ul><p>4.3 <strong>ä¿å­˜æµ‹è¯•æ—¥å¿—</strong></p><ul><li>å¯ä»¥å°†æµ‹è¯•æ—¥å¿—ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åç»­åˆ†æï¼š   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stressapptest -s 3600 -M 1024 -W &gt; stressapptest_log.txt</span><br></pre></td></tr></table></figure></li></ul><h5 id="5-ä¼˜åŒ–ä¸ç»´æŠ¤"><a href="#5-ä¼˜åŒ–ä¸ç»´æŠ¤" class="headerlink" title="5. ä¼˜åŒ–ä¸ç»´æŠ¤"></a>5. <strong>ä¼˜åŒ–ä¸ç»´æŠ¤</strong></h5><p>5.1 <strong>å®šæœŸæµ‹è¯•</strong></p><ul><li>å»ºè®®å®šæœŸè¿è¡Œ Stressapptestï¼Œç‰¹åˆ«æ˜¯åœ¨ç³»ç»Ÿè¿›è¡Œé‡å¤§å˜æ›´ï¼ˆå¦‚ç¡¬ä»¶å‡çº§æˆ–ç³»ç»Ÿæ›´æ–°ï¼‰ä¹‹åï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æŒç»­ç¨³å®šæ€§ã€‚</li></ul><p>5.2 <strong>è°ƒæ•´å‚æ•°</strong></p><ul><li>æ ¹æ®æµ‹è¯•ç»“æœï¼Œè°ƒæ•´ Stressapptest çš„å‚æ•°ï¼Œä»¥ä¾¿æ›´å¥½åœ°æ£€æµ‹ç³»ç»Ÿæ½œåœ¨é—®é¢˜ã€‚</li></ul><h5 id="6-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"><a href="#6-å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤" class="headerlink" title="6. å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤"></a>6. <strong>å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤</strong></h5><p>6.1 <strong>æµ‹è¯•å¤±è´¥æˆ–ç³»ç»Ÿå´©æºƒ</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ç³»ç»Ÿå´©æºƒæˆ–æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä»¥ç¡®å®šæ•…éšœåŸå› ã€‚å¯èƒ½éœ€è¦é™ä½æµ‹è¯•è´Ÿè·ï¼Œæˆ–æ’æŸ¥ç¡¬ä»¶é—®é¢˜ã€‚</li></ul><p>6.2 <strong>å†…å­˜ä¸è¶³</strong></p><ul><li>å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°å†…å­˜ä¸è¶³çš„é”™è¯¯ï¼Œè€ƒè™‘å‡å°‘åˆ†é…ç»™æµ‹è¯•çš„å†…å­˜é‡ï¼Œæˆ–å¢åŠ ç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ã€‚</li></ul><h4 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a><strong>å‚è€ƒæ–‡çŒ®</strong></h4><ul><li><a href="https://github.com/stressapptest/stressapptest">Stressapptest GitHub Repository</a></li><li><a href="https://linux.die.net/man/1/stressapptest">Linux Performance Tools</a></li><li><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners">Bash Scripting Basics</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Tool </tag>
            
            <tag> æµ‹è¯• </tag>
            
            <tag> Stressapptest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux åŸºæœ¬å‘½ä»¤æ“ä½œ</title>
      <link href="/2024/07/02/linux_common_commands/"/>
      <url>/2024/07/02/linux_common_commands/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-åŸºæœ¬å‘½ä»¤æ“ä½œ"><a href="#Linux-åŸºæœ¬å‘½ä»¤æ“ä½œ" class="headerlink" title="Linux åŸºæœ¬å‘½ä»¤æ“ä½œ"></a>Linux åŸºæœ¬å‘½ä»¤æ“ä½œ</h1><hr><h2 id="æ–‡ä»¶å’Œç›®å½•æ“ä½œ"><a href="#æ–‡ä»¶å’Œç›®å½•æ“ä½œ" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•æ“ä½œ"></a>æ–‡ä»¶å’Œç›®å½•æ“ä½œ</h2><ol><li><p><strong>åˆ—å‡ºç›®å½•å†…å®¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file1.txt  file2.txt  directory1  directory2</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> directory1</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(æ— è¾“å‡ºï¼Œä»…åˆ‡æ¢ç›®å½•)</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/user/directory1</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºæ–°ç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> new_directory</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(æ— è¾“å‡ºï¼Œä»…åˆ›å»ºç›®å½•)</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> file1.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(æ— è¾“å‡ºï¼Œä»…åˆ é™¤æ–‡ä»¶)</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œç¼–è¾‘"><a href="#æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œç¼–è¾‘" class="headerlink" title="æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œç¼–è¾‘"></a>æ–‡ä»¶å†…å®¹æŸ¥çœ‹å’Œç¼–è¾‘</h2><ol><li><p><strong>æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> file2.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is the content of file2.txt.</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more file2.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is the content of file2.txt.</span><br><span class="line">--More-- (æŒ‰ç©ºæ ¼é”®ç¿»é¡µ)</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–è¾‘æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano file2.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(è¿›å…¥ nano ç¼–è¾‘ç•Œé¢)</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ–‡ä»¶æƒé™å’Œæ‰€æœ‰æƒ"><a href="#æ–‡ä»¶æƒé™å’Œæ‰€æœ‰æƒ" class="headerlink" title="æ–‡ä»¶æƒé™å’Œæ‰€æœ‰æƒ"></a>æ–‡ä»¶æƒé™å’Œæ‰€æœ‰æƒ</h2><ol><li><p><strong>æ›´æ”¹æ–‡ä»¶æƒé™</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 file2.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(æ— è¾“å‡ºï¼Œä»…æ›´æ”¹æƒé™)</span><br></pre></td></tr></table></figure></li><li><p><strong>æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> newuser file2.txt</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(æ— è¾“å‡ºï¼Œä»…æ›´æ”¹æ‰€æœ‰è€…)</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç³»ç»Ÿç®¡ç†"><a href="#ç³»ç»Ÿç®¡ç†" class="headerlink" title="ç³»ç»Ÿç®¡ç†"></a>ç³»ç»Ÿç®¡ç†</h2><ol><li><p><strong>æ˜¾ç¤ºå½“å‰è¿è¡Œçš„è¿›ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> PID TTY          TIME CMD</span><br><span class="line">1056 pts/0    00:00:00 bash</span><br><span class="line">1082 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure></li><li><p><strong>å®æ—¶æ˜¾ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top - 10:45:14 up 2 days,  4:22,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks: 118 total,   1 running, 117 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  2048576 total,   192652 free,  1298964 used,   556960 buff/cache</span><br><span class="line">KiB Swap:  1048572 total,  1048572 free,        0 used.   652632 avail Mem </span><br></pre></td></tr></table></figure></li><li><p><strong>æ¸…é™¤journalctlç³»ç»Ÿæ—¥å¿—</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl --flush --rotate --vacuum-time=1s</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda1        20G  9.3G  9.1G  51% /</span><br><span class="line">tmpfs           996M  1.2M  995M   1% /run</span><br></pre></td></tr></table></figure></li><li><p><strong>å…³æœºæˆ–é‡å¯ç³»ç»Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -h now</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ç³»ç»Ÿä¼šæ˜¾ç¤ºå…³æœºé€šçŸ¥å¹¶åœ¨å‡ ç§’é’Ÿåå…³æœº)</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç½‘ç»œç›¸å…³"><a href="#ç½‘ç»œç›¸å…³" class="headerlink" title="ç½‘ç»œç›¸å…³"></a>ç½‘ç»œç›¸å…³</h2><ol><li><p><strong>æ£€æµ‹ç½‘ç»œè¿æ¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping google.com</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PING google.com (172.217.164.110) 56(84) bytes of data.</span><br><span class="line">64 bytes from lga25s61-in-f14.1e100.net (172.217.164.110): icmp_seq=1 ttl=54 time=10.8 ms</span><br></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½® terminal proxy</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">&quot;http://192.168.50.1:58080&quot;</span></span><br><span class="line"><span class="built_in">export</span> https_proxy=<span class="string">&quot;http://192.168.50.1:58080&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ proxychains proxy</strong></p><p>A. å®‰è£… proxychains</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install proxychains</span><br></pre></td></tr></table></figure><p>B. ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/proxychains.conf</span><br><span class="line"><span class="comment"># Quiet mode (no output from library)</span></span><br><span class="line">quiet_mode</span><br><span class="line"></span><br><span class="line">[ProxyList]</span><br><span class="line"><span class="comment"># add proxy here ...</span></span><br><span class="line"><span class="comment"># meanwile</span></span><br><span class="line"><span class="comment"># defaults set to &quot;tor&quot;</span></span><br><span class="line"><span class="comment">#socks4         127.0.0.1 9050</span></span><br><span class="line">http    192.168.50.1    58080</span><br></pre></td></tr></table></figure><p>C. ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains apt update</span><br></pre></td></tr></table></figure></li></ol><h2 id="è½¯ä»¶å®‰è£…ç›¸å…³"><a href="#è½¯ä»¶å®‰è£…ç›¸å…³" class="headerlink" title="è½¯ä»¶å®‰è£…ç›¸å…³"></a>è½¯ä»¶å®‰è£…ç›¸å…³</h2><ol><li><p><strong>apt å®‰è£…è½¯ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install stress</span><br></pre></td></tr></table></figure></li><li><p><strong>apt å¸è½½è½¯ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt remove stress</span><br></pre></td></tr></table></figure></li><li><p><strong>apt æœç´¢è½¯ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt search stress</span><br></pre></td></tr></table></figure></li><li><p><strong>dpkg æŸ¥çœ‹å·²å®‰è£…è½¯ä»¶ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–è¯‘å®‰è£…</strong></p><p>A. å®‰è£…ç¼–è¯‘ç»„ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y build-essential</span><br></pre></td></tr></table></figure><p>B. ä¸‹è½½å¹¶è§£å‹ source code</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://jaist.dl.sourceforge.net/project/smartmontools/smartmontools/7.4/smartmontools-7.4.tar.gz</span><br><span class="line">tar xvf smartmontools-7.4.tar.gz</span><br></pre></td></tr></table></figure><p>C. ç¼–è¯‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> smartmontools-7.4/</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>D. æ£€æŸ¥æ˜¯å¦æˆåŠŸç¼–è¯‘å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smartctl -v</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è™šæ‹Ÿæœºè¿ç§»æŒ‡å—</title>
      <link href="/2024/06/30/VM_Migration_Guide_Full/"/>
      <url>/2024/06/30/VM_Migration_Guide_Full/</url>
      
        <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœºè¿ç§»æŒ‡å—"><a href="#è™šæ‹Ÿæœºè¿ç§»æŒ‡å—" class="headerlink" title="è™šæ‹Ÿæœºè¿ç§»æŒ‡å—"></a>è™šæ‹Ÿæœºè¿ç§»æŒ‡å—</h1><hr><h2 id="1-ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„"><a href="#1-ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„" class="headerlink" title="1. ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„"></a>1. ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„</h2><p>è™šæ‹Ÿæœºå¿…é¡»æ˜¯æŒä¹…åŒ–çš„æ‰èƒ½è¿›è¡Œè¿ç§»ã€‚å¦‚æœè™šæ‹Ÿæœºæ˜¯ä¸´æ—¶çš„ï¼ˆtransientï¼‰ï¼Œéœ€è¦å…ˆå°†å…¶é…ç½®ä¸ºæŒä¹…åŒ–ã€‚</p><h3 id="å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–è™šæ‹Ÿæœº"><a href="#å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–è™šæ‹Ÿæœº" class="headerlink" title="å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–è™šæ‹Ÿæœº"></a>å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–è™šæ‹Ÿæœº</h3><p>å¦‚æœè™šæ‹Ÿæœºæ˜¯ä¸´æ—¶çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å…¶è½¬æ¢ä¸ºæŒä¹…åŒ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh dumpxml mgtest &gt; /tmp/mgtest.xml</span><br><span class="line">sudo virsh define /tmp/mgtest.xml</span><br></pre></td></tr></table></figure><h2 id="2-åœ¨çº¿è¿ç§»è™šæ‹Ÿæœº"><a href="#2-åœ¨çº¿è¿ç§»è™šæ‹Ÿæœº" class="headerlink" title="2. åœ¨çº¿è¿ç§»è™šæ‹Ÿæœº"></a>2. åœ¨çº¿è¿ç§»è™šæ‹Ÿæœº</h2><h3 id="ç¡®ä¿è™šæ‹Ÿæœºç£ç›˜ç¼“å­˜è®¾ç½®ä¸º-none-æˆ–-directsync"><a href="#ç¡®ä¿è™šæ‹Ÿæœºç£ç›˜ç¼“å­˜è®¾ç½®ä¸º-none-æˆ–-directsync" class="headerlink" title="ç¡®ä¿è™šæ‹Ÿæœºç£ç›˜ç¼“å­˜è®¾ç½®ä¸º none æˆ– directsync"></a>ç¡®ä¿è™šæ‹Ÿæœºç£ç›˜ç¼“å­˜è®¾ç½®ä¸º none æˆ– directsync</h3><p>ç¼–è¾‘è™šæ‹Ÿæœºçš„ XML é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh edit mgtest</span><br></pre></td></tr></table></figure><p>åœ¨ <code>&lt;disk&gt;</code> éƒ¨åˆ†ä¸­æ·»åŠ æˆ–ä¿®æ”¹ <code>&lt;driver&gt;</code> éƒ¨åˆ†ï¼Œå°† <code>cache</code> è®¾ç½®ä¸º <code>none</code> æˆ– <code>directsync</code>ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">disk</span> <span class="attr">type</span>=<span class="string">&#x27;file&#x27;</span> <span class="attr">device</span>=<span class="string">&#x27;disk&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;qemu&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;qcow2&#x27;</span> <span class="attr">cache</span>=<span class="string">&#x27;none&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">file</span>=<span class="string">&#x27;/mnt/nfs_share/mgtest.qcow2&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">&#x27;vda&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;virtio&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x04&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">disk</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚</p><h3 id="é‡å¯è™šæ‹Ÿæœº"><a href="#é‡å¯è™šæ‹Ÿæœº" class="headerlink" title="é‡å¯è™šæ‹Ÿæœº"></a>é‡å¯è™šæ‹Ÿæœº</h3><p>ä¸ºäº†ä½¿é…ç½®ç”Ÿæ•ˆï¼Œéœ€è¦é‡å¯è™šæ‹Ÿæœºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh shutdown mgtest</span><br><span class="line">sudo virsh start mgtest</span><br></pre></td></tr></table></figure><h3 id="è¿›è¡Œåœ¨çº¿è¿ç§»"><a href="#è¿›è¡Œåœ¨çº¿è¿ç§»" class="headerlink" title="è¿›è¡Œåœ¨çº¿è¿ç§»"></a>è¿›è¡Œåœ¨çº¿è¿ç§»</h3><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œåœ¨çº¿è¿ç§»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh migrate --live mgtest qemu+ssh://192.168.50.235/system</span><br></pre></td></tr></table></figure><h2 id="3-ç¦»çº¿è¿ç§»è™šæ‹Ÿæœº"><a href="#3-ç¦»çº¿è¿ç§»è™šæ‹Ÿæœº" class="headerlink" title="3. ç¦»çº¿è¿ç§»è™šæ‹Ÿæœº"></a>3. ç¦»çº¿è¿ç§»è™šæ‹Ÿæœº</h2><h3 id="ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„"><a href="#ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„" class="headerlink" title="ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„"></a>ç¡®ä¿è™šæ‹Ÿæœºæ˜¯æŒä¹…åŒ–çš„</h3><p>å¦‚æœè™šæ‹Ÿæœºæ˜¯ä¸´æ—¶çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å…¶è½¬æ¢ä¸ºæŒä¹…åŒ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh dumpxml mgtest &gt; /tmp/mgtest.xml</span><br><span class="line">sudo virsh define /tmp/mgtest.xml</span><br></pre></td></tr></table></figure><h3 id="å…³é—­è™šæ‹Ÿæœº"><a href="#å…³é—­è™šæ‹Ÿæœº" class="headerlink" title="å…³é—­è™šæ‹Ÿæœº"></a>å…³é—­è™šæ‹Ÿæœº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh shutdown mgtest</span><br></pre></td></tr></table></figure><h3 id="è¿›è¡Œç¦»çº¿è¿ç§»"><a href="#è¿›è¡Œç¦»çº¿è¿ç§»" class="headerlink" title="è¿›è¡Œç¦»çº¿è¿ç§»"></a>è¿›è¡Œç¦»çº¿è¿ç§»</h3><p>æ‰§è¡Œç¦»çº¿è¿ç§»å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh migrate --offline --persistent mgtest qemu+ssh://192.168.50.235/system</span><br></pre></td></tr></table></figure><h2 id="4-ç¤ºä¾‹æµç¨‹"><a href="#4-ç¤ºä¾‹æµç¨‹" class="headerlink" title="4. ç¤ºä¾‹æµç¨‹"></a>4. ç¤ºä¾‹æµç¨‹</h2><h3 id="æ£€æŸ¥è™šæ‹ŸæœºçŠ¶æ€"><a href="#æ£€æŸ¥è™šæ‹ŸæœºçŠ¶æ€" class="headerlink" title="æ£€æŸ¥è™šæ‹ŸæœºçŠ¶æ€"></a>æ£€æŸ¥è™šæ‹ŸæœºçŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh list --all</span><br></pre></td></tr></table></figure><h3 id="å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰"><a href="#å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰" class="headerlink" title="å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰"></a>å°†ä¸´æ—¶è™šæ‹Ÿæœºè½¬æ¢ä¸ºæŒä¹…åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh dumpxml mgtest &gt; /tmp/mgtest.xml</span><br><span class="line">sudo virsh define /tmp/mgtest.xml</span><br></pre></td></tr></table></figure><h3 id="å…³é—­è™šæ‹Ÿæœº-1"><a href="#å…³é—­è™šæ‹Ÿæœº-1" class="headerlink" title="å…³é—­è™šæ‹Ÿæœº"></a>å…³é—­è™šæ‹Ÿæœº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh shutdown mgtest</span><br></pre></td></tr></table></figure><h3 id="è¿›è¡Œåœ¨çº¿è¿ç§»-1"><a href="#è¿›è¡Œåœ¨çº¿è¿ç§»-1" class="headerlink" title="è¿›è¡Œåœ¨çº¿è¿ç§»"></a>è¿›è¡Œåœ¨çº¿è¿ç§»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh migrate --live mgtest qemu+ssh://192.168.50.235/system</span><br></pre></td></tr></table></figure><h3 id="è¿›è¡Œç¦»çº¿è¿ç§»-1"><a href="#è¿›è¡Œç¦»çº¿è¿ç§»-1" class="headerlink" title="è¿›è¡Œç¦»çº¿è¿ç§»"></a>è¿›è¡Œç¦»çº¿è¿ç§»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo virsh migrate --offline --persistent mgtest qemu+ssh://192.168.50.235/system</span><br></pre></td></tr></table></figure><h2 id="5-NFS-é…ç½®æ­¥éª¤"><a href="#5-NFS-é…ç½®æ­¥éª¤" class="headerlink" title="5. NFS é…ç½®æ­¥éª¤"></a>5. NFS é…ç½®æ­¥éª¤</h2><h3 id="æœåŠ¡å™¨ç«¯é…ç½®"><a href="#æœåŠ¡å™¨ç«¯é…ç½®" class="headerlink" title="æœåŠ¡å™¨ç«¯é…ç½®"></a>æœåŠ¡å™¨ç«¯é…ç½®</h3><ol><li><p><strong>å®‰è£…NFSæœåŠ¡å™¨ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install nfs-kernel-server</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºå…±äº«ç›®å½•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /srv/nfs_share</span><br><span class="line">sudo <span class="built_in">chown</span> nobody:nogroup /srv/nfs_share</span><br><span class="line">sudo <span class="built_in">chmod</span> 777 /srv/nfs_share</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®NFSå¯¼å‡ºï¼š</strong></p><p>ç¼–è¾‘ <code>/etc/exports</code> æ–‡ä»¶ï¼Œæ·»åŠ å…±äº«ç›®å½•çš„é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/exports</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/srv/nfs_share 192.168.50.0/24(rw,sync,no_subtree_check,no_root_squash)</span><br></pre></td></tr></table></figure></li><li><p><strong>å¯¼å‡ºNFSå…±äº«ç›®å½•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo exportfs -ra</span><br></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨å¹¶å¯ç”¨NFSæœåŠ¡ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nfs-kernel-server</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nfs-kernel-server</span><br></pre></td></tr></table></figure></li></ol><h3 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h3><ol><li><p><strong>å®‰è£…NFSå®¢æˆ·ç«¯ï¼š</strong></p><p>åœ¨ä¸¤ä¸ªä¸»æœºä¸Šåˆ†åˆ«å®‰è£…NFSå®¢æˆ·ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install nfs-common</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºæŒ‚è½½ç‚¹ç›®å½•ï¼š</strong></p><p>åœ¨ä¸¤ä¸ªä¸»æœºä¸Šåˆ†åˆ«åˆ›å»ºæŒ‚è½½ç‚¹ç›®å½•ï¼Œä¾‹å¦‚ <code>/mnt/nfs_share</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /mnt/nfs_share</span><br></pre></td></tr></table></figure></li><li><p><strong>æŒ‚è½½NFSå…±äº«ç›®å½•ï¼š</strong></p><p>åœ¨ä¸¤ä¸ªä¸»æœºä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†NFSå…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t nfs -o rw 192.168.50.100:/srv/nfs_share /mnt/nfs_share</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®è‡ªåŠ¨æŒ‚è½½ï¼ˆå¯é€‰ï¼‰ï¼š</strong></p><p>ä¸ºäº†åœ¨ç³»ç»Ÿé‡å¯åè‡ªåŠ¨æŒ‚è½½NFSå…±äº«ç›®å½•ï¼Œå¯ä»¥ç¼–è¾‘ <code>/etc/fstab</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/fstab</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.50.100:/srv/nfs_share /mnt/nfs_share nfs defaults 0 0</span><br></pre></td></tr></table></figure></li></ol><h3 id="éªŒè¯é…ç½®"><a href="#éªŒè¯é…ç½®" class="headerlink" title="éªŒè¯é…ç½®"></a>éªŒè¯é…ç½®</h3><ol><li><p><strong>éªŒè¯æŒ‚è½½ï¼š</strong></p><p>åœ¨ä¸¤ä¸ªä¸»æœºä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®è®¤NFSå…±äº«ç›®å½•æ˜¯å¦æˆåŠŸæŒ‚è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•è¯»å†™æƒé™ï¼š</strong></p><p>åœ¨ä¸¤ä¸ªä¸»æœºä¸Šåˆ†åˆ«å°è¯•åœ¨æŒ‚è½½çš„å…±äº«ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œç¡®ä¿è¯»å†™æƒé™æ­£å¸¸ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">touch</span> /mnt/nfs_share/testfile</span><br><span class="line"><span class="built_in">ls</span> -l /mnt/nfs_share/testfile</span><br></pre></td></tr></table></figure></li></ol><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥é…ç½®å’ŒéªŒè¯NFSå…±äº«ç›®å½•ï¼Œä»¥ä¾¿åœ¨è™šæ‹Ÿæœºè¿ç§»è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> è™šæ‹Ÿæœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦ç”¨ Debian ç³»ç»Ÿçš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ </title>
      <link href="/2024/06/30/disable_screen_lock_and_sleep/"/>
      <url>/2024/06/30/disable_screen_lock_and_sleep/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¦ç”¨-Debian-ç³»ç»Ÿçš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ "><a href="#ç¦ç”¨-Debian-ç³»ç»Ÿçš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ " class="headerlink" title="ç¦ç”¨ Debian ç³»ç»Ÿçš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ "></a>ç¦ç”¨ Debian ç³»ç»Ÿçš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ </h1><p>æœ¬æ–‡æ¡£æä¾›äº†ç¦ç”¨ Debian ç³»ç»Ÿå±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ åŠŸèƒ½çš„è¯¦ç»†æ­¥éª¤ã€‚</p><h2 id="1-ç¦ç”¨å±å¹•é”å®š"><a href="#1-ç¦ç”¨å±å¹•é”å®š" class="headerlink" title="1. ç¦ç”¨å±å¹•é”å®š"></a>1. ç¦ç”¨å±å¹•é”å®š</h2><p>é¦–å…ˆï¼Œç¡®ä¿å±å¹•é”å®šè¢«ç¦ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsettings <span class="built_in">set</span> org.gnome.desktop.screensaver lock-enabled <span class="literal">false</span></span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.desktop.screensaver idle-activation-enabled <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="2-ç¦ç”¨ç³»ç»Ÿç¡çœ "><a href="#2-ç¦ç”¨ç³»ç»Ÿç¡çœ " class="headerlink" title="2. ç¦ç”¨ç³»ç»Ÿç¡çœ "></a>2. ç¦ç”¨ç³»ç»Ÿç¡çœ </h2><p>è¦ç¦ç”¨ç³»ç»Ÿçš„è‡ªåŠ¨ç¡çœ åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ <code>systemd</code> çš„é…ç½®æ–‡ä»¶æ¥å®ç°ã€‚ç¼–è¾‘ <code>/etc/systemd/logind.conf</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/logind.conf</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å¹¶ä¿®æ”¹ä»¥ä¸‹è¡Œï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#HandleLidSwitch=suspend</span></span><br><span class="line"><span class="attr">HandleLidSwitch</span>=ignore</span><br><span class="line"><span class="comment">#HandleLidSwitchDocked=ignore</span></span><br><span class="line"><span class="attr">HandleLidSwitchDocked</span>=ignore</span><br><span class="line"><span class="comment">#HandleSuspendKey=suspend</span></span><br><span class="line"><span class="attr">HandleSuspendKey</span>=ignore</span><br><span class="line"><span class="comment">#HandleHibernateKey=hibernate</span></span><br><span class="line"><span class="attr">HandleHibernateKey</span>=ignore</span><br><span class="line"><span class="comment">#HandleLidSwitchExternalPower=suspend</span></span><br><span class="line"><span class="attr">HandleLidSwitchExternalPower</span>=ignore</span><br><span class="line"><span class="comment">#HandleLidSwitchDockedExternalPower=ignore</span></span><br><span class="line"><span class="attr">HandleLidSwitchDockedExternalPower</span>=ignore</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶å¹¶é‡å¯ <code>systemd-logind</code> æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart systemd-logind</span><br></pre></td></tr></table></figure><h2 id="3-ç¦ç”¨-GNOME-ç”µæºè®¾ç½®ä¸­çš„è‡ªåŠ¨ç¡çœ "><a href="#3-ç¦ç”¨-GNOME-ç”µæºè®¾ç½®ä¸­çš„è‡ªåŠ¨ç¡çœ " class="headerlink" title="3. ç¦ç”¨ GNOME ç”µæºè®¾ç½®ä¸­çš„è‡ªåŠ¨ç¡çœ "></a>3. ç¦ç”¨ GNOME ç”µæºè®¾ç½®ä¸­çš„è‡ªåŠ¨ç¡çœ </h2><p>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¦ç”¨ GNOME ç”µæºè®¾ç½®ä¸­çš„è‡ªåŠ¨ç¡çœ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsettings <span class="built_in">set</span> org.gnome.settings-daemon.plugins.power sleep-inactive-ac-timeout 0</span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.settings-daemon.plugins.power sleep-inactive-battery-timeout 0</span><br></pre></td></tr></table></figure><h2 id="4-ç¡®è®¤é…ç½®"><a href="#4-ç¡®è®¤é…ç½®" class="headerlink" title="4. ç¡®è®¤é…ç½®"></a>4. ç¡®è®¤é…ç½®</h2><p>å†æ¬¡æ£€æŸ¥è¿™äº›é…ç½®æ˜¯å¦å·²ç»ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gsettings get org.gnome.desktop.screensaver lock-enabled</span><br><span class="line">gsettings get org.gnome.desktop.screensaver idle-activation-enabled</span><br><span class="line">gsettings get org.gnome.settings-daemon.plugins.power sleep-inactive-ac-timeout</span><br><span class="line">gsettings get org.gnome.settings-daemon.plugins.power sleep-inactive-battery-timeout</span><br></pre></td></tr></table></figure><h2 id="5-æ£€æŸ¥æ—¥å¿—ä¿¡æ¯"><a href="#5-æ£€æŸ¥æ—¥å¿—ä¿¡æ¯" class="headerlink" title="5. æ£€æŸ¥æ—¥å¿—ä¿¡æ¯"></a>5. æ£€æŸ¥æ—¥å¿—ä¿¡æ¯</h2><p>å¦‚æœé—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä»¥è·å–æ›´å¤šä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -xe</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ åº”è¯¥èƒ½å¤ŸæˆåŠŸç¦ç”¨ Debian ç³»ç»Ÿä¸­çš„å±å¹•é”å®šå’Œè‡ªåŠ¨ç¡çœ åŠŸèƒ½ã€‚å¦‚æœéœ€è¦æ›´å¤šå¸®åŠ©ï¼Œè¯·æä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯ä»¥ä¾¿è¿›ä¸€æ­¥æ’æŸ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World!</title>
      <link href="/2024/06/30/hello-world/"/>
      <url>/2024/06/30/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> template </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POST TEMPLATE</title>
      <link href="/2024/06/30/post_template/"/>
      <url>/2024/06/30/post_template/</url>
      
        <content type="html"><![CDATA[<p>å†™æ³•è§£é‡Š<br>titleã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜<br>dateã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ<br>updatedã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ<br>tagsã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾<br>categoriesã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»<br>keywordsã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—<br>descriptionã€å¯é€‰ã€‘æ–‡ç« æè¿°<br>top_imgã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡<br>coverã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾(å¦‚æœæ²¡æœ‰è®¾ç½®top_img,æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸ºfalse&#x2F;å›¾ç‰‡åœ°å€&#x2F;ç•™ç©º)<br>commentsã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å—(é»˜è®¤ true)<br>tocã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« TOC(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„enableé…ç½®)<br>toc_numberã€å¯é€‰ã€‘æ˜¾ç¤ºtoc_number(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„numberé…ç½®)<br>toc_style_simpleã€å¯é€‰ã€‘æ˜¾ç¤º toc ç®€æ´æ¨¡å¼<br>copyrightã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å—(é»˜è®¤ä¸ºè®¾ç½®ä¸­post_copyrightçš„enableé…ç½®)<br>copyright_authorã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…<br>copyright_author_hrefã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥<br>copyright_urlã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥<br>copyright_infoã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—<br>mathjaxã€å¯é€‰ã€‘æ˜¾ç¤ºmathjax(å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )<br>katexã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )<br>aplayerã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css,è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®<br>highlight_shrinkã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€(true&#x2F;false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)<br>asideã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)<br>abcjsã€å¯é€‰ã€‘åŠ è½½ abcjs (å½“è®¾ç½® abcjs çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )</p><p>ä½œè€…: Jerry<br>é€£çµ: <a href="https://butterfly.js.org/posts/dc584b87/#Post-Front-matter">https://butterfly.js.org/posts/dc584b87/#Post-Front-matter</a><br>ä¾†æº: Butterfly<br>è‘—ä½œæ¬Šæ­¸ä½œè€…æ‰€æœ‰ã€‚å•†æ¥­è½‰è¼‰è«‹è¯ç¹«ä½œè€…ç²å¾—æˆæ¬Šï¼Œéå•†æ¥­è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> template </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Template</title>
      <link href="/2024/06/28/README/"/>
      <url>/2024/06/28/README/</url>
      
        <content type="html"><![CDATA[<img src="https://raw.githubusercontent.com/hexojs/logo/master/hexo-logo-avatar.png" alt="Hexo logo" width="100" height="100" align="right" /><h1 id="Hexo-Template"><a href="#Hexo-Template" class="headerlink" title="Hexo Template"></a>Hexo Template</h1><blockquote><p>A fast, simple &amp; powerful blog framework, powered by <a href="https://nodejs.org/">Node.js</a>. Here is the template of it.</p></blockquote><p><a href="https://mmdjiji.github.io/hexo-template">Demo</a> |<br><a href="https://hexo.io/">Official Website</a> |<br><a href="https://hexo.io/docs/">Documentation</a> |<br><a href="https://github.com/mmdjiji/hexo-template">GitHub</a></p><h2 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started"></a>Get Started</h2><p>There are two lines to modify in <code>_config.yml</code>:</p><ol><li><p>Set your site url at <strong>line 16</strong>. For example, if you use GitHub Page, set url as <code>https://username.github.io/project</code>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://jiji.pro/hexo-template</span></span><br></pre></td></tr></table></figure></li><li><p>Set your project name at <strong>line 107</strong>, if your project name is <code>username</code> or <code>username.github.io</code>, just remove it at the end of <code>_config.yml</code>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">root:</span> <span class="string">/hexo-template</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="CI-CD"><a href="#CI-CD" class="headerlink" title="CI&#x2F;CD"></a>CI&#x2F;CD</h2><p>This repository uses GitHub Actions for CI&#x2F;CD. You donâ€™t need to build your documents manually. Just commit your documents (then run <code>git push</code>), and then turn on the GitHub Pages in the settings to access your online documents. (For this demo is <a href="https://mmdjiji.github.io/hexo-template">https://mmdjiji.github.io/hexo-template</a>)</p><h2 id="Hexo-Features"><a href="#Hexo-Features" class="headerlink" title="Hexo Features"></a>Hexo Features</h2><ul><li>Blazing fast generating</li><li>Support for GitHub Flavored Markdown and most Octopress plugins</li><li>One-command deploy to GitHub Pages, Heroku, etc.</li><li>Powerful API for limitless extensibility</li><li>Hundreds of <a href="https://hexo.io/themes/">themes</a> &amp; <a href="https://hexo.io/plugins/">plugins</a></li></ul><h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><p><strong>Install Hexo</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>Install with <a href="https://brew.sh/">brew</a> on macOS and Linux:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install hexo</span><br></pre></td></tr></table></figure><p><strong>Setup your blog</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure><p><strong>Start the server</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p><strong>Create a new post</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;Hello Hexo&quot;</span></span><br></pre></td></tr></table></figure><p><strong>Generate static files</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><h2 id="More-Information"><a href="#More-Information" class="headerlink" title="More Information"></a>More Information</h2><ul><li>Read the <a href="https://hexo.io/">documentation</a></li><li>Visit the <a href="https://github.com/hexojs/awesome-hexo">Awesome Hexo</a> list</li><li>Find solutions in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a></li><li>Join discussion on <a href="https://groups.google.com/group/hexo">Google Group</a>, <a href="https://discord.gg/teM2Anj">Discord</a>, <a href="https://gitter.im/hexojs/hexo">Gitter</a> or <a href="https://t.me/hexojs">Telegram</a></li><li>See the <a href="https://hexo.io/plugins/">plugin list</a> and the <a href="https://hexo.io/themes/">theme list</a> on wiki</li><li>Follow <a href="https://twitter.com/hexojs">@hexojs</a> for latest news</li></ul><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>Follows <a href="https://github.com/hexojs/hexo">hexojs&#x2F;hexo</a> , use <a href="LICENSE">MIT License</a>.</p><p><a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fhexojs%2Fhexo?ref=badge_large"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fhexojs%2Fhexo.svg?type=large" alt="FOSSA Status"></a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Template </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
